(()=>{"use strict";var e={3126:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(3680),n=r(2593);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:s.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s.Event.None}),e.is=function(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const i=Object.freeze((function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new s.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=o.None}}},3680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var r=!1,s=0,n=this._callbacks.length;s<n;s++)if(this._callbacks[s]===e){if(this._contexts[s]===t)return this._callbacks.splice(s,1),void this._contexts.splice(s,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],r=this._callbacks.slice(0),s=this._contexts.slice(0),n=0,o=r.length;n<o;n++)try{t.push(r[n].apply(s[n],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let o;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s,s._noop=function(){}},2593:(e,t)=>{function r(e){return"string"==typeof e||e instanceof String}function s(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=s,t.stringArray=function(e){return s(e)&&e.every((e=>r(e)))}},397:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,s=r.None){let n=this._map.get(e);if(n)n.value=t,s!==r.None&&this.touch(n,s);else{switch(n={key:e,value:t,next:void 0,previous:void 0},s){case r.None:this.addItemLast(n);break;case r.First:this.addItemFirst(n);break;case r.Last:default:this.addItemLast(n)}this._map.set(e,n),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}forEachReverse(e,t){let r=this._tail;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},8231:(e,t,r)=>{function s(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});const n=r(2593),o=r(3234);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const i=r(6386);t.MessageReader=i.MessageReader,t.StreamMessageReader=i.StreamMessageReader,t.IPCMessageReader=i.IPCMessageReader,t.SocketMessageReader=i.SocketMessageReader;const a=r(9725);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=r(3680);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const l=r(3126);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;const u=r(397);var d,f,h,g,p,m,v,y;s(r(3377)),s(r(1609)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(d||(d={})),function(e){e.type=new o.NotificationType("$/progress")}(f||(f={})),t.ProgressType=class{constructor(){}},t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(g=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v=t.ConnectionErrors||(t.ConnectionErrors={}));class w extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,w.prototype)}}function _(e,t,r,s){let i=0,a=0,_=0;const S="2.0";let E,b,T,x,R=Object.create(null),C=Object.create(null),O=new Map,k=new u.LinkedMap,N=Object.create(null),L=Object.create(null),P=h.Off,M=g.Text,$=y.New,D=new c.Emitter,W=new c.Emitter,I=new c.Emitter,F=new c.Emitter,q=new c.Emitter;function A(e){return"req-"+e.toString()}function j(e){}function V(){return $===y.Listening}function U(){return $===y.Closed}function B(){return $===y.Disposed}function H(){$!==y.New&&$!==y.Listening||($=y.Closed,W.fire(void 0))}function J(){T||0===k.size||(T=setImmediate((()=>{T=void 0,function(){if(0===k.size)return;let e=k.shift();try{o.isRequestMessage(e)?function(e){if(B())return;function r(r,s,n){let i={jsonrpc:S,id:e.id};r instanceof o.ResponseError?i.error=r.toJson():i.result=void 0===r?null:r,G(i,s,n),t.write(i)}function s(r,s,n){let o={jsonrpc:S,id:e.id,error:r.toJson()};G(o,s,n),t.write(o)}!function(e){if(P!==h.Off&&x)if(M===g.Text){let t;P===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Received request '${e.method} - (${e.id})'.`,t)}else X("receive-request",e)}(e);let i,a,c=R[e.method];c&&(i=c.type,a=c.handler);let u=Date.now();if(a||E){let c=new l.CancellationTokenSource,d=String(e.id);L[d]=c;try{let l;l=void 0===e.params||void 0!==i&&0===i.numberOfParams?a?a(c.token):E(e.method,c.token):n.array(e.params)&&(void 0===i||i.numberOfParams>1)?a?a(...e.params,c.token):E(e.method,...e.params,c.token):a?a(e.params,c.token):E(e.method,e.params,c.token);let f=l;l?f.then?f.then((t=>{delete L[d],r(t,e.method,u)}),(t=>{delete L[d],t instanceof o.ResponseError?s(t,e.method,u):t&&n.string(t.message)?s(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):s(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete L[d],r(l,e.method,u)):(delete L[d],function(r,s,n){void 0===r&&(r=null);let o={jsonrpc:S,id:e.id,result:r};G(o,s,n),t.write(o)}(l,e.method,u))}catch(t){delete L[d],t instanceof o.ResponseError?r(t,e.method,u):t&&n.string(t.message)?s(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):s(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else s(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):o.isNotificationMessage(e)?function(e){if(B())return;let t,s;if(e.method===d.type.method)s=e=>{let t=e.id,r=L[String(t)];r&&r.cancel()};else{let r=C[e.method];r&&(s=r.handler,t=r.type)}if(s||b)try{!function(e){if(P!==h.Off&&x&&e.method!==m.type.method)if(M===g.Text){let t;P===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Received notification '${e.method}'.`,t)}else X("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?s?s():b(e.method):n.array(e.params)&&(void 0===t||t.numberOfParams>1)?s?s(...e.params):b(e.method,...e.params):s?s(e.params):b(e.method,e.params)}catch(t){t.message?r.error(`Notification handler '${e.method}' failed with message: ${t.message}`):r.error(`Notification handler '${e.method}' failed unexpectedly.`)}else I.fire(e)}(e):o.isResponseMessage(e)?function(e){if(!B())if(null===e.id)e.error?r.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{let t=String(e.id),s=N[t];if(function(e,t){if(P!==h.Off&&x)if(M===g.Text){let r;if(P===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){let s=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";x.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${s}`,r)}else x.log(`Received response ${e.id} without active response promise.`,r)}else X("receive-response",e)}(e,s),s){delete N[t];try{if(e.error){let t=e.error;s.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");s.resolve(e.result)}}catch(e){e.message?r.error(`Response handler '${s.method}' failed with message: ${e.message}`):r.error(`Response handler '${s.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=String(t.id),r=N[e];r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{J()}}()})))}e.onClose(H),e.onError((function(e){D.fire([e,void 0,void 0])})),t.onClose(H),t.onError((function(e){D.fire(e)}));let z=e=>{try{if(o.isNotificationMessage(e)&&e.method===d.type.method){let r=A(e.params.id),n=k.get(r);if(o.isRequestMessage(n)){let o=s&&s.cancelUndispatched?s.cancelUndispatched(n,j):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return k.delete(r),o.id=n.id,G(o,e.method,Date.now()),void t.write(o)}}!function(e,t){var r;o.isRequestMessage(t)?e.set(A(t.id),t):o.isResponseMessage(t)?e.set(null===(r=t.id)?"res-unknown-"+(++_).toString():"res-"+r.toString(),t):e.set("not-"+(++a).toString(),t)}(k,e)}finally{J()}};function G(e,t,r){if(P!==h.Off&&x)if(M===g.Text){let s;P===h.Verbose&&(e.error&&e.error.data?s=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?s=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(s="No result returned.\n\n")),x.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,s)}else X("send-response",e)}function X(e,t){if(!x||P===h.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};x.log(r)}function Y(){if(U())throw new w(v.Closed,"Connection is closed.");if(B())throw new w(v.Disposed,"Connection is disposed.")}function Q(e){return void 0===e?null:e}function Z(e,t){let r,s=e.numberOfParams;switch(s){case 0:r=null;break;case 1:r=Q(t[0]);break;default:r=[];for(let e=0;e<t.length&&e<s;e++)r.push(Q(t[e]));if(t.length<s)for(let e=t.length;e<s;e++)r.push(null)}return r}let K={sendNotification:(e,...r)=>{let s,o;if(Y(),n.string(e))switch(s=e,r.length){case 0:o=null;break;case 1:o=r[0];break;default:o=r}else s=e.method,o=Z(e,r);let i={jsonrpc:S,method:s,params:o};!function(e){if(P!==h.Off&&x)if(M===g.Text){let t;P===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Sending notification '${e.method}'.`,t)}else X("send-notification",e)}(i),t.write(i)},onNotification:(e,t)=>{Y(),n.func(e)?b=e:t&&(n.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},onProgress:(e,t,r)=>{if(O.has(t))throw new Error(`Progress handler for token ${t} already registered`);return O.set(t,r),{dispose:()=>{O.delete(t)}}},sendProgress:(e,t,r)=>{K.sendNotification(f.type,{token:t,value:r})},onUnhandledProgress:F.event,sendRequest:(e,...r)=>{let s,a,c;if(Y(),function(){if(!V())throw new Error("Call listen() first.")}(),n.string(e))switch(s=e,r.length){case 0:a=null;break;case 1:l.CancellationToken.is(r[0])?(a=null,c=r[0]):a=Q(r[0]);break;default:const e=r.length-1;l.CancellationToken.is(r[e])?(c=r[e],a=2===r.length?Q(r[0]):r.slice(0,e).map((e=>Q(e)))):a=r.map((e=>Q(e)))}else{s=e.method,a=Z(e,r);let t=e.numberOfParams;c=l.CancellationToken.is(r[t])?r[t]:void 0}let u=i++,f=new Promise(((e,r)=>{let n={jsonrpc:S,id:u,method:s,params:a},i={method:s,timerStart:Date.now(),resolve:e,reject:r};!function(e){if(P!==h.Off&&x)if(M===g.Text){let t;P===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Sending request '${e.method} - (${e.id})'.`,t)}else X("send-request",e)}(n);try{t.write(n)}catch(e){i.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),i=null}i&&(N[String(u)]=i)}));return c&&c.onCancellationRequested((()=>{K.sendNotification(d.type,{id:u})})),f},onRequest:(e,t)=>{Y(),n.func(e)?E=e:t&&(n.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},trace:(e,t,r)=>{let s=!1,o=g.Text;void 0!==r&&(n.boolean(r)?s=r:(s=r.sendNotification||!1,o=r.traceFormat||g.Text)),P=e,M=o,x=P===h.Off?void 0:t,!s||U()||B()||K.sendNotification(p.type,{value:h.toString(e)})},onError:D.event,onClose:W.event,onUnhandledNotification:I.event,onDispose:q.event,dispose:()=>{if(B())return;$=y.Disposed,q.fire(void 0);let r=new Error("Connection got disposed.");Object.keys(N).forEach((e=>{N[e].reject(r)})),N=Object.create(null),L=Object.create(null),k=new u.LinkedMap,n.func(t.dispose)&&t.dispose(),n.func(e.dispose)&&e.dispose()},listen:()=>{Y(),function(){if(V())throw new w(v.AlreadyListening,"Connection is already listening")}(),$=y.Listening,e.listen(z)},inspect:()=>{console.log("inspect")}};return K.onNotification(m.type,(e=>{P!==h.Off&&x&&x.log(e.message,P===h.Verbose?e.verbose:void 0)})),K.onNotification(f.type,(e=>{const t=O.get(e.token);t?t(e.value):F.fire(e)})),K}t.ConnectionError=w,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&n.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(y||(y={})),t.createMessageConnection=function(e,r,s,n){s||(s=t.NullLogger);let o=void 0!==(c=e).listen&&void 0===c.read?e:new i.StreamMessageReader(e);var c;let l=function(e){return void 0!==e.write&&void 0===e.end}(r)?r:new a.StreamMessageWriter(r);return _(o,l,s,n)}},6386:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(3680),n=r(2593);let o=8192,i=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var r=e,s=Buffer.byteLength(r,this.encoding);(t=Buffer.allocUnsafe(s)).write(r,0,s,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var n=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(n),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==i||this.buffer[t+1]!==a||this.buffer[t+2]!==i||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let r=t.indexOf(":");if(-1===r)throw new Error("Message header must separate key and value using :");let s=t.substr(0,r),n=t.substr(r+1).trim();e[s]=n}));let r=t+4;return this.buffer=this.buffer.slice(r),this.index=this.index-r,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),r=e;return this.buffer.copy(this.buffer,0,r),this.index=this.index-r,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)};class l{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter,this.partialMessageEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class u extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let r=parseInt(t);if(isNaN(r))throw new Error("Content-Length value must be a number.");this.nextMessageLength=r}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var r=JSON.parse(t);this.callback(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u,t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},9725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(3680),n=r(2593);let o="Content-Length: ",i="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)};class a{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a,t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),r=Buffer.byteLength(t,this.encoding),s=[o,r.toString(),i,i];try{this.writable.write(s.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),r=Buffer.byteLength(t,this.encoding),s=[o,r.toString(),i,i];try{this.sending=!0,this.socket.write(s.join(""),"ascii",(r=>{r&&this.handleError(r,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(r){this.handleError(r,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},3234:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(2593);var n;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(n=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,r){super(t),this.code=s.number(e)?e:n.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class i{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=i,t.RequestType0=class extends i{constructor(e){super(e,0)}},t.RequestType=class extends i{constructor(e){super(e,1)}},t.RequestType1=class extends i{constructor(e){super(e,1)}},t.RequestType2=class extends i{constructor(e){super(e,2)}},t.RequestType3=class extends i{constructor(e){super(e,3)}},t.RequestType4=class extends i{constructor(e){super(e,4)}},t.RequestType5=class extends i{constructor(e){super(e,5)}},t.RequestType6=class extends i{constructor(e){super(e,6)}},t.RequestType7=class extends i{constructor(e){super(e,7)}},t.RequestType8=class extends i{constructor(e){super(e,8)}},t.RequestType9=class extends i{constructor(e){super(e,9)}},t.NotificationType=class extends i{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends i{constructor(e){super(e,0)}},t.NotificationType1=class extends i{constructor(e){super(e,1)}},t.NotificationType2=class extends i{constructor(e){super(e,2)}},t.NotificationType3=class extends i{constructor(e){super(e,3)}},t.NotificationType4=class extends i{constructor(e){super(e,4)}},t.NotificationType5=class extends i{constructor(e){super(e,5)}},t.NotificationType6=class extends i{constructor(e){super(e,6)}},t.NotificationType7=class extends i{constructor(e){super(e,7)}},t.NotificationType8=class extends i{constructor(e){super(e,8)}},t.NotificationType9=class extends i{constructor(e){super(e,9)}},t.isRequestMessage=function(e){let t=e;return t&&s.string(t.method)&&(s.string(t.id)||s.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&s.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(s.string(t.id)||s.number(t.id)||null===t.id)}},3377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(1017),n=r(2037),o=r(6113),i=r(1808),a=r(6386),c=r(9725);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:s.join(n.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let r,s=new Promise(((e,t)=>{r=e}));return new Promise(((n,o)=>{let l=i.createServer((e=>{l.close(),r([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])}));l.on("error",o),l.listen(e,(()=>{l.removeListener("error",o),n({onConnected:()=>s})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const r=i.createConnection(e);return[new a.SocketMessageReader(r,t),new c.SocketMessageWriter(r,t)]}},1609:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(1808),n=r(6386),o=r(9725);t.createClientSocketTransport=function(e,t="utf-8"){let r,i=new Promise(((e,t)=>{r=e}));return new Promise(((a,c)=>{let l=s.createServer((e=>{l.close(),r([new n.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])}));l.on("error",c),l.listen(e,"127.0.0.1",(()=>{l.removeListener("error",c),a({onConnected:()=>i})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const r=s.createConnection(e,"127.0.0.1");return[new n.SocketMessageReader(r,t),new o.SocketMessageWriter(r,t)]}},5891:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nullLogFile=t.createLogFile=void 0;const s=r(7147),n=r(1017),o=r(3837);t.createLogFile=function(e,t){const r=(0,n.join)(e,`${t}-${(new Date).toISOString().replace(/[Z: -\.]/g,"").substr(0,15)}.log`);s.mkdirSync(e,{recursive:!0});const i=s.createWriteStream(r,{flags:"a"});return{location:r,log:(e,...t)=>{const r=`[${(new Date).toISOString().replace(/[TZ]/g," ").trim()}] ${o.format(e,...t)}\n`;i.write(r)},close:()=>new Promise((e=>{i.end(),i.once("finish",(()=>{e()}))}))}},t.nullLogFile=function(){return{location:"",log:()=>{},close:()=>Promise.resolve()}}},7631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FailureReason=t.DownloadLog=t.DownloadProgress=t.MakeDefaultRequest=t.DownloadRequest=t.FatalErrorOccured=t.PortResolved=t.LogDebug=t.LogErr=t.LogInfo=t.Progress=void 0;const s=r(8231);var n;t.Progress=new s.NotificationType("progressNotification"),t.LogInfo=new s.NotificationType("logInfoNotification"),t.LogErr=new s.NotificationType("logErrNotification"),t.LogDebug=new s.NotificationType("logDebugNotification"),t.PortResolved=new s.NotificationType("portResolvedNotification"),t.FatalErrorOccured=new s.NotificationType("fatalErrorOccuredNotification"),t.DownloadRequest=new s.RequestType("downloadRequest"),t.MakeDefaultRequest=new s.RequestType("makeDefault"),t.DownloadProgress=new s.ProgressType,t.DownloadLog=new s.ProgressType,(n=t.FailureReason||(t.FailureReason={})).ServerScriptError="servererror",n.ServerCloseError="serverclose",n.Timeout="timeout",n.WSLNotFound="wslnotfound",n.WSLUpdateRequired="wslupdaterequired",n.Undefined="undefined"},1466:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(8472);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})},4314:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomPort=t.isWSL1=t.fileExists=t.getServerTarCacheLocation=t.donwloadBuild=t.getDownloadURL=t.escapeForDoubleQuotes=t.escapeQuotes=t.toForwardSlashes=t.parseDistros=t.getDistros=t.Distro=t.indexOfDistro=t.getDistroFromAuthority=t.isDockerDesktopDistro=t.isAuthorityWsl=t.isEqualAuthority=t.startsWithCaseInsensitive=t.compareCaseInsensitive=t.getAuthorityFromDistro=t.ALPINE_DISTRO=t.ALPINE_AUTHORITY=t.DEFAULT_AUTHORITY=t.getProductConfiguration=t.getWindowsBuildNumber=t.getWSLConfigExecutablePath=t.isWSLInstalled=t.getWSLExecutablePath=t.executeCommand=t.executeWslPath=t.getExecSyncOptions=t.isWSLInExplorerAvailable=t.isExecAndDistroArgumentSupported=t.isWSLEnvAvailable=t.isWSL2Available=t.isWSLPathAvailable=t.isDistroEnvVarAvailable=t.WIN10_1803=t.WIN10_1903=t.WIN10_2004=t.WIN10_21H1=void 0;const s=r(1017),n=r(2037),o=r(7147),i=r(2081),a=r(5687),c=r(6113),l=r(8472),u=r(3837),d=l.loadMessageBundle(r(1017).join(__dirname,"src/utils.ts"));function f(){return _()>=18917||_()>=t.WIN10_1903.build&&"maybe"}function h(){return _()>=17666}function g(e={}){return{env:e,stdio:[null,null,null]}}function p(e,t,r){const n=m();if(!n)throw new Error(d(0,null));const o=g(t);let a=[];return h()?a.push("-d",r,"-e","sh","-c",e):"wsl.exe"===s.basename(n).toLowerCase()?a.push("sh","-c",e):a.push("-c",e),i.execFileSync(n,a,o).toString()}function m(){let e=_()>=16299;const t=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),r=process.env.SystemRoot;if(r)return s.join(r,t?"Sysnative":"System32",e?"wsl.exe":"bash.exe")}function v(){const e=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),t=process.env.SystemRoot;if(t)return s.join(t,e?"Sysnative":"System32","wslconfig.exe")}let y,w;function _(){if("number"!=typeof y){const e="win32"===process.platform&&/(\d+)\.(\d+)\.(\d+)/g.exec(n.release());y=e&&4===e.length?parseInt(e[3]):0}return y}function S(e,t){return e.length===t.length&&(e===t||e.toLowerCase()===t.toLowerCase())}function E(e){return/^wsl\+/.test(e)}t.WIN10_21H1={label:"Windows 10, May 2021 Update, version 21H1",build:19043},t.WIN10_2004={label:"Windows 10, May 2020 Update, version 2004",build:19041},t.WIN10_1903={label:"Windows 10, May 2019 Update, version 1903",build:18362},t.WIN10_1803={label:"Windows 10, April 2018 Update, version 1803",build:17134},t.isDistroEnvVarAvailable=function(){return _()>=t.WIN10_1903.build},t.isWSLPathAvailable=function(){return _()>=17046},t.isWSL2Available=f,t.isWSLEnvAvailable=function(){return _()>=17063},t.isExecAndDistroArgumentSupported=h,t.isWSLInExplorerAvailable=function(){return _()>=18342},t.getExecSyncOptions=g,t.executeWslPath=function(e,t,r){return t?p('echo "$VSCODE_WSL_PATH"',{WSLENV:"VSCODE_WSL_PATH/up",VSCODE_WSL_PATH:e},r).trim():p('wslpath -w "$VSCODE_WSL_PATH"',{WSLENV:"VSCODE_WSL_PATH/u",VSCODE_WSL_PATH:e},r).trim()},t.executeCommand=p,t.getWSLExecutablePath=m,t.isWSLInstalled=async function(){if(_()>=22e3){const e=m();return e?await R(e)?new Promise((t=>{i.execFile(e,["--status"],(e=>{t(!e||"--status exits with error")}))})):d(1,null,e):d(2,null)}{const e=function(){const e=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),t=process.env.SystemRoot;if(t)return s.join(t,e?"Sysnative":"System32","lxss","LxssManager.dll")}();return e?!!await R(e)||d(3,null,e):d(4,null)}},t.getWSLConfigExecutablePath=v,t.getWindowsBuildNumber=_,t.getProductConfiguration=function(e){if(!w){const t=o.readFileSync(s.join(e,"product.json")).toString();w=JSON.parse(t)}return w},t.DEFAULT_AUTHORITY="wsl+default",t.ALPINE_AUTHORITY="wsl+Alpine",t.ALPINE_DISTRO="Alpine",t.getAuthorityFromDistro=function(e){return e?"wsl+"+e:t.DEFAULT_AUTHORITY},t.compareCaseInsensitive=S,t.startsWithCaseInsensitive=function(e,t){return e.substr(0,t.length).toLowerCase()===t.toLowerCase()},t.isEqualAuthority=function(e,t){return S(e,t)},t.isAuthorityWsl=E,t.isDockerDesktopDistro=function(e){return/^docker-desktop(-data)?$/.test(e)},t.getDistroFromAuthority=function(e){if(E(e)){const t=e.substr(4);return"default"===t?void 0:t}throw new Error("authority must start with wsl+")},t.indexOfDistro=function(e,t){for(let r=0;r<e.length;r++)if(S(t,e[r].name))return r;return-1};class b{constructor(e,t,r){this.name=e,this.isDefault=t,this.version=r}isInternal(){return!this.isDefault||/^docker-desktop(-data)?$/.test(this.name)}getAuthority(){return"wsl+"+this.name}}function T(e,t){const r=/\r\n/.test(e)?"\r\n":"\n",s=e.split(r),n=t?/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/:/^(?<name>[a-zA-Z0-9\.\-_]+)/,o=[];for(let e=1;e<s.length;e++){let t=n.exec(s[e]);if(null==t?void 0:t.groups){const r=t.groups.name,s=t.groups.version,n=1===e;o.push(new b(r,n,s))}}return o}function x(e,t,r,s,n=5,i){return new Promise(((l,u)=>{const f=e=>{o.unlink(t,(()=>{})),u(e)},h=o.createWriteStream(t);a.get(e,(a=>{const g=a.headers["x-sha256"];if(i||"string"!=typeof g||(i=g),n>0&&(a.statusCode>=300&&a.statusCode<=303||307===a.statusCode)){const e=a.headers.location;if(e)return void x(e,t,r,s,n-1,i).then(l,u)}if(a.statusCode<200||a.statusCode>299)return void u(d(7,null,e,a.statusCode,a.statusMessage));s(`Download checksum: ${i}`);const p=parseInt(a.headers["content-length"]||"0");if(p){let e=0,t=0;a.on("data",(s=>{e+=s.length,t++%8==0&&r({received:e,total:p})}))}a.on("error",f),a.pipe(h),a.on("end",(e=>{if(i){const e=c.createHash("sha256"),r=o.createReadStream(t);r.on("readable",(()=>{const t=r.read();t?e.update(t):i!==e.digest("hex")?f(d(8,null)):(s("Download checksum verified"),l())}))}else l()}))})).on("error",f)}))}async function R(e){return(0,u.promisify)(o.exists)(e)}async function C(e){await R(e)||(await C(s.dirname(e)),await(0,u.promisify)(o.mkdir)(e))}t.Distro=b,t.getDistros=async function(){const e=f();if(!1!==e)try{return await new Promise(((e,t)=>{const r=m();r?i.execFile(r,["--list","--verbose"],{windowsVerbatimArguments:!0,encoding:"utf16le"},((r,s,n)=>{r?t(r):e(T(s,!0))})):t(new Error(d(5,null)))}))}catch(t){if(!0===e)throw t}return await new Promise(((e,t)=>{const r=v();r?i.execFile(r,["/list"],{windowsVerbatimArguments:!0,encoding:"utf16le"},((r,s,n)=>{r?t(r):e(T(s,!1))})):t(new Error(d(6,null)))}))},t.parseDistros=T,t.toForwardSlashes=function(e){return e.replace(/[\\/]/g,s.posix.sep)},t.escapeQuotes=function(e){return e.replace(/'/g,"'\"'\"'")},t.escapeForDoubleQuotes=function(e){return e.replace(/["$\\]/g,"\\$&")},t.getDownloadURL=function(e,t){return`${e.updateUrl}/commit:${e.commit||"dev"}/server-${t}/${e.quality||"insider"}`},t.donwloadBuild=async function(e,t,r,n){await C(s.dirname(t));const i=`${t}_${Date.now()}`;return x(e,i,r,n).then((e=>(0,u.promisify)(o.rename)(i,t).then((e=>t))))},t.getServerTarCacheLocation=function(e,t){return s.join(n.tmpdir(),"vscode-remote-wsl",e.commit||"dev",`vscode-server-${e.quality}-${t}.tar.gz`)},t.fileExists=R,t.isWSL1=function(e){return-1!==e.indexOf("Microsoft")},t.randomPort=function(){return 1025+Math.floor(64510*Math.random())}},9861:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WSLServerProxy=void 0;const s=r(1808),n=r(2081),o=r(4314);t.WSLServerProxy=class{constructor(e,t,r){this.distro=e,this.logger=t,this.isDebug=r,this.forwardedPorts=new Set,this.execId=0}start(e,t){return new Promise(((r,n)=>{const o=new Set,i=s.createServer({pauseOnConnect:!0},(async r=>{try{const s=i.address().port,n=this.execId++;this.isDebug&&this.logger.debug(`Using executable (${n}) to forward requests from local ${s} to remote ${t}`);const a=await this.runRemoteExec(n,[e,"-e",`\n\t\t\t\t\t\tconst net = require('net');\n\t\t\t\t\t\tprocess.stdin.pause();\n\t\t\t\t\t\tconst client = net.createConnection({ host: '127.0.0.1', port: ${t} }, () => {\n\t\t\t\t\t\t\tclient.pipe(process.stdout);\n\t\t\t\t\t\t\tprocess.stdin.pipe(client);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tclient.on('close', function (hadError) {\n\t\t\t\t\t\t\tconsole.error(hadError ? 'Remote close with error' : 'Remote close');\n\t\t\t\t\t\t\tprocess.exit(hadError ? 1 : 0);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tclient.on('error', function (err) {\n\t\t\t\t\t\t\tprocess.stderr.write(err && (err.stack || err.message) || String(err));\n\t\t\t\t\t\t});`.replace(/\s+/g," ")]);let c=!1;a.exit.then((({code:e,signal:t})=>{c||(o.delete(r),r.end()),this.isDebug&&this.logger.debug(`Exec (${n}) has terminated ${c?"(local socket closed)":""} with code ${e} and signal ${t}.`)})).catch((e=>{this.logger.info(`Exec (${n}) has errored: ${e}`)})),this.isDebug&&a.stderr.on("data",(e=>{this.logger.debug(`Exec (${n}) stderr: ${e.toString("utf8")}`)})),r.on("close",(e=>{this.isDebug&&this.logger.debug(`Exec (${n}): Local close${e?" with error":""}`),c=!0,o.delete(r),a.terminate().catch(console.error)})),a.stdout.pipe(r),r.pipe(a.stdin),o.add(r)}catch(e){this.logger.error("Exception caught when running forwarding executable"+e),console.error(e)}}));i.on("listening",(()=>{const e=i.address().port,s={targetPort:t,server:i,localPort:e,connections:o};i.on("close",(()=>{this.forwardedPorts.delete(s)})),this.forwardedPorts.add(s),this.logger.info(`Started local proxy server on ${e}.`),r(e)})),i.on("error",(e=>{!e||"EADDRINUSE"!==e.code&&"EACCES"!==e.code?n(e):i.listen(0,"127.0.0.1")})),i.on("close",(()=>{n(new Error("Closed"))})),i.listen(0,"127.0.0.1")}))}async runRemoteExec(e,t,r){const s=(0,o.getWSLExecutablePath)();if(!s)throw new Error("wsl command not found\n\nMake sure WSL is installed:\nhttps://aka.ms/vscode-remote/wsl/install-wsl");const i=[];this.distro&&i.push("-d",this.distro),i.push("-e",...t),this.isDebug&&this.logger.debug(`Exec ${e}: ${s} ${(i||[]).join(" ")}`);const a=n.spawn(s,i,{env:r,windowsHide:!0});return{id:e,stdin:a.stdin,stdout:a.stdout,stderr:a.stderr,exit:new Promise(((e,t)=>{a.once("error",(e=>{t(e)})),a.once("close",((t,r)=>{e({code:t,signal:r})}))})),terminate:async()=>{this.isDebug&&this.logger.info(`Terminating exec ${e}`),a.kill("SIGKILL")}}}stopForwarding(e){return new Promise(((t,r)=>{e.server.close((e=>{e?r(e):t()}));for(const t of e.connections)t.destroy()}))}async dispose(){for(const e of this.forwardedPorts.values())try{await this.stopForwarding(e)}catch(e){this.logger.error("Exception thrown when closing the server proxy: "+e)}}}},800:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var s,n,o,i=r(1926);function a(e){return void 0!==e}function c(e,r){return t.isPseudo&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===r.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var s=t[0],n=r[s],o=e;return"string"==typeof n?o=n:"number"!=typeof n&&"boolean"!=typeof n&&null!=n||(o=String(n)),o}))}(o=t.MessageFormat||(t.MessageFormat={})).file="file",o.bundle="bundle",o.both="both",(n=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",n.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(s||(s={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];return c(t,r)},t.loadMessageBundle=function(e){return(0,i.default)().loadMessageBundle(e)},t.config=function(e){return(0,i.default)().config(e)}},1926:(e,t)=>{var r;function s(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(s||(s={})),t.default=s},8472:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.BundleFormat=t.MessageFormat=void 0;var s=r(1017),n=r(7147),o=r(1926),i=r(800),a=r(800);Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return a.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return a.BundleFormat}});var c,l,u=Object.prototype.toString;function d(e){return"[object Number]"===u.call(e)}function f(e){return"[object String]"===u.call(e)}function h(e){return JSON.parse(n.readFileSync(e,"utf8"))}function g(e){return function(t,r){for(var s=[],n=2;n<arguments.length;n++)s[n-2]=arguments[n];return d(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: ".concat(new Error("").stack)):(0,i.format)(e[t],s):f(r)?(console.warn("Message ".concat(r," didn't get externalized correctly.")),(0,i.format)(r,s)):void console.error("Broken localize call found. Stacktrace is\n: ".concat(new Error("").stack))}}function p(e,t){return c[e]=t,t}function m(e){try{return function(e){var t=h(s.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var o=t[n];r[n]=o.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function v(e,t){var r;if(!0===l.languagePackSupport&&void 0!==l.cacheRoot&&void 0!==l.languagePackId&&void 0!==l.translationsConfigFile&&void 0!==l.translationsConfig)try{r=function(e,t){var r,o,i,a=s.join(l.cacheRoot,"".concat(e.id,"-").concat(e.hash,".json")),c=!1,u=!1;try{return r=JSON.parse(n.readFileSync(a,{encoding:"utf8",flag:"r"})),o=a,i=new Date,n.utimes(o,i,i,(function(){})),r}catch(e){if("ENOENT"===e.code)u=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: ".concat(e.message,".")),n.unlink(a,(function(e){e&&console.error("Deleting corrupted bundle ".concat(a," failed."))})),c=!0}}if(r=function(e,t){var r=l.translationsConfig[e.id];if(r){var n=h(r).contents,o=h(s.join(t,"nls.metadata.json")),i=Object.create(null);for(var a in o){var c=o[a],u=n["".concat(e.outDir,"/").concat(a)];if(u){for(var d=[],g=0;g<c.keys.length;g++){var p=c.keys[g],m=u[f(p)?p:p.key];void 0===m&&(m=c.messages[g]),d.push(m)}i[a]=d}else i[a]=c.messages}return i}}(e,t),!r||c)return r;if(u)try{n.writeFileSync(a,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(l.languagePackSupport)return m(t);var o=function(e){for(var t=l.language;t;){var r=s.join(e,"nls.bundle.".concat(t,".json"));if(n.existsSync(r))return r;var o=t.lastIndexOf("-");t=o>0?t.substring(0,o):void 0}if(void 0===t&&(r=s.join(e,"nls.bundle.json"),n.existsSync(r)))return r}(t);if(o)try{return h(o)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=m(t)}return r}function y(e){if(!e)return i.localize;var t=s.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),l.messageFormat===i.MessageFormat.both||l.messageFormat===i.MessageFormat.bundle){var r=function(e){for(var t,r=s.dirname(e);t=s.join(r,"nls.metadata.header.json"),!n.existsSync(t);){var o=s.dirname(r);if(o===r){t=void 0;break}r=o}return t}(e);if(r){var o=s.dirname(r),a=c[o];if(void 0===a)try{var u=JSON.parse(n.readFileSync(r,"utf8"));try{var d=v(u,o);a=p(o,d?{header:u,nlsBundle:d}:null)}catch(e){console.error("Failed to load nls bundle",e),a=p(o,null)}}catch(e){console.error("Failed to read header file",e),a=p(o,null)}if(a){var f=e.substr(o.length+1).replace(/\\/g,"/"),m=a.nlsBundle[f];return void 0===m?(console.error("Messages for file ".concat(e," not found. See console for details.")),function(){return"Messages not found."}):g(m)}}}if(l.messageFormat===i.MessageFormat.both||l.messageFormat===i.MessageFormat.file)try{var y=h(function(e){var t;if(l.cacheLanguageResolution&&t)t=t;else{if(i.isPseudo||!l.language)t=".nls.json";else for(var r=l.language;r;){var s=".nls."+r+".json";if(n.existsSync(e+s)){t=s;break}var o=r.lastIndexOf("-");o>0?r=r.substring(0,o):(t=".nls.json",r=null)}l.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(y)?g(y):(0,i.isDefined)(y.messages)&&(0,i.isDefined)(y.keys)?g(y.messages):(console.error("String bundle '".concat(e,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file ".concat(e)),function(){return"Failed to load message bundle. See console for details."}}function w(e){return e&&(f(e.locale)&&(l.locale=e.locale.toLowerCase(),l.language=l.locale,c=Object.create(null)),void 0!==e.messageFormat&&(l.messageFormat=e.messageFormat),e.bundleFormat===i.BundleFormat.standalone&&!0===l.languagePackSupport&&(l.languagePackSupport=!1)),(0,i.setPseudo)("pseudo"===l.locale),y}!function(){if(l={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:i.MessageFormat.bundle},f(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];f(r)&&(t=r)}if(f(e.locale)&&(l.locale=e.locale.toLowerCase()),void 0===t?l.language=l.locale:"en"!==t&&(l.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(l.languagePackSupport=e._languagePackSupport),f(e._cacheRoot)&&(l.cacheRoot=e._cacheRoot),f(e._languagePackId)&&(l.languagePackId=e._languagePackId),f(e._translationsConfigFile)){l.translationsConfigFile=e._translationsConfigFile;try{l.translationsConfig=h(l.translationsConfigFile)}catch(t){if(e._corruptedFile){var o=s.dirname(e._corruptedFile);n.exists(o,(function(t){t&&n.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}(0,i.setPseudo)("pseudo"===l.locale),c=Object.create(null)}(),t.loadMessageBundle=y,t.config=w,o.default.install(Object.freeze({loadMessageBundle:y,config:w}))},2081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},3837:e=>{e.exports=require("util")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),r(1466);const t=r(1808),n=r(2081),o=r(7147),i=r(8231),a=r(6113),c=r(8472),l=r(4314),u=r(1017),d=r(7631),f=r(9861),h=r(5891),g=c.loadMessageBundle(r(1017).join(__dirname,"src/wslDaemon.ts")),p=process.env.VSCODE_WSL_PIPE_NAME,m=parseInt(process.env.VSCODE_WSL_EXT_HOST_PID||"0",10),v=process.env.VSCODE_WSL_EXT_LOCATION,y=process.env.VSCODE_WSL_APP_ROOT,w=!!process.env.VSCODE_WSL_ENABLE_TELEMETRY,_=process.env.VSCODE_FILE_WATCHER_POLLING||0,S=process.env.VSCODE_WSL_VERSION,E=process.env.VSCODE_WSL_DISTRO,b=!!process.env.VSCODE_WSL_DEBUG_INFO,T=process.env.VSCODE_WSL_DEFAULT_DISTRO,x=process.env.VSCODE_WSL_LOG_FILE_LOCATION,R=process.env.VSCODE_WSL_CONNECTION_METHOD,C=process.env.VSCODE_TELEMETRY_LEVEL;let O,k=[];const N=[],L=x&&b?(0,h.createLogFile)(x,"wsl-daemon"):(0,h.nullLogFile)();async function P(e){for(let t=0;t<k.length;t++)k[t]===e&&k.splice(t,1);0===k.length&&(L.log("No more customers => exit"),O?(L.log("Result available, waiting 3 sec before exiting"),setTimeout((()=>{0===k.length?M():L.log("Exit cancelled, new customer")}),3e3)):M())}async function M(){L.log("Exiting");try{N.forEach((e=>e())),$.close(),await L.close()}catch(e){}finally{process.exit(0)}}process.on("uncaughtException",(e=>{L.log(`Unhandled exception: ${e}`)})),process.on("unhandledRejection",(e=>{L.log(`Unhandled rejection: ${e}`)})),function(){let e=i.createMessageConnection(new i.StreamMessageReader(process.stdin),new i.StreamMessageWriter(process.stdout));e.listen(),e.onRequest(((e,...t)=>{throw new Error("Received unexpected request")})),k.push(e);let t=setInterval((function(){try{process.kill(m,0)}catch(r){clearInterval(t),P(e)}}),1e3)}();const $=t.createServer((e=>{const t=i.createMessageConnection(new i.SocketMessageReader(e),new i.SocketMessageWriter(e));if(t.listen(),k.push(t),void 0!==O)try{t.sendNotification(d.LogInfo,`Connecting to daemon started by other Remote-WSL window... ${O.wslVersion}`),t.sendNotification(d.PortResolved,O)}catch(e){I.info(`Error sending resolved info to other Remote-WSL window: ${e}`)}e.on("close",(()=>{P(t)}))}));function D(e){e&&"EADDRINUSE"===e.code||(console.error(e),process.exit(0));const r=e=>{console.error(e),I.error(e)},s=t.createConnection(p,(()=>{s.removeListener("error",r);const e=i.createMessageConnection(new i.SocketMessageReader(s),new i.SocketMessageWriter(s));e.listen();const t=k[0];e.onNotification(t.sendNotification),e.onRequest(t.sendRequest),e.onUnhandledProgress((e=>t.sendProgress(new i.ProgressType,e.token,e.value))),t.onNotification(e.sendNotification),t.onRequest(e.sendRequest),t.onUnhandledProgress((t=>e.sendProgress(new i.ProgressType,t.token,t.value))),s.on("close",(()=>{process.exit(0)}))}));s.once("error",r)}function W(e,t){k.forEach((r=>{r.sendNotification(e,t)}))}const I={info:e=>{L.log(e),W(d.LogInfo,e)},error:e=>{L.log(e),W(d.LogErr,e)},debug:e=>{L.log(e),W(d.LogDebug,e)}};let F=0;function q(e,t,r){let s;if(e){const o=`kill ${r}`;s=(0,l.isExecAndDistroArgumentSupported)()?`${e} -d ${t} -e ${o}`:`${e} "${o}"`,I.info(s);try{n.execSync(s,(0,l.getExecSyncOptions)())}catch(e){}}}$.on("error",D),$.listen(p,(async()=>{let e;$.removeListener("error",D);let t,r="",s=0,i="",c=[],h="";const p=`${a.randomInt(4294967295)}-${a.randomInt(4294967295)}-${a.randomInt(4294967295)}-${a.randomInt(4294967295)}`,m=(t,r,s,n=!1,o=!0)=>{clearTimeout(e),W(d.FatalErrorOccured,{message:t,wslVersion:h,checkLog:s,handled:n,modal:o,reason:r}),M()};async function P(r){clearTimeout(e);const s=R;if("wslExeProxy"===s){if(!t)return void m(g(0,null),d.FailureReason.Undefined,!0);try{const e=new f.WSLServerProxy(E,I,b),s=await e.start(t,r);N.push((()=>{e.dispose()})),O={hostNames:[],port:s,wslVersion:h,connectionToken:p},W(d.PortResolved,O)}catch(e){m(g(1,null,String(e)),d.FailureReason.Undefined,!0)}}else"wsl2VMAddress"===s?(O={hostNames:c,port:r,wslVersion:h,connectionToken:p},W(d.PortResolved,O)):(O={hostNames:[],port:r,wslVersion:h,connectionToken:p},W(d.PortResolved,O))}const A=e=>{const t=e.match(/(\d+)%$/);let r=0;if(t){const e=Math.min(parseInt(t[1],10),100);0===e&&(s=0),e>s&&(r=e-s,s=e)}const n=e;(i!==n||r>0)&&(i=n,W(d.Progress,{increment:45*r/100,message:n}))},j=()=>{let e=!1;if(B)B=!1,H=0,J&&(W(d.Progress,{increment:0,message:g(2,null)}),J=!1);else if(H++,H>300)return void m(g(3,null,Math.floor(90)),d.FailureReason.Timeout,!0);return V.length&&(I.info(V),e=(e=>{for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(10===n){const e=r;r="";let s=e.match(/^WSL-shell-PID: ([\d]+)/);if(s){if("2"===S){const e=s[1];N.push((()=>{q(z,E,e)}))}continue}if(s=e.match(/^Extension host agent listening on (\d+)/),s)return P(parseInt(s[1],10)),!0;if(s=e.match(/^IP Address: ([\d\.]+)/),s){c.push(s[1]);continue}if(s=e.match(/^WSL version: (.+)/),s){h=s[1];continue}if(s=e.match(/^Node executable: (.+)/),s){t=s[1];continue}A(e)}else 8===n?r.length>0&&(r=r.substr(0,r.length-1)):r+=e.charAt(s)}return A(r),!1})(V),V=""),U.length&&(I.error(U),U=""),e};let V="",U="",B=!1,H=0,J=!0;x&&I.info("WSL daemon log file: "+L.location);const z=(0,l.getWSLExecutablePath)();if(!z||!o.existsSync(z))return void m(g(4,null,z),d.FailureReason.WSLNotFound,!1);if(!(0,l.isExecAndDistroArgumentSupported)()&&!(0,l.compareCaseInsensitive)(T,E)&&!await(G=E,X=T,k[0].sendRequest(d.MakeDefaultRequest,{distro:G,current:X})))return void m(g(5,null,l.WIN10_1903.label),d.FailureReason.WSLUpdateRequired,!1,!0);var G,X;e=setInterval(j,300);const Y=(0,l.getProductConfiguration)(y),{commit:Q,quality:Z,serverDataFolderName:K,serverApplicationName:ee}=Y;if(Q&&!Z)return void m(g(6,null,y),d.FailureReason.Undefined,!0);const te=K||".vscode-remote",re=(0,l.isWSLEnvAvailable)();let se="";if(Q&&re){let e="";try{e=function(e,t,r,s){let o;const i=`[ -d ~/${r}/bin/${s} ] && printf found || ([ -f /etc/alpine-release ] && printf alpine-; uname -m)`;o=(0,l.isExecAndDistroArgumentSupported)()?`${e} -d ${t} -e sh -c "${i}"`:"wsl.exe"===(0,u.basename)(e).toLowerCase()?`${e} sh -c "${i}"`:`${e} -c "${i}"`,I.info(`Probing if server is already installed: ${o}`);try{const e=n.execSync(o,(0,l.getExecSyncOptions)()).toString().trim();switch(I.info(`Probing result: ${e}`),e){case"found":return"";case"x86_64":return"linux-x64";case"aarch64":return"linux-arm64";case"alpine-x86_64":return"linux-alpine";case"alpine-aarch64":return"alpine-arm64";default:I.error(`${e} is an unsupported platform. Please file a feature request.`)}return"unknown"}catch(e){const t=[e.message];try{t.push(e.stdout.toString("utf16le")),t.push(e.stderr.toString("utf16le"))}catch(e){}throw new Error(t.join("\n"))}}(z,E,te,Q),e?I.info(`No server install found in WSL, needs ${e}`):I.info("Server install found in WSL")}catch(e){if(I.error(`Unable to detect if server is already installed: ${e}`),"string"==typeof e.message&&-1!==e.message.indexOf("https://aka.ms/wsl2kernel")){const e=g(7,null);m(e,d.FailureReason.WSLUpdateRequired,!1,!1,!1)}(0,l.getWindowsBuildNumber)()<=l.WIN10_1803.build&&I.error(`When using Alpine on ${l.WIN10_1803.label}, make sure that 'bash' is installed. ('apk update && apk add bash')${e}`)}if(e&&"unknown"!==e){if(se=(0,l.getServerTarCacheLocation)(Y,e),o.existsSync(se))W(d.Progress,{increment:45,message:""});else{const t=(0,l.getDownloadURL)(Y,e);I.info(`Downloading server on client side to ${se}.`),I.info(`${t}`);let r=0;try{await function(e,t,s,n){const o=k[0],i=F++,a=F++,c=o.onProgress(d.DownloadProgress,i,(e=>{const t=Math.ceil(45*e.received/e.total);t>r&&(W(d.Progress,{increment:t-r,message:g(8,null)}),r=t),H=0})),l=o.onProgress(d.DownloadLog,a,(e=>{I.info(e)}));return o.sendRequest(d.DownloadRequest,{url:e,target:t,progressToken:i,logToken:a}).finally((()=>{c.dispose(),l.dispose()}))}(t,se)}catch(e){I.error(`Unable to download server on client side: ${e}. Will try to download on WSL side.`),se=""}}W(d.Progress,{increment:0,message:g(9,null)})}else W(d.Progress,{increment:90,message:g(10,null)})}const ne=[],oe=R;"1"===S||"wslExeProxy"===oe?ne.push("--host=127.0.0.1"):ne.push("--host=::"),"2"===S&&"wsl2VMAddress"===oe&&ne.push("--print-ip-address"),ne.push("--port=0"),ne.push(`--connection-token=${p}`),ne.push("--use-host-proxy"),ne.push("--without-browser-env-var"),ne.push("--disable-websocket-compression"),ne.push("--accept-server-license-terms"),"1"===S&&"0"!==_&&ne.push(`--file-watcher-polling=${_}`),b&&ne.push("--log=trace"),w||ne.push("--disable-telemetry"),ne.push(`--telemetry-level=${C}`);let ie=Q?`"${re?"$VSCODE_WSL_EXT_LOCATION":"."}/scripts/wslServer.sh" ${Q} ${Z} ${ee} ${te} ${ne.join(" ")}`:`"$VSCODE_WSL_EXT_LOCATION/scripts/wslServer-dev.sh" "$VSCODE_WSL_APP_ROOT" ${ne.join(" ")}`;const ae=[];b&&(ie="env && VSCODE_WSL_DEBUG_INFO=true "+ie),ie=`'${ie}'`,(0,l.isExecAndDistroArgumentSupported)()?ae.push("-d",E,"sh","-c",ie):"wsl.exe"===(0,u.basename)(z).toLowerCase()?ae.push("sh","-c",ie):ae.push("-c",ie);const ce=function(){const e={...process.env},t=Object.keys(e);for(const r of t)r.match(/^(ELECTRON_|VSCODE_)/)&&delete e[r];return e}();if(re||!Q){const e=[];ce.VSCODE_WSL_EXT_LOCATION=v,e.push("VSCODE_WSL_EXT_LOCATION/up"),se&&(ce.VSCODE_SERVER_TAR=se,e.push("VSCODE_SERVER_TAR/up")),Q||(ce.VSCODE_WSL_APP_ROOT=y,e.push("VSCODE_WSL_APP_ROOT/up")),ce.WSLENV&&e.push(process.env.WSLENV),ce.WSLENV=e.join(":")}let le=re?void 0:v;const ue=b?`, cwd: ${le}, env: ${JSON.stringify(ce,null,"  ")}`:"";I.info(`Launching ${z} ${ae.join(" ")}${ue}`);const de=n.spawn(z,ae,{cwd:le,env:ce,windowsVerbatimArguments:!0});de.stdout.on("data",(e=>{V+=e.toString(),B=!0})),de.stderr.on("data",(e=>{U+=e.toString(),B=!0})),de.on("error",(e=>{j()||m(`VS Code Server for WSL failed with error:\r\n${e.message}`,d.FailureReason.ServerScriptError,!0)})),de.on("close",(e=>{j()||m("VS Code Server for WSL closed unexpectedly.",d.FailureReason.ServerCloseError,!0)}))}))})();var n=exports;for(var o in s)n[o]=s[o];s.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();
//# sourceMappingURL=wslDaemon.js.map