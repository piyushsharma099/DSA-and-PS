/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var LE=Object.create;var Xi=Object.defineProperty,DE=Object.defineProperties,TE=Object.getOwnPropertyDescriptor,$E=Object.getOwnPropertyDescriptors,NE=Object.getOwnPropertyNames,cd=Object.getOwnPropertySymbols,jE=Object.getPrototypeOf,ld=Object.prototype.hasOwnProperty,ME=Object.prototype.propertyIsEnumerable;var ud=(t,e,r)=>e in t?Xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H=(t,e)=>{for(var r in e||(e={}))ld.call(e,r)&&ud(t,r,e[r]);if(cd)for(var r of cd(e))ME.call(e,r)&&ud(t,r,e[r]);return t},re=(t,e)=>DE(t,$E(e)),fd=t=>Xi(t,"__esModule",{value:!0});var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),UE=(t,e)=>{fd(t);for(var r in e)Xi(t,r,{get:e[r],enumerable:!0})},BE=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of NE(e))!ld.call(t,n)&&n!=="default"&&Xi(t,n,{get:()=>e[n],enumerable:!(r=TE(e,n))||r.enumerable});return t},V=t=>BE(fd(Xi(t!=null?LE(jE(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Ph=j((AL,Sh)=>{var rt=require("fs"),is=require("path");Sh.exports=xo;xo.ncp=xo;function xo(t,e,r,n){var i=n;n||(i=r,r={});var s=process.cwd(),o=is.resolve(s,t),a=is.resolve(s,e),c=r.filter,l=r.rename,u=r.transform,f=r.clobber!==!1,d=r.modified,h=r.dereference,m=null,p=0,w=0,y=0,v=r.limit||xo.limit||16;v=v<1?1:v>512?512:v,C(o);function C(b){if(p++,c){if(c instanceof RegExp){if(!c.test(b))return B(!0)}else if(typeof c=="function"&&!c(b))return B(!0)}return A(b)}function A(b){var E=h?rt.stat:rt.lstat;if(y>=v)return setImmediate(function(){A(b)});y++,E(b,function(I,R){var K={};if(I)return F(I);if(K.name=b,K.mode=R.mode,K.mtime=R.mtime,K.atime=R.atime,R.isDirectory())return D(K);if(R.isFile())return k(K);if(R.isSymbolicLink())return $(b)})}function k(b){var E=b.name.replace(o,a);l&&(E=l(E)),z(E,function(I){if(I)return T(b,E);if(f&&N(E,function(){T(b,E)}),d){var R=h?rt.stat:rt.lstat;R(E,function(K,ie){if(b.mtime.getTime()>ie.mtime.getTime())T(b,E);else return B()})}else return B()})}function T(b,E){var I=rt.createReadStream(b.name),R=rt.createWriteStream(E,{mode:b.mode});I.on("error",F),R.on("error",F),u?u(I,R,b):R.on("open",function(){I.pipe(R)}),R.once("finish",function(){d&&rt.utimesSync(E,b.atime,b.mtime),B()})}function N(b,E){rt.unlink(b,function(I){return I?F(I):E()})}function D(b){var E=b.name.replace(o,a);z(E,function(I){if(I)return U(b,E);Y(b.name)})}function U(b,E){rt.mkdir(E,b.mode,function(I){if(I)return F(I);Y(b.name)})}function Y(b){rt.readdir(b,function(E,I){return E?F(E):(I.forEach(function(R){C(is.join(b,R))}),B())})}function $(b){var E=b.replace(o,a);rt.readlink(b,function(I,R){if(I)return F(I);L(R,E)})}function L(b,E){h&&(b=is.resolve(s,b)),z(E,function(I){if(I)return M(b,E);rt.readlink(E,function(R,K){return R?F(R):(h&&(K=is.resolve(s,K)),K===b?B():N(E,function(){M(b,E)}))})})}function M(b,E){rt.symlink(b,E,function(I){return I?F(I):B()})}function z(b,E){rt.lstat(b,function(I){return I&&I.code==="ENOENT"?E(!0):E(!1)})}function F(b){return r.stopOnError?i(b):(!m&&r.errs?m=rt.createWriteStream(r.errs):m||(m=[]),typeof m.write=="undefined"?m.push(b):m.write(b.stack+`

`),B())}function B(b){if(b||y--,w++,p===w&&y===0&&i!==void 0)return i(m||null)}}});var Fh=j(($L,Rh)=>{"use strict";Rh.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var _h=j((jL,kh)=>{var NL=kh.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var $h=j((pr,Th)=>{var ML=Fh(),PC=_h();function Lh(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function Dh(t,e,r){var n,i=!1,s;function o(){s||(s=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?o():t(n=!0,o))}function c(u){l(),n||t(n=u,o)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){PC(function(u){t(null,function(f,d){if(n=n||f,f===!0)return e._isStdio?o():e.end();if(n=n||f)return Lh(e),o(n);if(e._isStdio)e.write(d,function(){u()});else{var h=e.write(d);h===!1?e.once("drain",u):u()}})})})}function IC(t){var e=!1,r=!1,n;function i(){var s=t.read();if(s!==null&&n){var o=n;n=null,o(null,s)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(s){e=s,n&&n(e)}),function(s,o){n=o,e?o(e):r&&i()}}function Po(t){var e=[],r=[],n,i=!1,s;function o(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,o()}),t.on("close",function(){n=!0,o()}),t.on("error",function(a){n=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),Lh(t)}else r.push(c),o()}}var OC=Po,Io=function(t,e){return function(r){return Dh(r,t,e)}},Oo=function(t){return Po(t)};pr=Th.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return Dh(r,t,e),Po(t)}:Io(t,e):Oo(t)};pr.sink=Io;pr.source=Oo;pr.read=OC;pr.read1=Po;pr.read2=IC;pr.duplex=function(t,e){return{source:Oo(t),sink:Io(t,e)}};pr.transform=function(t){return function(e){var r=Oo(t);return Io(t)(e),r}}});var im=j(Nl=>{Nl.quote=function(t){return t.map(function(e){return e&&typeof e=="object"?e.op.replace(/(.)/g,"\\$1"):/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@\[\\\]^`{|}])/g,"$1\\$2")}).join(" ")};var Tl="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",nm="|&;()<> \\t",xS=`(\\\\['"`+nm+`]|[^\\s'"`+nm+"])+",SS='"((\\\\"|[^"])*?)"',PS="'((\\\\'|[^'])*?)'",wn="";for($l=0;$l<4;$l++)wn+=(Math.pow(16,8)*Math.random()).toString(16);var $l;Nl.parse=function(t,e,r){var n=IS(t,e,r);return typeof e!="function"?n:n.reduce(function(i,s){if(typeof s=="object")return i.concat(s);var o=s.split(RegExp("("+wn+".*?"+wn+")","g"));return o.length===1?i.concat(o[0]):i.concat(o.filter(Boolean).map(function(a){return RegExp("^"+wn).test(a)?JSON.parse(a.split(wn)[1]):a}))},[])};function IS(t,e,r){var n=new RegExp(["("+Tl+")","("+xS+"|"+SS+"|"+PS+")*"].join("|"),"g"),i=t.match(n).filter(Boolean),s=!1;if(!i)return[];return e||(e={}),r||(r={}),i.map(function(a,c){if(s)return;if(RegExp("^"+Tl+"$").test(a))return{op:a};for(var l="'",u='"',f="$",d=r.escape||"\\",h=!1,m=!1,p="",w=!1,y=0,v=a.length;y<v;y++){var C=a.charAt(y);if(w=w||!h&&(C==="*"||C==="?"),m)p+=C,m=!1;else if(h)C===h?h=!1:h==l?p+=C:C===d?(y+=1,C=a.charAt(y),C===u||C===d||C===f?p+=C:p+=d+C):C===f?p+=A():p+=C;else if(C===u||C===l)h=C;else{if(RegExp("^"+Tl+"$").test(C))return{op:a};if(RegExp("^#$").test(C))return s=!0,p.length?[p,{comment:a.slice(y+1)+i.slice(c+1).join(" ")}]:[{comment:a.slice(y+1)+i.slice(c+1).join(" ")}];C===d?m=!0:C===f?p+=A():p+=C}}if(w)return{op:"glob",pattern:p};return p;function A(){y+=1;var k,T;if(a.charAt(y)==="{"){if(y+=1,a.charAt(y)==="}")throw new Error("Bad substitution: "+a.substr(y-2,3));if(k=a.indexOf("}",y),k<0)throw new Error("Bad substitution: "+a.substr(y));T=a.substr(y,k-y),y=k}else/[*@#?$!_\-]/.test(a.charAt(y))?(T=a.charAt(y),y+=1):(k=a.substr(y).match(/[^\w\d_]/),k?(T=a.substr(y,k.index),y+=k.index-1):(T=a.substr(y),y=a.length));return o(null,"",T)}}).reduce(function(a,c){return c===void 0?a:a.concat(c)},[]);function o(a,c,l){var u=typeof e=="function"?e(l):e[l];return u===void 0&&l!=""?u="":u===void 0&&(u="$"),typeof u=="object"?c+wn+JSON.stringify(u)+wn:c+u}}});var hi=j((AT,wm)=>{"use strict";var gm=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);wm.exports=t=>t?Object.keys(t).map(e=>[gm.has(e)?gm.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var vm=j((RT,ym)=>{"use strict";ym.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var ws=j((FT,bm)=>{"use strict";bm.exports=pe;pe.Node=xn;pe.create=pe;function pe(t){var e=this;if(e instanceof pe||(e=new pe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}pe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};pe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};pe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};pe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)_S(this,arguments[t]);return this.length};pe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)LS(this,arguments[t]);return this.length};pe.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};pe.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};pe.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};pe.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};pe.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};pe.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};pe.prototype.map=function(t,e){e=e||this;for(var r=new pe,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};pe.prototype.mapReverse=function(t,e){e=e||this;for(var r=new pe,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};pe.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};pe.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};pe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};pe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};pe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new pe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};pe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new pe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};pe.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=kS(this,i,r[n]);return s};pe.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function kS(t,e,r){var n=e===t.head?new xn(r,null,e,t):new xn(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function _S(t,e){t.tail=new xn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function LS(t,e){t.head=new xn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function xn(t,e,r,n){if(!(this instanceof xn))return new xn(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{vm()(pe)}catch{}});var pi=j((kT,Rm)=>{"use strict";var DS=require("events"),Em=require("stream"),ys=ws(),Cm=require("string_decoder").StringDecoder,vr=Symbol("EOF"),vs=Symbol("maybeEmitEnd"),Nr=Symbol("emittedEnd"),Jo=Symbol("emittingEnd"),Xo=Symbol("closed"),xm=Symbol("read"),Ul=Symbol("flush"),Sm=Symbol("flushChunk"),dt=Symbol("encoding"),br=Symbol("decoder"),Zo=Symbol("flowing"),bs=Symbol("paused"),Es=Symbol("resume"),it=Symbol("bufferLength"),Pm=Symbol("bufferPush"),Bl=Symbol("bufferShift"),Je=Symbol("objectMode"),Xe=Symbol("destroyed"),Im=global._MP_NO_ITERATOR_SYMBOLS_!=="1",TS=Im&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),$S=Im&&Symbol.iterator||Symbol("iterator not implemented"),Om=t=>t==="end"||t==="finish"||t==="prefinish",NS=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,jS=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);Rm.exports=class Am extends Em{constructor(e){super();this[Zo]=!1,this[bs]=!1,this.pipes=new ys,this.buffer=new ys,this[Je]=e&&e.objectMode||!1,this[Je]?this[dt]=null:this[dt]=e&&e.encoding||null,this[dt]==="buffer"&&(this[dt]=null),this[br]=this[dt]?new Cm(this[dt]):null,this[vr]=!1,this[Nr]=!1,this[Jo]=!1,this[Xo]=!1,this.writable=!0,this.readable=!0,this[it]=0,this[Xe]=!1}get bufferLength(){return this[it]}get encoding(){return this[dt]}set encoding(e){if(this[Je])throw new Error("cannot set encoding in objectMode");if(this[dt]&&e!==this[dt]&&(this[br]&&this[br].lastNeed||this[it]))throw new Error("cannot change encoding");this[dt]!==e&&(this[br]=e?new Cm(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[br].write(r)))),this[dt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Je]}set objectMode(e){this[Je]=this[Je]||!!e}write(e,r,n){if(this[vr])throw new Error("write after end");return this[Xe]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Je]&&!Buffer.isBuffer(e)&&(jS(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):NS(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[it]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[Je]&&!(r===this[dt]&&!this[br].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[dt]&&(e=this[br].write(e)),this.flowing?(this[it]!==0&&this[Ul](!0),this.emit("data",e)):this[Pm](e),this[it]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Xe])return null;try{return this[it]===0||e===0||e>this[it]?null:(this[Je]&&(e=null),this.buffer.length>1&&!this[Je]&&(this.encoding?this.buffer=new ys([Array.from(this.buffer).join("")]):this.buffer=new ys([Buffer.concat(Array.from(this.buffer),this[it])])),this[xm](e||null,this.buffer.head.value))}finally{this[vs]()}}[xm](e,r){return e===r.length||e===null?this[Bl]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[it]-=e),this.emit("data",r),!this.buffer.length&&!this[vr]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[vr]=!0,this.writable=!1,(this.flowing||!this[bs])&&this[vs](),this}[Es](){this[Xe]||(this[bs]=!1,this[Zo]=!0,this.emit("resume"),this.buffer.length?this[Ul]():this[vr]?this[vs]():this.emit("drain"))}resume(){return this[Es]()}pause(){this[Zo]=!1,this[bs]=!0}get destroyed(){return this[Xe]}get flowing(){return this[Zo]}get paused(){return this[bs]}[Pm](e){return this[Je]?this[it]+=1:this[it]+=e.length,this.buffer.push(e)}[Bl](){return this.buffer.length&&(this[Je]?this[it]-=1:this[it]-=this.buffer.head.value.length),this.buffer.shift()}[Ul](e){do;while(this[Sm](this[Bl]()));!e&&!this.buffer.length&&!this[vr]&&this.emit("drain")}[Sm](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Xe])return;let n=this[Nr];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:s=>this[Es]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[Es](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Es]():Om(e)&&this[Nr]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Nr]}[vs](){!this[Jo]&&!this[Nr]&&!this[Xe]&&this.buffer.length===0&&this[vr]&&(this[Jo]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Xo]&&this.emit("close"),this[Jo]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Xe&&this[Xe])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Nr]===!0)return;this[Nr]=!0,this.readable=!1,this[br]&&(r=this[br].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[Xo]=!0,!this[Nr]&&!this[Xe]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{Om(e)?this.removeAllListeners(e):this[vs]()}}collect(){let e=[];this[Je]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Je]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Je]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Je]?Promise.reject(new Error("cannot concat in objectMode")):this[dt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Xe,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[TS](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[vr])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[vr]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Xe,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[$S](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Xe]?(e?this.emit("error",e):this.emit(Xe),this):(this[Xe]=!0,this.buffer=new ys,this[it]=0,typeof this.close=="function"&&!this[Xo]&&this.close(),e?this.emit("error",e):this.emit(Xe),this)}static isStream(e){return!!e&&(e instanceof Am||e instanceof Em||e instanceof DS&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var km=j((_T,Fm)=>{var MS=require("zlib").constants||{ZLIB_VERNUM:4736};Fm.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},MS))});var Jl=j(Ct=>{"use strict";var ql=require("assert"),jr=require("buffer").Buffer,_m=require("zlib"),Sn=Ct.constants=km(),US=pi(),Lm=jr.concat,Pn=Symbol("_superWrite"),Cs=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},BS=Symbol("opts"),xs=Symbol("flushFlag"),Dm=Symbol("finishFlushFlag"),Hl=Symbol("fullFlushFlag"),Ee=Symbol("handle"),Qo=Symbol("onError"),mi=Symbol("sawError"),zl=Symbol("level"),Wl=Symbol("strategy"),Gl=Symbol("ended"),LT=Symbol("_defaultFullFlush"),Vl=class extends US{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[mi]=!1,this[Gl]=!1,this[BS]=e,this[xs]=e.flush,this[Dm]=e.finishFlush;try{this[Ee]=new _m[r](e)}catch(n){throw new Cs(n)}this[Qo]=n=>{this[mi]||(this[mi]=!0,this.close(),this.emit("error",n))},this[Ee].on("error",n=>this[Qo](new Cs(n))),this.once("end",()=>this.close)}close(){this[Ee]&&(this[Ee].close(),this[Ee]=null,this.emit("close"))}reset(){if(!this[mi])return ql(this[Ee],"zlib binding closed"),this[Ee].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Hl]),this.write(Object.assign(jr.alloc(0),{[xs]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[Dm]),this[Gl]=!0,super.end(null,null,n)}get ended(){return this[Gl]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=jr.from(e,r)),this[mi])return;ql(this[Ee],"zlib binding closed");let i=this[Ee]._handle,s=i.close;i.close=()=>{};let o=this[Ee].close;this[Ee].close=()=>{},jr.concat=l=>l;let a;try{let l=typeof e[xs]=="number"?e[xs]:this[xs];a=this[Ee]._processChunk(e,l),jr.concat=Lm}catch(l){jr.concat=Lm,this[Qo](new Cs(l))}finally{this[Ee]&&(this[Ee]._handle=i,i.close=s,this[Ee].close=o,this[Ee].removeAllListeners("error"))}this[Ee]&&this[Ee].on("error",l=>this[Qo](new Cs(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Pn](jr.from(a[0]));for(let l=1;l<a.length;l++)c=this[Pn](a[l])}else c=this[Pn](jr.from(a));return n&&n(),c}[Pn](e){return super.write(e)}},Mr=class extends Vl{constructor(e,r){e=e||{},e.flush=e.flush||Sn.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Sn.Z_FINISH;super(e,r);this[Hl]=Sn.Z_FULL_FLUSH,this[zl]=e.level,this[Wl]=e.strategy}params(e,r){if(!this[mi]){if(!this[Ee])throw new Error("cannot switch params when binding is closed");if(!this[Ee].params)throw new Error("not supported in this implementation");if(this[zl]!==e||this[Wl]!==r){this.flush(Sn.Z_SYNC_FLUSH),ql(this[Ee],"zlib binding closed");let n=this[Ee].flush;this[Ee].flush=(i,s)=>{this.flush(i),s()};try{this[Ee].params(e,r)}finally{this[Ee].flush=n}this[Ee]&&(this[zl]=e,this[Wl]=r)}}}},Tm=class extends Mr{constructor(e){super(e,"Deflate")}},$m=class extends Mr{constructor(e){super(e,"Inflate")}},Yl=Symbol("_portable"),Nm=class extends Mr{constructor(e){super(e,"Gzip");this[Yl]=e&&!!e.portable}[Pn](e){return this[Yl]?(this[Yl]=!1,e[9]=255,super[Pn](e)):super[Pn](e)}},jm=class extends Mr{constructor(e){super(e,"Gunzip")}},Mm=class extends Mr{constructor(e){super(e,"DeflateRaw")}},Um=class extends Mr{constructor(e){super(e,"InflateRaw")}},Bm=class extends Mr{constructor(e){super(e,"Unzip")}},Kl=class extends Vl{constructor(e,r){e=e||{},e.flush=e.flush||Sn.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Sn.BROTLI_OPERATION_FINISH;super(e,r);this[Hl]=Sn.BROTLI_OPERATION_FLUSH}},qm=class extends Kl{constructor(e){super(e,"BrotliCompress")}},Hm=class extends Kl{constructor(e){super(e,"BrotliDecompress")}};Ct.Deflate=Tm;Ct.Inflate=$m;Ct.Gzip=Nm;Ct.Gunzip=jm;Ct.DeflateRaw=Mm;Ct.InflateRaw=Um;Ct.Unzip=Bm;typeof _m.BrotliCompress=="function"?(Ct.BrotliCompress=qm,Ct.BrotliDecompress=Hm):Ct.BrotliCompress=Ct.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var gi=j((TT,zm)=>{var qS=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;zm.exports=qS!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var ea=j((NT,Wm)=>{"use strict";var HS=pi(),Xl=gi(),Zl=Symbol("slurp");Wm.exports=class extends HS{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Xl(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Xl(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Zl](r),n&&this[Zl](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Zl](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Xl(e[n]):e[n])}}});var Ql=j(ta=>{"use strict";ta.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);ta.code=new Map(Array.from(ta.name).map(t=>[t[1],t[0]]))});var Km=j((MT,Ym)=>{"use strict";var zS=(t,e)=>{if(Number.isSafeInteger(t))t<0?GS(t,e):WS(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},WS=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},GS=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=Gm(i):i===0?e[n-1]=0:(r=!0,e[n-1]=Vm(i))}},VS=t=>{let e=t[0],r=e===128?KS(t.slice(1,t.length)):e===255?YS(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},YS=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var s=t[i],o;n?o=Gm(s):s===0?o=s:(n=!0,o=Vm(s)),o!==0&&(r-=o*Math.pow(256,e-i-1))}return r},KS=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},Gm=t=>(255^t)&255,Vm=t=>(255^t)+1&255;Ym.exports={encode:zS,parse:VS}});var yi=j((UT,Zm)=>{"use strict";var eu=Ql(),wi=require("path").posix,Jm=Km(),tu=Symbol("slurp"),xt=Symbol("type"),Xm=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[xt]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=In(e,r,100),this.mode=Ur(e,r+100,8),this.uid=Ur(e,r+108,8),this.gid=Ur(e,r+116,8),this.size=Ur(e,r+124,12),this.mtime=ru(e,r+136,12),this.cksum=Ur(e,r+148,12),this[tu](n),this[tu](i,!0),this[xt]=In(e,r+156,1),this[xt]===""&&(this[xt]="0"),this[xt]==="0"&&this.path.substr(-1)==="/"&&(this[xt]="5"),this[xt]==="5"&&(this.size=0),this.linkpath=In(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=In(e,r+265,32),this.gname=In(e,r+297,32),this.devmaj=Ur(e,r+329,8),this.devmin=Ur(e,r+337,8),e[r+475]!==0){let o=In(e,r+345,155);this.path=o+"/"+this.path}else{let o=In(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=ru(e,r+476,12),this.ctime=ru(e,r+488,12)}let s=8*32;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[tu](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=JS(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=On(e,r,100,s)||this.needPax,this.needPax=Br(e,r+100,8,this.mode)||this.needPax,this.needPax=Br(e,r+108,8,this.uid)||this.needPax,this.needPax=Br(e,r+116,8,this.gid)||this.needPax,this.needPax=Br(e,r+124,12,this.size)||this.needPax,this.needPax=nu(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[xt].charCodeAt(0),this.needPax=On(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=On(e,r+265,32,this.uname)||this.needPax,this.needPax=On(e,r+297,32,this.gname)||this.needPax,this.needPax=Br(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Br(e,r+337,8,this.devmin)||this.needPax,this.needPax=On(e,r+345,n,o)||this.needPax,e[r+475]!==0?this.needPax=On(e,r+345,155,o)||this.needPax:(this.needPax=On(e,r+345,130,o)||this.needPax,this.needPax=nu(e,r+476,12,this.atime)||this.needPax,this.needPax=nu(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,Br(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return eu.name.get(this[xt])||this[xt]}get typeKey(){return this[xt]}set type(e){eu.code.has(e)?this[xt]=eu.code.get(e):this[xt]=e}},JS=(t,e)=>{let r=100,n=t,i="",s,o=wi.parse(t).root||".";if(Buffer.byteLength(n)<r)s=[n,i,!1];else{i=wi.dirname(n),n=wi.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?s=[n.substr(0,r-1),i,!0]:(n=wi.join(wi.basename(i),n),i=wi.dirname(i));while(i!==o&&!s);s||(s=[t.substr(0,r-1),"",!0])}return s},In=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),ru=(t,e,r)=>XS(Ur(t,e,r)),XS=t=>t===null?null:new Date(t*1e3),Ur=(t,e,r)=>t[e]&128?Jm.parse(t.slice(e,e+r)):QS(t,e,r),ZS=t=>isNaN(t)?null:t,QS=(t,e,r)=>ZS(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),eP={12:8589934591,8:2097151},Br=(t,e,r,n)=>n===null?!1:n>eP[r]||n<0?(Jm.encode(n,t.slice(e,e+r)),!0):(tP(t,e,r,n),!1),tP=(t,e,r,n)=>t.write(rP(n,r),e,r,"ascii"),rP=(t,e)=>nP(Math.floor(t).toString(8),e),nP=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",nu=(t,e,r,n)=>n===null?!1:Br(t,e,r,n.getTime()/1e3),iP=new Array(156).join("\0"),On=(t,e,r,n)=>n===null?!1:(t.write(n+iP,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);Zm.exports=Xm});var na=j((BT,Qm)=>{"use strict";var sP=yi(),oP=require("path"),ra=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new sP({path:("PaxHeader/"+oP.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let s=r+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};ra.parse=(t,e,r)=>new ra(aP(cP(t),e),r);var aP=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,cP=t=>t.replace(/\n$/,"").split(`
`).reduce(lP,Object.create(null)),lP=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let s=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};Qm.exports=ra});var vi=j((qT,eg)=>{eg.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var ia=j((HT,tg)=>{"use strict";tg.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var su=j((zT,rg)=>{"use strict";var sa=["|","<",">","?",":"],iu=sa.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),uP=new Map(sa.map((t,e)=>[t,iu[e]])),fP=new Map(iu.map((t,e)=>[t,sa[e]]));rg.exports={encode:t=>sa.reduce((e,r)=>e.split(r).join(uP.get(r)),t),decode:t=>iu.reduce((e,r)=>e.split(r).join(fP.get(r)),t)}});var ou=j((WT,ig)=>{var{isAbsolute:dP,parse:ng}=require("path").win32;ig.exports=t=>{let e="",r=ng(t);for(;dP(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=ng(t)}return[e,t]}});var og=j((GT,sg)=>{"use strict";sg.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var mu=j((KT,Eg)=>{"use strict";var ag=pi(),cg=na(),lg=yi(),or=require("fs"),ug=require("path"),ar=gi(),hP=vi(),fg=(t,e)=>e?(t=ar(t).replace(/^\.(\/|$)/,""),hP(e)+"/"+t):ar(t),pP=16*1024*1024,dg=Symbol("process"),hg=Symbol("file"),pg=Symbol("directory"),au=Symbol("symlink"),mg=Symbol("hardlink"),Ss=Symbol("header"),oa=Symbol("read"),cu=Symbol("lstat"),aa=Symbol("onlstat"),lu=Symbol("onread"),uu=Symbol("onreadlink"),fu=Symbol("openfile"),du=Symbol("onopenfile"),qr=Symbol("close"),ca=Symbol("mode"),hu=Symbol("awaitDrain"),pu=Symbol("ondrain"),cr=Symbol("prefix"),gg=Symbol("hadError"),wg=ia(),mP=su(),yg=ou(),vg=og(),la=wg(class extends ag{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=ar(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||pP,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=ar(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?ar(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=yg(this.path);i&&(this.path=s,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=mP.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=ar(r.absolute||ug.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[aa](this.statCache.get(this.absolute)):this[cu]()}emit(e,...r){return e==="error"&&(this[gg]=!0),super.emit(e,...r)}[cu](){or.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[aa](r)})}[aa](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=wP(e),this.emit("stat",e),this[dg]()}[dg](){switch(this.type){case"File":return this[hg]();case"Directory":return this[pg]();case"SymbolicLink":return this[au]();default:return this.end()}}[ca](e){return vg(e,this.type==="Directory",this.portable)}[cr](e){return fg(e,this.prefix)}[Ss](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new lg({path:this[cr](this.path),linkpath:this.type==="Link"?this[cr](this.linkpath):this.linkpath,mode:this[ca](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new cg({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[cr](this.path),linkpath:this.type==="Link"?this[cr](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[pg](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Ss](),this.end()}[au](){or.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[uu](r)})}[uu](e){this.linkpath=ar(e),this[Ss](),this.end()}[mg](e){this.type="Link",this.linkpath=ar(ug.relative(this.cwd,e)),this.stat.size=0,this[Ss](),this.end()}[hg](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[mg](r)}this.linkCache.set(e,this.absolute)}if(this[Ss](),this.stat.size===0)return this.end();this[fu]()}[fu](){or.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[du](r)})}[du](e){if(this.fd=e,this[gg])return this[qr]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[oa]()}[oa](){let{fd:e,buf:r,offset:n,length:i,pos:s}=this;or.read(e,r,n,i,s,(o,a)=>{if(o)return this[qr](()=>this.emit("error",o));this[lu](a)})}[qr](e){or.close(this.fd,e)}[lu](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[qr](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[qr](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[pu]():this[hu](()=>this[pu]())}[hu](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[pu](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[qr](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[oa]()}}),bg=class extends la{[cu](){this[aa](or.lstatSync(this.absolute))}[au](){this[uu](or.readlinkSync(this.absolute))}[fu](){this[du](or.openSync(this.absolute,"r"))}[oa](){let e=!0;try{let{fd:r,buf:n,offset:i,length:s,pos:o}=this,a=or.readSync(r,n,i,s,o);this[lu](a),e=!1}finally{if(e)try{this[qr](()=>{})}catch{}}}[hu](e){e()}[qr](e){or.closeSync(this.fd),e()}},gP=wg(class extends ag{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=ar(e.path),this.mode=this[ca](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=ar(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=yg(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new lg({path:this[cr](this.path),linkpath:this.type==="Link"?this[cr](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new cg({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[cr](this.path),linkpath:this.type==="Link"?this[cr](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[cr](e){return fg(e,this.prefix)}[ca](e){return vg(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});la.Sync=bg;la.Tar=gP;var wP=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";Eg.exports=la});var wa=j((XT,Rg)=>{"use strict";var gu=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},yP=pi(),vP=Jl(),bP=ea(),wu=mu(),EP=wu.Sync,CP=wu.Tar,xP=ws(),Cg=Buffer.alloc(1024),ua=Symbol("onStat"),fa=Symbol("ended"),lr=Symbol("queue"),bi=Symbol("current"),An=Symbol("process"),da=Symbol("processing"),xg=Symbol("processJob"),ur=Symbol("jobs"),yu=Symbol("jobDone"),ha=Symbol("addFSEntry"),Sg=Symbol("addTarEntry"),vu=Symbol("stat"),bu=Symbol("readdir"),pa=Symbol("onreaddir"),ma=Symbol("pipe"),Pg=Symbol("entry"),Eu=Symbol("entryOpt"),Cu=Symbol("writeEntryClass"),Ig=Symbol("write"),xu=Symbol("ondrain"),ga=require("fs"),Og=require("path"),SP=ia(),Su=gi(),Pu=SP(class extends yP{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Su(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Cu]=wu,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new vP.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[xu]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[xu]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[lr]=new xP,this[ur]=0,this.jobs=+e.jobs||4,this[da]=!1,this[fa]=!1}[Ig](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[fa]=!0,this[An](),this}write(e){if(this[fa])throw new Error("write after end");return e instanceof bP?this[Sg](e):this[ha](e),this.flowing}[Sg](e){let r=Su(Og.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new gu(e.path,r,!1);n.entry=new CP(e,this[Eu](n)),n.entry.on("end",i=>this[yu](n)),this[ur]+=1,this[lr].push(n)}this[An]()}[ha](e){let r=Su(Og.resolve(this.cwd,e));this[lr].push(new gu(e,r)),this[An]()}[vu](e){e.pending=!0,this[ur]+=1;let r=this.follow?"stat":"lstat";ga[r](e.absolute,(n,i)=>{e.pending=!1,this[ur]-=1,n?this.emit("error",n):this[ua](e,i)})}[ua](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[An]()}[bu](e){e.pending=!0,this[ur]+=1,ga.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[ur]-=1,r)return this.emit("error",r);this[pa](e,n)})}[pa](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[An]()}[An](){if(!this[da]){this[da]=!0;for(let e=this[lr].head;e!==null&&this[ur]<this.jobs;e=e.next)if(this[xg](e.value),e.value.ignore){let r=e.next;this[lr].removeNode(e),e.next=r}this[da]=!1,this[fa]&&!this[lr].length&&this[ur]===0&&(this.zip?this.zip.end(Cg):(super.write(Cg),super.end()))}}get[bi](){return this[lr]&&this[lr].head&&this[lr].head.value}[yu](e){this[lr].shift(),this[ur]-=1,this[An]()}[xg](e){if(!e.pending){if(e.entry){e===this[bi]&&!e.piped&&this[ma](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[ua](e,this.statCache.get(e.absolute)):this[vu](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[pa](e,this.readdirCache.get(e.absolute)):this[bu](e),!e.readdir))){if(e.entry=this[Pg](e),!e.entry){e.ignore=!0;return}e===this[bi]&&!e.piped&&this[ma](e)}}}[Eu](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Pg](e){this[ur]+=1;try{return new this[Cu](e.path,this[Eu](e)).on("end",()=>this[yu](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[xu](){this[bi]&&this[bi].entry&&this[bi].entry.resume()}[ma](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[ha](o+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Ag=class extends Pu{constructor(e){super(e);this[Cu]=EP}pause(){}resume(){}[vu](e){let r=this.follow?"statSync":"lstatSync";this[ua](e,ga[r](e.absolute))}[bu](e,r){this[pa](e,ga.readdirSync(e.absolute))}[ma](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[ha](o+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[Ig](i)})}};Pu.Sync=Ag;Rg.exports=Pu});var Ai=j(Is=>{"use strict";var PP=pi(),IP=require("events").EventEmitter,ht=require("fs"),Iu=ht.writev;if(!Iu){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Iu=(r,n,i,s)=>{let o=(c,l)=>s(c,l,n),a=new e;a.oncomplete=o,t.writeBuffers(r,n,i,a)}}var Ei=Symbol("_autoClose"),Jt=Symbol("_close"),Ps=Symbol("_ended"),ye=Symbol("_fd"),Fg=Symbol("_finished"),Hr=Symbol("_flags"),Ou=Symbol("_flush"),Au=Symbol("_handleChunk"),Ru=Symbol("_makeBuf"),ya=Symbol("_mode"),va=Symbol("_needDrain"),Ci=Symbol("_onerror"),xi=Symbol("_onopen"),Fu=Symbol("_onread"),Si=Symbol("_onwrite"),zr=Symbol("_open"),Er=Symbol("_path"),Rn=Symbol("_pos"),fr=Symbol("_queue"),Pi=Symbol("_read"),kg=Symbol("_readSize"),Wr=Symbol("_reading"),ba=Symbol("_remain"),_g=Symbol("_size"),Ea=Symbol("_write"),Ii=Symbol("_writing"),Ca=Symbol("_defaultFlag"),Oi=Symbol("_errored"),ku=class extends PP{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Oi]=!1,this[ye]=typeof r.fd=="number"?r.fd:null,this[Er]=e,this[kg]=r.readSize||16*1024*1024,this[Wr]=!1,this[_g]=typeof r.size=="number"?r.size:1/0,this[ba]=this[_g],this[Ei]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[ye]=="number"?this[Pi]():this[zr]()}get fd(){return this[ye]}get path(){return this[Er]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[zr](){ht.open(this[Er],"r",(e,r)=>this[xi](e,r))}[xi](e,r){e?this[Ci](e):(this[ye]=r,this.emit("open",r),this[Pi]())}[Ru](){return Buffer.allocUnsafe(Math.min(this[kg],this[ba]))}[Pi](){if(!this[Wr]){this[Wr]=!0;let e=this[Ru]();if(e.length===0)return process.nextTick(()=>this[Fu](null,0,e));ht.read(this[ye],e,0,e.length,null,(r,n,i)=>this[Fu](r,n,i))}}[Fu](e,r,n){this[Wr]=!1,e?this[Ci](e):this[Au](r,n)&&this[Pi]()}[Jt](){if(this[Ei]&&typeof this[ye]=="number"){let e=this[ye];this[ye]=null,ht.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Ci](e){this[Wr]=!0,this[Jt](),this.emit("error",e)}[Au](e,r){let n=!1;return this[ba]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[ba]<=0)&&(n=!1,this[Jt](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[ye]=="number"&&this[Pi]();break;case"error":return this[Oi]?void 0:(this[Oi]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Lg=class extends ku{[zr](){let e=!0;try{this[xi](null,ht.openSync(this[Er],"r")),e=!1}finally{e&&this[Jt]()}}[Pi](){let e=!0;try{if(!this[Wr]){this[Wr]=!0;do{let r=this[Ru](),n=r.length===0?0:ht.readSync(this[ye],r,0,r.length,null);if(!this[Au](n,r))break}while(!0);this[Wr]=!1}e=!1}finally{e&&this[Jt]()}}[Jt](){if(this[Ei]&&typeof this[ye]=="number"){let e=this[ye];this[ye]=null,ht.closeSync(e),this.emit("close")}}},_u=class extends IP{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Oi]=!1,this[Ii]=!1,this[Ps]=!1,this[va]=!1,this[fr]=[],this[Er]=e,this[ye]=typeof r.fd=="number"?r.fd:null,this[ya]=r.mode===void 0?438:r.mode,this[Rn]=typeof r.start=="number"?r.start:null,this[Ei]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Rn]!==null?"r+":"w";this[Ca]=r.flags===void 0,this[Hr]=this[Ca]?n:r.flags,this[ye]===null&&this[zr]()}emit(e,r){if(e==="error"){if(this[Oi])return;this[Oi]=!0}return super.emit(e,r)}get fd(){return this[ye]}get path(){return this[Er]}[Ci](e){this[Jt](),this[Ii]=!0,this.emit("error",e)}[zr](){ht.open(this[Er],this[Hr],this[ya],(e,r)=>this[xi](e,r))}[xi](e,r){this[Ca]&&this[Hr]==="r+"&&e&&e.code==="ENOENT"?(this[Hr]="w",this[zr]()):e?this[Ci](e):(this[ye]=r,this.emit("open",r),this[Ou]())}end(e,r){return e&&this.write(e,r),this[Ps]=!0,!this[Ii]&&!this[fr].length&&typeof this[ye]=="number"&&this[Si](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Ps]?(this.emit("error",new Error("write() after end()")),!1):this[ye]===null||this[Ii]||this[fr].length?(this[fr].push(e),this[va]=!0,!1):(this[Ii]=!0,this[Ea](e),!0)}[Ea](e){ht.write(this[ye],e,0,e.length,this[Rn],(r,n)=>this[Si](r,n))}[Si](e,r){e?this[Ci](e):(this[Rn]!==null&&(this[Rn]+=r),this[fr].length?this[Ou]():(this[Ii]=!1,this[Ps]&&!this[Fg]?(this[Fg]=!0,this[Jt](),this.emit("finish")):this[va]&&(this[va]=!1,this.emit("drain"))))}[Ou](){if(this[fr].length===0)this[Ps]&&this[Si](null,0);else if(this[fr].length===1)this[Ea](this[fr].pop());else{let e=this[fr];this[fr]=[],Iu(this[ye],e,this[Rn],(r,n)=>this[Si](r,n))}}[Jt](){if(this[Ei]&&typeof this[ye]=="number"){let e=this[ye];this[ye]=null,ht.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Dg=class extends _u{[zr](){let e;if(this[Ca]&&this[Hr]==="r+")try{e=ht.openSync(this[Er],this[Hr],this[ya])}catch(r){if(r.code==="ENOENT")return this[Hr]="w",this[zr]();throw r}else e=ht.openSync(this[Er],this[Hr],this[ya]);this[xi](null,e)}[Jt](){if(this[Ei]&&typeof this[ye]=="number"){let e=this[ye];this[ye]=null,ht.closeSync(e),this.emit("close")}}[Ea](e){let r=!0;try{this[Si](null,ht.writeSync(this[ye],e,0,e.length,this[Rn])),r=!1}finally{if(r)try{this[Jt]()}catch{}}}};Is.ReadStream=ku;Is.ReadStreamSync=Lg;Is.WriteStream=_u;Is.WriteStreamSync=Dg});var Ra=j((e2,Bg)=>{"use strict";var OP=ia(),AP=yi(),RP=require("events"),FP=ws(),kP=1024*1024,_P=ea(),Tg=na(),LP=Jl(),Lu=Buffer.from([31,139]),Tt=Symbol("state"),Fn=Symbol("writeEntry"),Cr=Symbol("readEntry"),Du=Symbol("nextEntry"),$g=Symbol("processEntry"),$t=Symbol("extendedHeader"),Os=Symbol("globalExtendedHeader"),Gr=Symbol("meta"),Ng=Symbol("emitMeta"),Ce=Symbol("buffer"),xr=Symbol("queue"),kn=Symbol("ended"),jg=Symbol("emittedEnd"),_n=Symbol("emit"),pt=Symbol("unzip"),xa=Symbol("consumeChunk"),Sa=Symbol("consumeChunkSub"),Tu=Symbol("consumeBody"),Mg=Symbol("consumeMeta"),Ug=Symbol("consumeHeader"),Pa=Symbol("consuming"),$u=Symbol("bufferConcat"),Nu=Symbol("maybeEnd"),As=Symbol("writing"),Vr=Symbol("aborted"),Ia=Symbol("onDone"),Ln=Symbol("sawValidEntry"),Oa=Symbol("sawNullBlock"),Aa=Symbol("sawEOF"),DP=t=>!0;Bg.exports=OP(class extends RP{constructor(e){e=e||{};super(e);this.file=e.file||"",this[Ln]=null,this.on(Ia,r=>{(this[Tt]==="begin"||this[Ln]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Ia,e.ondone):this.on(Ia,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||kP,this.filter=typeof e.filter=="function"?e.filter:DP,this.writable=!0,this.readable=!1,this[xr]=new FP,this[Ce]=null,this[Cr]=null,this[Fn]=null,this[Tt]="begin",this[Gr]="",this[$t]=null,this[Os]=null,this[kn]=!1,this[pt]=null,this[Vr]=!1,this[Oa]=!1,this[Aa]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Ug](e,r){this[Ln]===null&&(this[Ln]=!1);let n;try{n=new AP(e,r,this[$t],this[Os])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Oa]?(this[Aa]=!0,this[Tt]==="begin"&&(this[Tt]="header"),this[_n]("eof")):(this[Oa]=!0,this[_n]("nullBlock"));else if(this[Oa]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Fn]=new _P(n,this[$t],this[Os]);if(!this[Ln])if(s.remain){let o=()=>{s.invalid||(this[Ln]=!0)};s.on("end",o)}else this[Ln]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[_n]("ignoredEntry",s),this[Tt]="ignore",s.resume()):s.size>0&&(this[Gr]="",s.on("data",o=>this[Gr]+=o),this[Tt]="meta"):(this[$t]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[_n]("ignoredEntry",s),this[Tt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Tt]="body":(this[Tt]="header",s.end()),this[Cr]?this[xr].push(s):(this[xr].push(s),this[Du]())))}}}[$g](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Cr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Du]()),r=!1)):(this[Cr]=null,r=!1),r}[Du](){do;while(this[$g](this[xr].shift()));if(!this[xr].length){let e=this[Cr];!e||e.flowing||e.size===e.remain?this[As]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Tu](e,r){let n=this[Fn],i=n.blockRemain,s=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(s),n.blockRemain||(this[Tt]="header",this[Fn]=null,n.end()),s.length}[Mg](e,r){let n=this[Fn],i=this[Tu](e,r);return this[Fn]||this[Ng](n),i}[_n](e,r,n){!this[xr].length&&!this[Cr]?this.emit(e,r,n):this[xr].push([e,r,n])}[Ng](e){switch(this[_n]("meta",this[Gr]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[$t]=Tg.parse(this[Gr],this[$t],!1);break;case"GlobalExtendedHeader":this[Os]=Tg.parse(this[Gr],this[Os],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[$t]=this[$t]||Object.create(null),this[$t].path=this[Gr].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[$t]=this[$t]||Object.create(null),this[$t].linkpath=this[Gr].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Vr]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Vr])return;if(this[pt]===null&&e){if(this[Ce]&&(e=Buffer.concat([this[Ce],e]),this[Ce]=null),e.length<Lu.length)return this[Ce]=e,!0;for(let n=0;this[pt]===null&&n<Lu.length;n++)e[n]!==Lu[n]&&(this[pt]=!1);if(this[pt]===null){let n=this[kn];this[kn]=!1,this[pt]=new LP.Unzip,this[pt].on("data",s=>this[xa](s)),this[pt].on("error",s=>this.abort(s)),this[pt].on("end",s=>{this[kn]=!0,this[xa]()}),this[As]=!0;let i=this[pt][n?"end":"write"](e);return this[As]=!1,i}}this[As]=!0,this[pt]?this[pt].write(e):this[xa](e),this[As]=!1;let r=this[xr].length?!1:this[Cr]?this[Cr].flowing:!0;return!r&&!this[xr].length&&this[Cr].once("drain",n=>this.emit("drain")),r}[$u](e){e&&!this[Vr]&&(this[Ce]=this[Ce]?Buffer.concat([this[Ce],e]):e)}[Nu](){if(this[kn]&&!this[jg]&&!this[Vr]&&!this[Pa]){this[jg]=!0;let e=this[Fn];if(e&&e.blockRemain){let r=this[Ce]?this[Ce].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[Ce]&&e.write(this[Ce]),e.end()}this[_n](Ia)}}[xa](e){if(this[Pa])this[$u](e);else if(!e&&!this[Ce])this[Nu]();else{if(this[Pa]=!0,this[Ce]){this[$u](e);let r=this[Ce];this[Ce]=null,this[Sa](r)}else this[Sa](e);for(;this[Ce]&&this[Ce].length>=512&&!this[Vr]&&!this[Aa];){let r=this[Ce];this[Ce]=null,this[Sa](r)}this[Pa]=!1}(!this[Ce]||this[kn])&&this[Nu]()}[Sa](e){let r=0,n=e.length;for(;r+512<=n&&!this[Vr]&&!this[Aa];)switch(this[Tt]){case"begin":case"header":this[Ug](e,r),r+=512;break;case"ignore":case"body":r+=this[Tu](e,r);break;case"meta":r+=this[Mg](e,r);break;default:throw new Error("invalid state: "+this[Tt])}r<n&&(this[Ce]?this[Ce]=Buffer.concat([e.slice(r),this[Ce]]):this[Ce]=e.slice(r))}end(e){this[Vr]||(this[pt]?this[pt].end(e):(this[kn]=!0,this.write(e)))}})});var Fa=j((t2,Wg)=>{"use strict";var TP=hi(),qg=Ra(),Ri=require("fs"),$P=Ai(),Hg=require("path"),ju=vi();Wg.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=TP(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&jP(n,e),n.noResume||NP(n),n.file&&n.sync?MP(n):n.file?UP(n,r):zg(n)};var NP=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},jP=(t,e)=>{let r=new Map(e.map(s=>[ju(s),!0])),n=t.filter,i=(s,o)=>{let a=o||Hg.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(Hg.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(ju(s)):s=>i(ju(s))},MP=t=>{let e=zg(t),r=t.file,n=!0,i;try{let s=Ri.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(Ri.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(o);for(i=Ri.openSync(r,"r");a<s.size;){let l=Ri.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{Ri.closeSync(i)}catch{}}},UP=(t,e)=>{let r=new qg(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),Ri.stat(i,(c,l)=>{if(c)a(c);else{let u=new $P.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},zg=t=>new qg(t)});var Xg=j((r2,Jg)=>{"use strict";var BP=hi(),ka=wa(),Gg=Ai(),Vg=Fa(),Yg=require("path");Jg.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=BP(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?qP(n,e):n.file?HP(n,e,r):n.sync?zP(n,e):WP(n,e)};var qP=(t,e)=>{let r=new ka.Sync(t),n=new Gg.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Kg(r,e)},HP=(t,e,r)=>{let n=new ka(t),i=new Gg.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return Mu(n,e),r?s.then(r,r):s},Kg=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Vg({file:Yg.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Mu=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Vg({file:Yg.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Mu(t,e));t.add(r)}t.end()},zP=(t,e)=>{let r=new ka.Sync(t);return Kg(r,e),r},WP=(t,e)=>{let r=new ka(t);return Mu(r,e),r}});var Uu=j((n2,iw)=>{"use strict";var GP=hi(),Zg=wa(),St=require("fs"),Qg=Ai(),ew=Fa(),tw=require("path"),rw=yi();iw.exports=(t,e,r)=>{let n=GP(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?VP(n,e):KP(n,e,r)};var VP=(t,e)=>{let r=new Zg.Sync(t),n=!0,i,s;try{try{i=St.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=St.openSync(t.file,"w+");else throw c}let o=St.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=St.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new rw(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,YP(t,r,s,i,e)}finally{if(n)try{St.closeSync(i)}catch{}}},YP=(t,e,r,n,i)=>{let s=new Qg.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(s),JP(e,i)},KP=(t,e,r)=>{e=Array.from(e);let n=new Zg(t),i=(o,a,c)=>{let l=(m,p)=>{m?St.close(o,w=>c(m)):c(null,p)},u=0;if(a===0)return l(null,0);let f=0,d=Buffer.alloc(512),h=(m,p)=>{if(m)return l(m);if(f+=p,f<512&&p)return St.read(o,d,f,d.length-f,u+f,h);if(u===0&&d[0]===31&&d[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let w=new rw(d);if(!w.cksumValid)return l(null,u);let y=512*Math.ceil(w.size/512);if(u+y+512>a||(u+=y+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(w.path,w.mtime),f=0,St.read(o,d,0,512,u,h)};St.read(o,d,0,512,u,h)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",St.open(t.file,c,l);if(u)return a(u);St.fstat(f,(d,h)=>{if(d)return St.close(f,()=>a(d));i(f,h.size,(m,p)=>{if(m)return a(m);let w=new Qg.WriteStream(t.file,{fd:f,start:p});n.pipe(w),w.on("error",a),w.on("close",o),nw(n,e)})})};St.open(t.file,c,l)});return r?s.then(r,r):s},JP=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?ew({file:tw.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},nw=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return ew({file:tw.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>nw(t,e));t.add(r)}t.end()}});var ow=j((i2,sw)=>{"use strict";var XP=hi(),ZP=Uu();sw.exports=(t,e,r)=>{let n=XP(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),QP(n),ZP(n,e,r)};var QP=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var lw=j((s2,cw)=>{var{promisify:aw}=require("util"),Yr=require("fs"),eI=t=>{if(!t)t={mode:511,fs:Yr};else if(typeof t=="object")t=H({mode:511,fs:Yr},t);else if(typeof t=="number")t={mode:t,fs:Yr};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Yr};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Yr.mkdir,t.mkdirAsync=aw(t.mkdir),t.stat=t.stat||t.fs.stat||Yr.stat,t.statAsync=aw(t.stat),t.statSync=t.statSync||t.fs.statSync||Yr.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Yr.mkdirSync,t};cw.exports=eI});var fw=j((o2,uw)=>{var tI=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:rI,parse:nI}=require("path"),iI=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=rI(t),tI==="win32"){let e=/[*|"<>?:]/,{root:r}=nI(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};uw.exports=iI});var gw=j((a2,mw)=>{var{dirname:dw}=require("path"),hw=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?hw(t,dw(e),e):void 0),pw=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?pw(t,dw(e),e):void 0}};mw.exports={findMade:hw,findMadeSync:pw}});var Hu=j((c2,yw)=>{var{dirname:ww}=require("path"),Bu=(t,e,r)=>{e.recursive=!1;let n=ww(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return Bu(n,e).then(s=>Bu(t,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw i},()=>{throw i})})},qu=(t,e,r)=>{let n=ww(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return qu(t,e,qu(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};yw.exports={mkdirpManual:Bu,mkdirpManualSync:qu}});var Ew=j((l2,bw)=>{var{dirname:vw}=require("path"),{findMade:sI,findMadeSync:oI}=gw(),{mkdirpManual:aI,mkdirpManualSync:cI}=Hu(),lI=(t,e)=>(e.recursive=!0,vw(t)===t?e.mkdirAsync(t,e):sI(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return aI(t,e);throw i}))),uI=(t,e)=>{if(e.recursive=!0,vw(t)===t)return e.mkdirSync(t,e);let n=oI(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return cI(t,e);throw i}};bw.exports={mkdirpNative:lI,mkdirpNativeSync:uI}});var Pw=j((u2,Sw)=>{var Cw=require("fs"),fI=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,zu=fI.replace(/^v/,"").split("."),xw=+zu[0]>10||+zu[0]==10&&+zu[1]>=12,dI=xw?t=>t.mkdir===Cw.mkdir:()=>!1,hI=xw?t=>t.mkdirSync===Cw.mkdirSync:()=>!1;Sw.exports={useNative:dI,useNativeSync:hI}});var kw=j((f2,Fw)=>{var Fi=lw(),ki=fw(),{mkdirpNative:Iw,mkdirpNativeSync:Ow}=Ew(),{mkdirpManual:Aw,mkdirpManualSync:Rw}=Hu(),{useNative:pI,useNativeSync:mI}=Pw(),_i=(t,e)=>(t=ki(t),e=Fi(e),pI(e)?Iw(t,e):Aw(t,e)),gI=(t,e)=>(t=ki(t),e=Fi(e),mI(e)?Ow(t,e):Rw(t,e));_i.sync=gI;_i.native=(t,e)=>Iw(ki(t),Fi(e));_i.manual=(t,e)=>Aw(ki(t),Fi(e));_i.nativeSync=(t,e)=>Ow(ki(t),Fi(e));_i.manualSync=(t,e)=>Rw(ki(t),Fi(e));Fw.exports=_i});var jw=j((d2,Nw)=>{"use strict";var Nt=require("fs"),Dn=require("path"),wI=Nt.lchown?"lchown":"chown",yI=Nt.lchownSync?"lchownSync":"chownSync",_w=Nt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Lw=(t,e,r)=>{try{return Nt[yI](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},vI=(t,e,r)=>{try{return Nt.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},bI=_w?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Nt.chown(t,e,r,n)}:(t,e,r,n)=>n,Wu=_w?(t,e,r)=>{try{return Lw(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;vI(t,e,r)}}:(t,e,r)=>Lw(t,e,r),EI=process.version,Dw=(t,e,r)=>Nt.readdir(t,e,r),CI=(t,e)=>Nt.readdirSync(t,e);/^v4\./.test(EI)&&(Dw=(t,e,r)=>Nt.readdir(t,r));var _a=(t,e,r,n)=>{Nt[wI](t,e,r,bI(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},Tw=(t,e,r,n,i)=>{if(typeof e=="string")return Nt.lstat(Dn.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,Tw(t,o,r,n,i)});if(e.isDirectory())Gu(Dn.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=Dn.resolve(t,e.name);_a(o,r,n,i)});else{let s=Dn.resolve(t,e.name);_a(s,r,n,i)}},Gu=(t,e,r,n)=>{Dw(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return _a(t,e,r,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o==0)return _a(t,e,r,n)}};s.forEach(l=>Tw(t,l,e,r,c))})},xI=(t,e,r,n)=>{if(typeof e=="string")try{let i=Nt.lstatSync(Dn.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&$w(Dn.resolve(t,e.name),r,n),Wu(Dn.resolve(t,e.name),r,n)},$w=(t,e,r)=>{let n;try{n=CI(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Wu(t,e,r);throw i}return n&&n.length&&n.forEach(i=>xI(t,i,e,r)),Wu(t,e,r)};Nw.exports=Gu;Gu.sync=$w});var qw=j((h2,Ku)=>{"use strict";var Mw=kw(),jt=require("fs"),La=require("path"),Uw=jw(),Xt=gi(),Vu=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Yu=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},Da=(t,e)=>t.get(Xt(e)),Rs=(t,e,r)=>t.set(Xt(e),r),SI=(t,e)=>{jt.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Yu(t,r&&r.code||"ENOTDIR")),e(r)})};Ku.exports=(t,e,r)=>{t=Xt(t);let n=e.umask,i=e.mode|448,s=(i&n)!=0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,d=Xt(e.cwd),h=(w,y)=>{w?r(w):(Rs(f,t,!0),y&&c?Uw(y,o,a,v=>h(v)):s?jt.chmod(t,i,r):r())};if(f&&Da(f,t)===!0)return h();if(t===d)return SI(t,h);if(l)return Mw(t,{mode:i}).then(w=>h(null,w),h);let p=Xt(La.relative(d,t)).split("/");Ta(d,p,i,f,u,d,null,h)};var Ta=(t,e,r,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=Xt(La.resolve(t+"/"+c));if(Da(n,l))return Ta(l,e,r,n,i,s,o,a);jt.mkdir(l,r,Bw(l,e,r,n,i,s,o,a))},Bw=(t,e,r,n,i,s,o,a)=>c=>{c?jt.lstat(t,(l,u)=>{if(l)l.path=l.path&&Xt(l.path),a(l);else if(u.isDirectory())Ta(t,e,r,n,i,s,o,a);else if(i)jt.unlink(t,f=>{if(f)return a(f);jt.mkdir(t,r,Bw(t,e,r,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new Vu(t,t+"/"+e.join("/")));a(c)}}):(o=o||t,Ta(t,e,r,n,i,s,o,a))},PI=t=>{let e=!1,r="ENOTDIR";try{e=jt.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Yu(t,r)}};Ku.exports.sync=(t,e)=>{t=Xt(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=Xt(e.cwd),d=w=>{Rs(u,t,!0),w&&a&&Uw.sync(w,s,o),i&&jt.chmodSync(t,n)};if(u&&Da(u,t)===!0)return d();if(t===f)return PI(f),d();if(c)return d(Mw.sync(t,n));let m=Xt(La.relative(f,t)).split("/"),p=null;for(let w=m.shift(),y=f;w&&(y+="/"+w);w=m.shift())if(y=Xt(La.resolve(y)),!Da(u,y))try{jt.mkdirSync(y,n),p=p||y,Rs(u,y,!0)}catch{let C=jt.lstatSync(y);if(C.isDirectory()){Rs(u,y,!0);continue}else if(l){jt.unlinkSync(y),jt.mkdirSync(y,n),p=p||y,Rs(u,y,!0);continue}else if(C.isSymbolicLink())return new Vu(y,y+"/"+m.join("/"))}return d(p)}});var Xu=j((p2,Hw)=>{var Ju=Object.create(null),{hasOwnProperty:II}=Object.prototype;Hw.exports=t=>(II.call(Ju,t)||(Ju[t]=t.normalize("NFKD")),Ju[t])});var Vw=j((m2,Gw)=>{var zw=require("assert"),OI=Xu(),AI=vi(),{join:Ww}=require("path"),RI=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,FI=RI==="win32";Gw.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=Ww(f[f.length-1],d)),f.push(d||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(d=>d[0]===l)&&f.every(d=>d[0]instanceof Set&&d[0].has(l))},o=l=>n.has(l)||!s(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),d=new Set;return u.forEach(h=>{let m=t.get(h);zw.equal(m[0],l),m.length===1?t.delete(h):(m.shift(),typeof m[0]=="function"?d.add(m[0]):m[0].forEach(p=>d.add(p)))}),f.forEach(h=>{let m=t.get(h);zw(m[0]instanceof Set),m[0].size===1&&m.length===1?t.delete(h):m[0].size===1?(m.shift(),d.add(m[0])):m[0].delete(l)}),n.delete(l),d.forEach(h=>o(h)),!0};return{check:s,reserve:(l,u)=>{l=FI?["win32 parallelization disabled"]:l.map(d=>OI(AI(Ww(d))).toLowerCase());let f=new Set(l.map(d=>r(d)).reduce((d,h)=>d.concat(h)));return e.set(u,{dirs:f,paths:l}),l.forEach(d=>{let h=t.get(d);h?h.push(u):t.set(d,[u])}),f.forEach(d=>{let h=t.get(d);h?h[h.length-1]instanceof Set?h[h.length-1].add(u):h.push(new Set([u])):t.set(d,[new Set([u])])}),o(u)}}}});var Jw=j((g2,Kw)=>{var kI=process.env.__FAKE_PLATFORM__||process.platform,_I=kI==="win32",LI=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:DI,O_TRUNC:TI,O_WRONLY:$I,UV_FS_O_FILEMAP:Yw=0}=LI.constants,NI=_I&&!!Yw,jI=512*1024,MI=Yw|TI|DI|$I;Kw.exports=NI?t=>t<jI?MI:"w":()=>"w"});var of=j((w2,fy)=>{"use strict";var UI=require("assert"),BI=Ra(),me=require("fs"),qI=Ai(),Sr=require("path"),Xw=qw(),Zw=su(),HI=Vw(),zI=ou(),Pt=gi(),WI=vi(),GI=Xu(),Qw=Symbol("onEntry"),Zu=Symbol("checkFs"),ey=Symbol("checkFs2"),$a=Symbol("pruneCache"),Qu=Symbol("isReusable"),Mt=Symbol("makeFs"),ef=Symbol("file"),tf=Symbol("directory"),Na=Symbol("link"),ty=Symbol("symlink"),ry=Symbol("hardlink"),ny=Symbol("unsupported"),iy=Symbol("checkPath"),Kr=Symbol("mkdir"),Ze=Symbol("onError"),ja=Symbol("pending"),sy=Symbol("pend"),Li=Symbol("unpend"),rf=Symbol("ended"),nf=Symbol("maybeClose"),sf=Symbol("skip"),Fs=Symbol("doChown"),ks=Symbol("uid"),_s=Symbol("gid"),Ls=Symbol("checkedCwd"),oy=require("crypto"),ay=Jw(),VI=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ds=VI==="win32",YI=(t,e)=>{if(!Ds)return me.unlink(t,e);let r=t+".DELETE."+oy.randomBytes(16).toString("hex");me.rename(t,r,n=>{if(n)return e(n);me.unlink(r,e)})},KI=t=>{if(!Ds)return me.unlinkSync(t);let e=t+".DELETE."+oy.randomBytes(16).toString("hex");me.renameSync(t,e),me.unlinkSync(e)},cy=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,ly=t=>GI(WI(Pt(t))).toLowerCase(),JI=(t,e)=>{e=ly(e);for(let r of t.keys()){let n=ly(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},XI=t=>{for(let e of t.keys())t.delete(e)},Ma=class extends BI{constructor(e){e||(e={}),e.ondone=r=>{this[rf]=!0,this[nf]()};super(e);if(this[Ls]=!1,this.reservations=HI(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[ja]=0,this[rf]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Ds,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Pt(Sr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[Qw](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[nf](){this[rf]&&this[ja]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[iy](e){if(this.strip){let r=Pt(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Pt(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Pt(e.path),n=r.split("/");if(n.includes("..")||Ds&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,s]=zI(r);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(Sr.isAbsolute(e.path)?e.absolute=Pt(Sr.resolve(e.path)):e.absolute=Pt(Sr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Pt(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Sr.win32.parse(e.absolute);e.absolute=r+Zw.encode(e.absolute.substr(r.length));let{root:n}=Sr.win32.parse(e.path);e.path=n+Zw.encode(e.path.substr(n.length))}return!0}[Qw](e){if(!this[iy](e))return e.resume();switch(UI.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Zu](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[ny](e)}}[Ze](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Li](),r.resume())}[Kr](e,r,n){Xw(Pt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Fs](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ks](e){return cy(this.uid,e.uid,this.processUid)}[_s](e){return cy(this.gid,e.gid,this.processGid)}[ef](e,r){let n=e.mode&4095||this.fmode,i=new qI.WriteStream(e.absolute,{flags:ay(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&me.close(i.fd,()=>{}),i.write=()=>!0,this[Ze](c,e),r()});let s=1,o=c=>{if(c){i.fd&&me.close(i.fd,()=>{}),this[Ze](c,e),r();return}--s==0&&me.close(i.fd,l=>{l?this[Ze](l,e):this[Li](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,d=e.mtime;me.futimes(u,f,d,h=>h?me.utimes(l,f,d,m=>o(m&&h)):o())}if(this[Fs](e)){s++;let f=this[ks](e),d=this[_s](e);me.fchown(u,f,d,h=>h?me.chown(l,f,d,m=>o(m&&h)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Ze](c,e),r()}),e.pipe(a)),a.pipe(i)}[tf](e,r){let n=e.mode&4095||this.dmode;this[Kr](e.absolute,n,i=>{if(i){this[Ze](i,e),r();return}let s=1,o=a=>{--s==0&&(r(),this[Li](),e.resume())};e.mtime&&!this.noMtime&&(s++,me.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[Fs](e)&&(s++,me.chown(e.absolute,this[ks](e),this[_s](e),o)),o()})}[ny](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[ty](e,r){this[Na](e,e.linkpath,"symlink",r)}[ry](e,r){let n=Pt(Sr.resolve(this.cwd,e.linkpath));this[Na](e,n,"link",r)}[sy](){this[ja]++}[Li](){this[ja]--,this[nf]()}[sf](e){this[Li](),e.resume()}[Qu](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Ds}[Zu](e){this[sy]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[ey](e,n))}[$a](e){e.type==="SymbolicLink"?XI(this.dirCache):e.type!=="Directory"&&JI(this.dirCache,e.absolute)}[ey](e,r){this[$a](e);let n=a=>{this[$a](e),r(a)},i=()=>{this[Kr](this.cwd,this.dmode,a=>{if(a){this[Ze](a,e),n();return}this[Ls]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Pt(Sr.dirname(e.absolute));if(a!==this.cwd)return this[Kr](a,this.dmode,c=>{if(c){this[Ze](c,e),n();return}o()})}o()},o=()=>{me.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[sf](e),n();return}if(a||this[Qu](e,c))return this[Mt](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[Mt](f,e,n);return l?me.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return me.rmdir(e.absolute,l=>this[Mt](l,e,n))}if(e.absolute===this.cwd)return this[Mt](null,e,n);YI(e.absolute,l=>this[Mt](l,e,n))})};this[Ls]?s():i()}[Mt](e,r,n){if(e){this[Ze](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[ef](r,n);case"Link":return this[ry](r,n);case"SymbolicLink":return this[ty](r,n);case"Directory":case"GNUDumpDir":return this[tf](r,n)}}[Na](e,r,n,i){me[n](r,e.absolute,s=>{s?this[Ze](s,e):(this[Li](),e.resume()),i()})}},Ua=t=>{try{return[null,t()]}catch(e){return[e,null]}},uy=class extends Ma{[Mt](e,r){return super[Mt](e,r,()=>{})}[Zu](e){if(this[$a](e),!this[Ls]){let s=this[Kr](this.cwd,this.dmode);if(s)return this[Ze](s,e);this[Ls]=!0}if(e.absolute!==this.cwd){let s=Pt(Sr.dirname(e.absolute));if(s!==this.cwd){let o=this[Kr](s,this.dmode);if(o)return this[Ze](o,e)}}let[r,n]=Ua(()=>me.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[sf](e);if(r||this[Qu](e,n))return this[Mt](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?Ua(()=>{me.chmodSync(e.absolute,e.mode)}):[];return this[Mt](a,e)}let[s]=Ua(()=>me.rmdirSync(e.absolute));this[Mt](s,e)}let[i]=e.absolute===this.cwd?[]:Ua(()=>KI(e.absolute));this[Mt](i,e)}[ef](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{me.closeSync(s)}catch(l){c=l}(a||c)&&this[Ze](a||c,e),r()},s;try{s=me.openSync(e.absolute,ay(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[Ze](a,e)),e.pipe(o)),o.on("data",a=>{try{me.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{me.futimesSync(s,l,u)}catch(f){try{me.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[Fs](e)){let l=this[ks](e),u=this[_s](e);try{me.fchownSync(s,l,u)}catch(f){try{me.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[tf](e,r){let n=e.mode&4095||this.dmode,i=this[Kr](e.absolute,n);if(i){this[Ze](i,e),r();return}if(e.mtime&&!this.noMtime)try{me.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Fs](e))try{me.chownSync(e.absolute,this[ks](e),this[_s](e))}catch{}r(),e.resume()}[Kr](e,r){try{return Xw.sync(Pt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Na](e,r,n,i){try{me[n+"Sync"](r,e.absolute),i(),e.resume()}catch(s){return this[Ze](s,e)}}};Ma.Sync=uy;fy.exports=Ma});var gy=j((y2,my)=>{"use strict";var ZI=hi(),Ba=of(),dy=require("fs"),hy=Ai(),py=require("path"),af=vi();my.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=ZI(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&QI(n,e),n.file&&n.sync?eO(n):n.file?tO(n,r):n.sync?rO(n):nO(n)};var QI=(t,e)=>{let r=new Map(e.map(s=>[af(s),!0])),n=t.filter,i=(s,o)=>{let a=o||py.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(py.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(af(s)):s=>i(af(s))},eO=t=>{let e=new Ba.Sync(t),r=t.file,n=dy.statSync(r),i=t.maxReadSize||16*1024*1024;new hy.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},tO=(t,e)=>{let r=new Ba(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),dy.stat(i,(c,l)=>{if(c)a(c);else{let u=new hy.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},rO=t=>new Ba.Sync(t),nO=t=>new Ba(t)});var Ts=j(Ne=>{"use strict";Ne.c=Ne.create=Xg();Ne.r=Ne.replace=Uu();Ne.t=Ne.list=Fa();Ne.u=Ne.update=ow();Ne.x=Ne.extract=gy();Ne.Pack=wa();Ne.Unpack=of();Ne.Parse=Ra();Ne.ReadEntry=ea();Ne.WriteEntry=mu();Ne.Header=yi();Ne.Pax=na();Ne.types=Ql()});var yy=j((b2,wy)=>{var Di=1e3,Ti=Di*60,$i=Ti*60,Tn=$i*24,iO=Tn*7,sO=Tn*365.25;wy.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return oO(t);if(r==="number"&&isFinite(t))return e.long?cO(t):aO(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function oO(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*sO;case"weeks":case"week":case"w":return r*iO;case"days":case"day":case"d":return r*Tn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$i;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ti;case"seconds":case"second":case"secs":case"sec":case"s":return r*Di;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function aO(t){var e=Math.abs(t);return e>=Tn?Math.round(t/Tn)+"d":e>=$i?Math.round(t/$i)+"h":e>=Ti?Math.round(t/Ti)+"m":e>=Di?Math.round(t/Di)+"s":t+"ms"}function cO(t){var e=Math.abs(t);return e>=Tn?qa(t,e,Tn,"day"):e>=$i?qa(t,e,$i,"hour"):e>=Ti?qa(t,e,Ti,"minute"):e>=Di?qa(t,e,Di,"second"):t+" ms"}function qa(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var cf=j((E2,vy)=>{function lO(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=yy(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null;function h(...m){if(!h.enabled)return;let p=h,w=Number(new Date),y=w-(f||w);p.diff=y,p.prev=f,p.curr=w,f=w,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let v=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(A,k)=>{if(A==="%%")return"%";v++;let T=r.formatters[k];if(typeof T=="function"){let N=m[v];A=T.call(p,N),m.splice(v,1),v--}return A}),r.formatArgs.call(p,m),(p.log||r.log).apply(p,m)}return h.namespace=u,h.useColors=r.useColors(),h.color=r.selectColor(u),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>d===null?r.enabled(u):d,set:m=>{d=m}}),typeof r.init=="function"&&r.init(h),h}function n(u,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.names=[],r.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)!d[f]||(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}vy.exports=lO});var by=j((It,Ha)=>{It.formatArgs=fO;It.save=dO;It.load=hO;It.useColors=uO;It.storage=pO();It.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();It.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function uO(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fO(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ha.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}It.log=console.debug||console.log||(()=>{});function dO(t){try{t?It.storage.setItem("debug",t):It.storage.removeItem("debug")}catch{}}function hO(){let t;try{t=It.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function pO(){try{return localStorage}catch{}}Ha.exports=cf()(It);var{formatters:mO}=Ha.exports;mO.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Cy=j((C2,Ey)=>{"use strict";Ey.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var ff=j((x2,Sy)=>{"use strict";var gO=require("os"),xy=require("tty"),Ut=Cy(),{env:He}=process,Jr;Ut("no-color")||Ut("no-colors")||Ut("color=false")||Ut("color=never")?Jr=0:(Ut("color")||Ut("colors")||Ut("color=true")||Ut("color=always"))&&(Jr=1);"FORCE_COLOR"in He&&(He.FORCE_COLOR==="true"?Jr=1:He.FORCE_COLOR==="false"?Jr=0:Jr=He.FORCE_COLOR.length===0?1:Math.min(parseInt(He.FORCE_COLOR,10),3));function lf(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function uf(t,e){if(Jr===0)return 0;if(Ut("color=16m")||Ut("color=full")||Ut("color=truecolor"))return 3;if(Ut("color=256"))return 2;if(t&&!e&&Jr===void 0)return 0;let r=Jr||0;if(He.TERM==="dumb")return r;if(process.platform==="win32"){let n=gO.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in He)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in He)||He.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in He)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(He.TEAMCITY_VERSION)?1:0;if(He.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in He){let n=parseInt((He.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(He.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(He.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(He.TERM)||"COLORTERM"in He?1:r}function wO(t){let e=uf(t,t&&t.isTTY);return lf(e)}Sy.exports={supportsColor:wO,stdout:lf(uf(!0,xy.isatty(1))),stderr:lf(uf(!0,xy.isatty(2)))}});var Iy=j((We,Wa)=>{var yO=require("tty"),za=require("util");We.init=PO;We.log=CO;We.formatArgs=bO;We.save=xO;We.load=SO;We.useColors=vO;We.destroy=za.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");We.colors=[6,2,3,4,5,1];try{let t=ff();t&&(t.stderr||t).level>=2&&(We.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}We.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function vO(){return"colors"in We.inspectOpts?Boolean(We.inspectOpts.colors):yO.isatty(process.stderr.fd)}function bO(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} [0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Wa.exports.humanize(this.diff)+"[0m")}else t[0]=EO()+e+" "+t[0]}function EO(){return We.inspectOpts.hideDate?"":new Date().toISOString()+" "}function CO(...t){return process.stderr.write(za.format(...t)+`
`)}function xO(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function SO(){return process.env.DEBUG}function PO(t){t.inspectOpts={};let e=Object.keys(We.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=We.inspectOpts[e[r]]}Wa.exports=cf()(We);var{formatters:Py}=Wa.exports;Py.o=function(t){return this.inspectOpts.colors=this.useColors,za.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Py.O=function(t){return this.inspectOpts.colors=this.useColors,za.inspect(t,this.inspectOpts)}});var Oy=j((S2,df)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?df.exports=by():df.exports=Iy()});var Ry=j((P2,Ay)=>{var $s;Ay.exports=function(){if(!$s){try{$s=Oy()("follow-redirects")}catch{}typeof $s!="function"&&($s=function(){})}$s.apply(null,arguments)}});var $y=j((I2,gf)=>{var $n=require("url"),hf=$n.URL,IO=require("http"),OO=require("https"),Fy=require("stream").Writable,AO=require("assert"),ky=Ry(),Nn=["abort","aborted","connect","error","socket","timeout"],pf=Object.create(null);Nn.forEach(function(t){pf[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var _y=Ga("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),RO=Ga("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),FO=Ga("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),kO=Ga("ERR_STREAM_WRITE_AFTER_END","write after end");function Ot(t,e){Fy.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Ot.prototype=Object.create(Fy.prototype);Ot.prototype.abort=function(){Ty(this._currentRequest),this.emit("abort")};Ot.prototype.write=function(t,e,r){if(this._ending)throw new kO;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new FO),this.abort())};Ot.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Ot.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Ot.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Ot.prototype.setTimeout=function(t,e){var r=this;function n(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),n(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Ot.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Ot.prototype,t,{get:function(){return this._currentRequest[t]}})});Ot.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Ot.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=$n.format(this._options),n._redirectable=this;for(var i=0;i<Nn.length;i++)n.on(Nn[i],pf[Nn[i]]);if(this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};Ot.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Ty(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new RO);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],mf(/^content-/i,this._options.headers));var n=mf(/^host$/i,this._options.headers),i=$n.parse(this._currentUrl),s=n||i.host,o=/^\w+:/.test(r)?this._currentUrl:$n.format(Object.assign(i,{host:s})),a;try{a=$n.resolve(o,r)}catch(u){this.emit("error",new _y(u));return}ky("redirecting to",a),this._isRedirect=!0;var c=$n.parse(a);if(Object.assign(this._options,c),(c.protocol!==i.protocol||!LO(c.host,s))&&mf(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new _y(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function Ly(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",s=r[i]=t[n],o=e[n]=Object.create(s);function a(l,u,f){if(typeof l=="string"){var d=l;try{l=Dy(new hf(d))}catch{l=$n.parse(d)}}else hf&&l instanceof hf?l=Dy(l):(f=u,u=l,l={protocol:i});return typeof u=="function"&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,AO.equal(u.protocol,i,"protocol mismatch"),ky("options",u),new Ot(u,f)}function c(l,u,f){var d=o.request(l,u,f);return d.end(),d}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function _O(){}function Dy(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function mf(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Ga(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Ty(t){for(var e=0;e<Nn.length;e++)t.removeListener(Nn[e],pf[Nn[e]]);t.on("error",_O),t.abort()}function LO(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}gf.exports=Ly({http:IO,https:OO});gf.exports.wrap=Ly});var js=j((k2,Uy)=>{var TO="2.0.0",$O=256,NO=Number.MAX_SAFE_INTEGER||9007199254740991,jO=16;Uy.exports={SEMVER_SPEC_VERSION:TO,MAX_LENGTH:$O,MAX_SAFE_INTEGER:NO,MAX_SAFE_COMPONENT_LENGTH:jO}});var Ms=j((_2,By)=>{var MO=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};By.exports=MO});var jn=j((Zr,qy)=>{var{MAX_SAFE_COMPONENT_LENGTH:wf}=js(),UO=Ms();Zr=qy.exports={};var BO=Zr.re=[],Z=Zr.src=[],Q=Zr.t={},qO=0,ue=(t,e,r)=>{let n=qO++;UO(n,e),Q[t]=n,Z[n]=e,BO[n]=new RegExp(e,r?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","[0-9]+");ue("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ue("MAINVERSION",`(${Z[Q.NUMERICIDENTIFIER]})\\.(${Z[Q.NUMERICIDENTIFIER]})\\.(${Z[Q.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${Z[Q.NUMERICIDENTIFIERLOOSE]})\\.(${Z[Q.NUMERICIDENTIFIERLOOSE]})\\.(${Z[Q.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${Z[Q.NUMERICIDENTIFIER]}|${Z[Q.NONNUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${Z[Q.NUMERICIDENTIFIERLOOSE]}|${Z[Q.NONNUMERICIDENTIFIER]})`);ue("PRERELEASE",`(?:-(${Z[Q.PRERELEASEIDENTIFIER]}(?:\\.${Z[Q.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${Z[Q.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Z[Q.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER","[0-9A-Za-z-]+");ue("BUILD",`(?:\\+(${Z[Q.BUILDIDENTIFIER]}(?:\\.${Z[Q.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${Z[Q.MAINVERSION]}${Z[Q.PRERELEASE]}?${Z[Q.BUILD]}?`);ue("FULL",`^${Z[Q.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${Z[Q.MAINVERSIONLOOSE]}${Z[Q.PRERELEASELOOSE]}?${Z[Q.BUILD]}?`);ue("LOOSE",`^${Z[Q.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${Z[Q.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${Z[Q.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${Z[Q.XRANGEIDENTIFIER]})(?:\\.(${Z[Q.XRANGEIDENTIFIER]})(?:\\.(${Z[Q.XRANGEIDENTIFIER]})(?:${Z[Q.PRERELEASE]})?${Z[Q.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${Z[Q.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Z[Q.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Z[Q.XRANGEIDENTIFIERLOOSE]})(?:${Z[Q.PRERELEASELOOSE]})?${Z[Q.BUILD]}?)?)?`);ue("XRANGE",`^${Z[Q.GTLT]}\\s*${Z[Q.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${Z[Q.GTLT]}\\s*${Z[Q.XRANGEPLAINLOOSE]}$`);ue("COERCE",`(^|[^\\d])(\\d{1,${wf}})(?:\\.(\\d{1,${wf}}))?(?:\\.(\\d{1,${wf}}))?(?:$|[^\\d])`);ue("COERCERTL",Z[Q.COERCE],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${Z[Q.LONETILDE]}\\s+`,!0);Zr.tildeTrimReplace="$1~";ue("TILDE",`^${Z[Q.LONETILDE]}${Z[Q.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${Z[Q.LONETILDE]}${Z[Q.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${Z[Q.LONECARET]}\\s+`,!0);Zr.caretTrimReplace="$1^";ue("CARET",`^${Z[Q.LONECARET]}${Z[Q.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${Z[Q.LONECARET]}${Z[Q.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${Z[Q.GTLT]}\\s*(${Z[Q.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${Z[Q.GTLT]}\\s*(${Z[Q.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${Z[Q.GTLT]}\\s*(${Z[Q.LOOSEPLAIN]}|${Z[Q.XRANGEPLAIN]})`,!0);Zr.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${Z[Q.XRANGEPLAIN]})\\s+-\\s+(${Z[Q.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${Z[Q.XRANGEPLAINLOOSE]})\\s+-\\s+(${Z[Q.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0.0.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Us=j((L2,Hy)=>{var HO=["includePrerelease","loose","rtl"],zO=t=>t?typeof t!="object"?{loose:!0}:HO.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};Hy.exports=zO});var Ka=j((D2,Gy)=>{var zy=/^[0-9]+$/,Wy=(t,e)=>{let r=zy.test(t),n=zy.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},WO=(t,e)=>Wy(e,t);Gy.exports={compareIdentifiers:Wy,rcompareIdentifiers:WO}});var Qe=j((T2,Jy)=>{var Ja=Ms(),{MAX_LENGTH:Vy,MAX_SAFE_INTEGER:Xa}=js(),{re:Yy,t:Ky}=jn(),GO=Us(),{compareIdentifiers:Bs}=Ka(),Bt=class{constructor(e,r){if(r=GO(r),e instanceof Bt){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Vy)throw new TypeError(`version is longer than ${Vy} characters`);Ja("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Yy[Ky.LOOSE]:Yy[Ky.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xa||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xa||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xa||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Xa)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ja("SemVer.compare",this.version,this.options,e),!(e instanceof Bt)){if(typeof e=="string"&&e===this.version)return 0;e=new Bt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Bt||(e=new Bt(e,this.options)),Bs(this.major,e.major)||Bs(this.minor,e.minor)||Bs(this.patch,e.patch)}comparePre(e){if(e instanceof Bt||(e=new Bt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Ja("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Bs(n,i)}while(++r)}compareBuild(e){e instanceof Bt||(e=new Bt(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Ja("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Bs(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Jy.exports=Bt});var Mn=j(($2,ev)=>{var{MAX_LENGTH:VO}=js(),{re:Xy,t:Zy}=jn(),Qy=Qe(),YO=Us(),KO=(t,e)=>{if(e=YO(e),t instanceof Qy)return t;if(typeof t!="string"||t.length>VO||!(e.loose?Xy[Zy.LOOSE]:Xy[Zy.FULL]).test(t))return null;try{return new Qy(t,e)}catch{return null}};ev.exports=KO});var rv=j((N2,tv)=>{var JO=Mn(),XO=(t,e)=>{let r=JO(t,e);return r?r.version:null};tv.exports=XO});var iv=j((j2,nv)=>{var ZO=Mn(),QO=(t,e)=>{let r=ZO(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};nv.exports=QO});var ov=j((M2,sv)=>{var eA=Qe(),tA=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new eA(t,r).inc(e,n).version}catch{return null}};sv.exports=tA});var qt=j((U2,cv)=>{var av=Qe(),rA=(t,e,r)=>new av(t,r).compare(new av(e,r));cv.exports=rA});var Za=j((B2,lv)=>{var nA=qt(),iA=(t,e,r)=>nA(t,e,r)===0;lv.exports=iA});var dv=j((q2,fv)=>{var uv=Mn(),sA=Za(),oA=(t,e)=>{if(sA(t,e))return null;{let r=uv(t),n=uv(e),i=r.prerelease.length||n.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return s+a;return o}};fv.exports=oA});var pv=j((H2,hv)=>{var aA=Qe(),cA=(t,e)=>new aA(t,e).major;hv.exports=cA});var gv=j((z2,mv)=>{var lA=Qe(),uA=(t,e)=>new lA(t,e).minor;mv.exports=uA});var yv=j((W2,wv)=>{var fA=Qe(),dA=(t,e)=>new fA(t,e).patch;wv.exports=dA});var bv=j((G2,vv)=>{var hA=Mn(),pA=(t,e)=>{let r=hA(t,e);return r&&r.prerelease.length?r.prerelease:null};vv.exports=pA});var Cv=j((V2,Ev)=>{var mA=qt(),gA=(t,e,r)=>mA(e,t,r);Ev.exports=gA});var Sv=j((Y2,xv)=>{var wA=qt(),yA=(t,e)=>wA(t,e,!0);xv.exports=yA});var Qa=j((K2,Iv)=>{var Pv=Qe(),vA=(t,e,r)=>{let n=new Pv(t,r),i=new Pv(e,r);return n.compare(i)||n.compareBuild(i)};Iv.exports=vA});var Av=j((J2,Ov)=>{var bA=Qa(),EA=(t,e)=>t.sort((r,n)=>bA(r,n,e));Ov.exports=EA});var Fv=j((X2,Rv)=>{var CA=Qa(),xA=(t,e)=>t.sort((r,n)=>CA(n,r,e));Rv.exports=xA});var qs=j((Z2,kv)=>{var SA=qt(),PA=(t,e,r)=>SA(t,e,r)>0;kv.exports=PA});var ec=j((Q2,_v)=>{var IA=qt(),OA=(t,e,r)=>IA(t,e,r)<0;_v.exports=OA});var yf=j((e$,Lv)=>{var AA=qt(),RA=(t,e,r)=>AA(t,e,r)!==0;Lv.exports=RA});var tc=j((t$,Dv)=>{var FA=qt(),kA=(t,e,r)=>FA(t,e,r)>=0;Dv.exports=kA});var rc=j((r$,Tv)=>{var _A=qt(),LA=(t,e,r)=>_A(t,e,r)<=0;Tv.exports=LA});var vf=j((n$,$v)=>{var DA=Za(),TA=yf(),$A=qs(),NA=tc(),jA=ec(),MA=rc(),UA=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return DA(t,r,n);case"!=":return TA(t,r,n);case">":return $A(t,r,n);case">=":return NA(t,r,n);case"<":return jA(t,r,n);case"<=":return MA(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};$v.exports=UA});var jv=j((i$,Nv)=>{var BA=Qe(),qA=Mn(),{re:nc,t:ic}=jn(),HA=(t,e)=>{if(t instanceof BA)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(nc[ic.COERCE]);else{let n;for(;(n=nc[ic.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),nc[ic.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;nc[ic.COERCERTL].lastIndex=-1}return r===null?null:qA(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};Nv.exports=HA});var Wv=j((s$,zv)=>{"use strict";var zA=ws(),Un=Symbol("max"),Pr=Symbol("length"),Ni=Symbol("lengthCalculator"),Hs=Symbol("allowStale"),Bn=Symbol("maxAge"),Ir=Symbol("dispose"),Mv=Symbol("noDisposeOnSet"),ze=Symbol("lruList"),Zt=Symbol("cache"),Uv=Symbol("updateAgeOnGet"),bf=()=>1,Bv=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Un]=e.max||1/0,n=e.length||bf;if(this[Ni]=typeof n!="function"?bf:n,this[Hs]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Bn]=e.maxAge||0,this[Ir]=e.dispose,this[Mv]=e.noDisposeOnSet||!1,this[Uv]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Un]=e||1/0,zs(this)}get max(){return this[Un]}set allowStale(e){this[Hs]=!!e}get allowStale(){return this[Hs]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Bn]=e,zs(this)}get maxAge(){return this[Bn]}set lengthCalculator(e){typeof e!="function"&&(e=bf),e!==this[Ni]&&(this[Ni]=e,this[Pr]=0,this[ze].forEach(r=>{r.length=this[Ni](r.value,r.key),this[Pr]+=r.length})),zs(this)}get lengthCalculator(){return this[Ni]}get length(){return this[Pr]}get itemCount(){return this[ze].length}rforEach(e,r){r=r||this;for(let n=this[ze].tail;n!==null;){let i=n.prev;Hv(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[ze].head;n!==null;){let i=n.next;Hv(this,e,n,r),n=i}}keys(){return this[ze].toArray().map(e=>e.key)}values(){return this[ze].toArray().map(e=>e.value)}reset(){this[Ir]&&this[ze]&&this[ze].length&&this[ze].forEach(e=>this[Ir](e.key,e.value)),this[Zt]=new Map,this[ze]=new zA,this[Pr]=0}dump(){return this[ze].map(e=>sc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ze]}set(e,r,n){if(n=n||this[Bn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[Ni](r,e);if(this[Zt].has(e)){if(s>this[Un])return ji(this,this[Zt].get(e)),!1;let c=this[Zt].get(e).value;return this[Ir]&&(this[Mv]||this[Ir](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Pr]+=s-c.length,c.length=s,this.get(e),zs(this),!0}let o=new qv(e,r,s,i,n);return o.length>this[Un]?(this[Ir]&&this[Ir](e,r),!1):(this[Pr]+=o.length,this[ze].unshift(o),this[Zt].set(e,this[ze].head),zs(this),!0)}has(e){if(!this[Zt].has(e))return!1;let r=this[Zt].get(e).value;return!sc(this,r)}get(e){return Ef(this,e,!0)}peek(e){return Ef(this,e,!1)}pop(){let e=this[ze].tail;return e?(ji(this,e),e.value):null}del(e){ji(this,this[Zt].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Zt].forEach((e,r)=>Ef(this,r,!1))}},Ef=(t,e,r)=>{let n=t[Zt].get(e);if(n){let i=n.value;if(sc(t,i)){if(ji(t,n),!t[Hs])return}else r&&(t[Uv]&&(n.value.now=Date.now()),t[ze].unshiftNode(n));return i.value}},sc=(t,e)=>{if(!e||!e.maxAge&&!t[Bn])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Bn]&&r>t[Bn]},zs=t=>{if(t[Pr]>t[Un])for(let e=t[ze].tail;t[Pr]>t[Un]&&e!==null;){let r=e.prev;ji(t,e),e=r}},ji=(t,e)=>{if(e){let r=e.value;t[Ir]&&t[Ir](r.key,r.value),t[Pr]-=r.length,t[Zt].delete(r.key),t[ze].removeNode(e)}},qv=class{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},Hv=(t,e,r,n)=>{let i=r.value;sc(t,i)&&(ji(t,r),t[Hs]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};zv.exports=Bv});var Ht=j((o$,Kv)=>{var Mi=class{constructor(e,r){if(r=GA(r),e instanceof Mi)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Mi(e.raw,r);if(e instanceof Cf)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Vv(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&XA(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Gv.get(n);if(i)return i;let s=this.options.loose,o=s?et[Ge.HYPHENRANGELOOSE]:et[Ge.HYPHENRANGE];e=e.replace(o,aR(this.options.includePrerelease)),Ae("hyphen replace",e),e=e.replace(et[Ge.COMPARATORTRIM],YA),Ae("comparator trim",e,et[Ge.COMPARATORTRIM]),e=e.replace(et[Ge.TILDETRIM],KA),e=e.replace(et[Ge.CARETTRIM],JA),e=e.split(/\s+/).join(" ");let a=s?et[Ge.COMPARATORLOOSE]:et[Ge.COMPARATOR],c=e.split(" ").map(d=>ZA(d,this.options)).join(" ").split(/\s+/).map(d=>oR(d,this.options)).filter(this.options.loose?d=>!!d.match(a):()=>!0).map(d=>new Cf(d,this.options)),l=c.length,u=new Map;for(let d of c){if(Vv(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return Gv.set(n,f),f}intersects(e,r){if(!(e instanceof Mi))throw new TypeError("a Range is required");return this.set.some(n=>Yv(n,r)&&e.set.some(i=>Yv(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new VA(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(cR(this.set[r],e,this.options))return!0;return!1}};Kv.exports=Mi;var WA=Wv(),Gv=new WA({max:1e3}),GA=Us(),Cf=Ws(),Ae=Ms(),VA=Qe(),{re:et,t:Ge,comparatorTrimReplace:YA,tildeTrimReplace:KA,caretTrimReplace:JA}=jn(),Vv=t=>t.value==="<0.0.0-0",XA=t=>t.value==="",Yv=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},ZA=(t,e)=>(Ae("comp",t,e),t=tR(t,e),Ae("caret",t),t=QA(t,e),Ae("tildes",t),t=nR(t,e),Ae("xrange",t),t=sR(t,e),Ae("stars",t),t),st=t=>!t||t.toLowerCase()==="x"||t==="*",QA=(t,e)=>t.trim().split(/\s+/).map(r=>eR(r,e)).join(" "),eR=(t,e)=>{let r=e.loose?et[Ge.TILDELOOSE]:et[Ge.TILDE];return t.replace(r,(n,i,s,o,a)=>{Ae("tilde",t,n,i,s,o,a);let c;return st(i)?c="":st(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:st(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Ae("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Ae("tilde return",c),c})},tR=(t,e)=>t.trim().split(/\s+/).map(r=>rR(r,e)).join(" "),rR=(t,e)=>{Ae("caret",t,e);let r=e.loose?et[Ge.CARETLOOSE]:et[Ge.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{Ae("caret",t,i,s,o,a,c);let l;return st(s)?l="":st(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:st(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(Ae("replaceCaret pr",c),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(Ae("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Ae("caret return",l),l})},nR=(t,e)=>(Ae("replaceXRanges",t,e),t.split(/\s+/).map(r=>iR(r,e)).join(" ")),iR=(t,e)=>{t=t.trim();let r=e.loose?et[Ge.XRANGELOOSE]:et[Ge.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{Ae("xRange",t,n,i,s,o,a,c);let l=st(s),u=l||st(o),f=u||st(a),d=f;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):u?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),Ae("xRange return",n),n})},sR=(t,e)=>(Ae("replaceStars",t,e),t.trim().replace(et[Ge.STAR],"")),oR=(t,e)=>(Ae("replaceGTE0",t,e),t.trim().replace(et[e.includePrerelease?Ge.GTE0PRE:Ge.GTE0],"")),aR=t=>(e,r,n,i,s,o,a,c,l,u,f,d,h)=>(st(n)?r="":st(i)?r=`>=${n}.0.0${t?"-0":""}`:st(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,st(l)?c="":st(u)?c=`<${+l+1}.0.0-0`:st(f)?c=`<${l}.${+u+1}.0-0`:d?c=`<=${l}.${u}.${f}-${d}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),cR=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ae(t[n].semver),t[n].semver!==Cf.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Ws=j((a$,e0)=>{var Gs=Symbol("SemVer ANY"),Vs=class{static get ANY(){return Gs}constructor(e,r){if(r=lR(r),e instanceof Vs){if(e.loose===!!r.loose)return e;e=e.value}Sf("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Gs?this.value="":this.value=this.operator+this.semver.version,Sf("comp",this)}parse(e){let r=this.options.loose?Jv[Xv.COMPARATORLOOSE]:Jv[Xv.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Zv(n[2],this.options.loose):this.semver=Gs}toString(){return this.value}test(e){if(Sf("Comparator.test",e,this.options.loose),this.semver===Gs||e===Gs)return!0;if(typeof e=="string")try{e=new Zv(e,this.options)}catch{return!1}return xf(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Vs))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Qv(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new Qv(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=xf(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=xf(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&o||a||c}};e0.exports=Vs;var lR=Us(),{re:Jv,t:Xv}=jn(),xf=vf(),Sf=Ms(),Zv=Qe(),Qv=Ht()});var Ys=j((c$,t0)=>{var uR=Ht(),fR=(t,e,r)=>{try{e=new uR(e,r)}catch{return!1}return e.test(t)};t0.exports=fR});var n0=j((l$,r0)=>{var dR=Ht(),hR=(t,e)=>new dR(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));r0.exports=hR});var s0=j((u$,i0)=>{var pR=Qe(),mR=Ht(),gR=(t,e,r)=>{let n=null,i=null,s=null;try{s=new mR(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new pR(n,r))}),n};i0.exports=gR});var a0=j((f$,o0)=>{var wR=Qe(),yR=Ht(),vR=(t,e,r)=>{let n=null,i=null,s=null;try{s=new yR(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new wR(n,r))}),n};o0.exports=vR});var u0=j((d$,l0)=>{var Pf=Qe(),bR=Ht(),c0=qs(),ER=(t,e)=>{t=new bR(t,e);let r=new Pf("0.0.0");if(t.test(r)||(r=new Pf("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Pf(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||c0(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||c0(r,s))&&(r=s)}return r&&t.test(r)?r:null};l0.exports=ER});var d0=j((h$,f0)=>{var CR=Ht(),xR=(t,e)=>{try{return new CR(t,e).range||"*"}catch{return null}};f0.exports=xR});var oc=j((p$,g0)=>{var SR=Qe(),h0=Ws(),{ANY:PR}=h0,IR=Ht(),OR=Ys(),p0=qs(),m0=ec(),AR=rc(),RR=tc(),FR=(t,e,r,n)=>{t=new SR(t,n),e=new IR(e,n);let i,s,o,a,c;switch(r){case">":i=p0,s=AR,o=m0,a=">",c=">=";break;case"<":i=m0,s=RR,o=p0,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(OR(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,d=null;if(u.forEach(h=>{h.semver===PR&&(h=new h0(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,n)?f=h:o(h.semver,d.semver,n)&&(d=h)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&s(t,d.semver))return!1;if(d.operator===c&&o(t,d.semver))return!1}return!0};g0.exports=FR});var y0=j((m$,w0)=>{var kR=oc(),_R=(t,e,r)=>kR(t,e,">",r);w0.exports=_R});var b0=j((g$,v0)=>{var LR=oc(),DR=(t,e,r)=>LR(t,e,"<",r);v0.exports=DR});var x0=j((w$,C0)=>{var E0=Ht(),TR=(t,e,r)=>(t=new E0(t,r),e=new E0(e,r),t.intersects(e));C0.exports=TR});var P0=j((y$,S0)=>{var $R=Ys(),NR=qt();S0.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((u,f)=>NR(u,f,r));for(let u of o)$R(u,e,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,f]of n)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var F0=j((v$,R0)=>{var I0=Ht(),ac=Ws(),{ANY:If}=ac,Ks=Ys(),Of=qt(),jR=(t,e,r={})=>{if(t===e)return!0;t=new I0(t,r),e=new I0(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=MR(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},MR=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===If){if(e.length===1&&e[0].semver===If)return!0;r.includePrerelease?t=[new ac(">=0.0.0-0")]:t=[new ac(">=0.0.0")]}if(e.length===1&&e[0].semver===If){if(r.includePrerelease)return!0;e=[new ac(">=0.0.0")]}let n=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=O0(i,h,r):h.operator==="<"||h.operator==="<="?s=A0(s,h,r):n.add(h.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Of(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of n){if(i&&!Ks(h,String(i),r)||s&&!Ks(h,String(s),r))return null;for(let m of e)if(!Ks(h,String(m),r))return!1;return!0}let a,c,l,u,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let h of e){if(u=u||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(a=O0(i,h,r),a===h&&a!==i)return!1}else if(i.operator===">="&&!Ks(i.semver,String(h),r))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(c=A0(s,h,r),c===h&&c!==s)return!1}else if(s.operator==="<="&&!Ks(s.semver,String(h),r))return!1}if(!h.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&u&&!i&&o!==0||d||f)},O0=(t,e,r)=>{if(!t)return e;let n=Of(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},A0=(t,e,r)=>{if(!t)return e;let n=Of(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};R0.exports=jR});var Rf=j((b$,k0)=>{var Af=jn();k0.exports={re:Af.re,src:Af.src,tokens:Af.t,SEMVER_SPEC_VERSION:js().SEMVER_SPEC_VERSION,SemVer:Qe(),compareIdentifiers:Ka().compareIdentifiers,rcompareIdentifiers:Ka().rcompareIdentifiers,parse:Mn(),valid:rv(),clean:iv(),inc:ov(),diff:dv(),major:pv(),minor:gv(),patch:yv(),prerelease:bv(),compare:qt(),rcompare:Cv(),compareLoose:Sv(),compareBuild:Qa(),sort:Av(),rsort:Fv(),gt:qs(),lt:ec(),eq:Za(),neq:yf(),gte:tc(),lte:rc(),cmp:vf(),coerce:jv(),Comparator:Ws(),Range:Ht(),satisfies:Ys(),toComparators:n0(),maxSatisfying:s0(),minSatisfying:a0(),minVersion:u0(),validRange:d0(),outside:oc(),gtr:y0(),ltr:b0(),intersects:x0(),simplifyRange:P0(),subset:F0()}});var Cb=j((Gj,Eb)=>{"use strict";Eb.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Vf=j((Vj,Sb)=>{var ro=Cb(),xb={};for(let t of Object.keys(ro))xb[ro[t]]=t;var te={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Sb.exports=te;for(let t of Object.keys(te)){if(!("channels"in te[t]))throw new Error("missing channels property: "+t);if(!("labels"in te[t]))throw new Error("missing channel labels property: "+t);if(te[t].labels.length!==te[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=te[t];delete te[t].channels,delete te[t].labels,Object.defineProperty(te[t],"channels",{value:e}),Object.defineProperty(te[t],"labels",{value:r})}te.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,c;s===i?a=0:e===s?a=(r-n)/o:r===s?a=2+(n-e)/o:n===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360);let l=(i+s)/2;return s===i?c=0:l<=.5?c=o/(s+i):c=o/(2-s-i),[a,c*100,l*100]};te.rgb.hsv=function(t){let e,r,n,i,s,o=t[0]/255,a=t[1]/255,c=t[2]/255,l=Math.max(o,a,c),u=l-Math.min(o,a,c),f=function(d){return(l-d)/6/u+1/2};return u===0?(i=0,s=0):(s=u/l,e=f(o),r=f(a),n=f(c),o===l?i=n-r:a===l?i=1/3+e-n:c===l&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,l*100]};te.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=te.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};te.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),s=(1-e-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function $F(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}te.rgb.keyword=function(t){let e=xb[t];if(e)return e;let r=1/0,n;for(let i of Object.keys(ro)){let s=ro[i],o=$F(t,s);o<r&&(r=o,n=i)}return n};te.keyword.rgb=function(t){return ro[t]};te.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};te.rgb.lab=function(t){let e=te.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};te.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,o;if(r===0)return o=n*255,[o,o,o];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,c=[0,0,0];for(let l=0;l<3;l++)s=e+1/3*-(l-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,c[l]=o*255;return c};te.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[e,a*100,o*100]};te.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),c=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,c,o];case 1:return[a,n,o];case 2:return[o,n,c];case 3:return[o,a,n];case 4:return[c,o,n];case 5:return[n,o,a]}};te.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};te.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*e),a=1-n;s=6*e-o,(o&1)!=0&&(s=1-s);let c=r+s*(a-r),l,u,f;switch(o){default:case 6:case 0:l=a,u=c,f=r;break;case 1:l=c,u=a,f=r;break;case 2:l=r,u=a,f=c;break;case 3:l=r,u=c,f=a;break;case 4:l=c,u=r,f=a;break;case 5:l=a,u=r,f=c;break}return[l*255,u*255,f*255]};te.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};te.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};te.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(e-r),o=200*(r-n);return[i,s,o]};te.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;let a=s**3,c=i**3,l=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};te.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[e,o,i]};te.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[e,s,o]};te.rgb.ansi16=function(t,e=null){let[r,n,i]=t,s=e===null?te.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};te.hsv.ansi16=function(t){return te.rgb.ansi16(te.hsv.rgb(t),t[2])};te.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};te.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};te.ansi256.rgb=function(t){if(t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};te.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};te.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};te.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,c;return o<1?a=s/(1-o):a=0,o<=0?c=0:i===e?c=(r-n)/o%6:i===r?c=2+(n-e)/o:c=4+(e-r)/o,c/=6,c%=1,[c*360,o*100,a*100]};te.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};te.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};te.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=e%1*6,o=s%1,a=1-o,c=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-r)*n,[(r*i[0]+c)*255,(r*i[1]+c)*255,(r*i[2]+c)*255]};te.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};te.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};te.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};te.hwb.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};te.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};te.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};te.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};te.gray.hsl=function(t){return[0,0,t[0]]};te.gray.hsv=te.gray.hsl;te.gray.hwb=function(t){return[0,100,t[0]]};te.gray.cmyk=function(t){return[0,0,0,t[0]]};te.gray.lab=function(t){return[t[0],0,0]};te.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};te.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var Ib=j((Yj,Pb)=>{var xc=Vf();function NF(){let t={},e=Object.keys(xc);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function jF(t){let e=NF(),r=[t];for(e[t].distance=0;r.length;){let n=r.pop(),i=Object.keys(xc[n]);for(let s=i.length,o=0;o<s;o++){let a=i[o],c=e[a];c.distance===-1&&(c.distance=e[n].distance+1,c.parent=n,r.unshift(a))}}return e}function MF(t,e){return function(r){return e(t(r))}}function UF(t,e){let r=[e[t].parent,t],n=xc[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=MF(xc[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}Pb.exports=function(t){let e=jF(t),r={},n=Object.keys(e);for(let i=n.length,s=0;s<i;s++){let o=n[s];e[o].parent!==null&&(r[o]=UF(o,e))}return r}});var Ab=j((Kj,Ob)=>{var Yf=Vf(),BF=Ib(),zi={},qF=Object.keys(Yf);function HF(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function zF(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}qF.forEach(t=>{zi[t]={},Object.defineProperty(zi[t],"channels",{value:Yf[t].channels}),Object.defineProperty(zi[t],"labels",{value:Yf[t].labels});let e=BF(t);Object.keys(e).forEach(n=>{let i=e[n];zi[t][n]=zF(i),zi[t][n].raw=HF(i)})});Ob.exports=zi});var Db=j((Jj,Lb)=>{"use strict";var Rb=(t,e)=>(...r)=>`[${t(...r)+e}m`,Fb=(t,e)=>(...r)=>{let n=t(...r);return`[${38+e};5;${n}m`},kb=(t,e)=>(...r)=>{let n=t(...r);return`[${38+e};2;${n[0]};${n[1]};${n[2]}m`},Sc=t=>t,_b=(t,e,r)=>[t,e,r],Wi=(t,e,r)=>{Object.defineProperty(t,e,{get:()=>{let n=r();return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},Kf,Gi=(t,e,r,n)=>{Kf===void 0&&(Kf=Ab());let i=n?10:0,s={};for(let[o,a]of Object.entries(Kf)){let c=o==="ansi16"?"ansi":o;o===e?s[c]=t(r,i):typeof a=="object"&&(s[c]=t(a[e],i))}return s};function WF(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,s]of Object.entries(n))e[i]={open:`[${s[0]}m`,close:`[${s[1]}m`},n[i]=e[i],t.set(s[0],s[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="[39m",e.bgColor.close="[49m",Wi(e.color,"ansi",()=>Gi(Rb,"ansi16",Sc,!1)),Wi(e.color,"ansi256",()=>Gi(Fb,"ansi256",Sc,!1)),Wi(e.color,"ansi16m",()=>Gi(kb,"rgb",_b,!1)),Wi(e.bgColor,"ansi",()=>Gi(Rb,"ansi16",Sc,!0)),Wi(e.bgColor,"ansi256",()=>Gi(Fb,"ansi256",Sc,!0)),Wi(e.bgColor,"ansi16m",()=>Gi(kb,"rgb",_b,!0)),e}Object.defineProperty(Lb,"exports",{enumerable:!0,get:WF})});var $b=j((Xj,Tb)=>{"use strict";var GF=(t,e,r)=>{let n=t.indexOf(e);if(n===-1)return t;let i=e.length,s=0,o="";do o+=t.substr(s,n-s)+e+r,s=n+i,n=t.indexOf(e,s);while(n!==-1);return o+=t.substr(s),o},VF=(t,e,r,n)=>{let i=0,s="";do{let o=t[n-1]==="\r";s+=t.substr(i,(o?n-1:n)-i)+e+(o?`\r
`:`
`)+r,i=n+1,n=t.indexOf(`
`,i)}while(n!==-1);return s+=t.substr(i),s};Tb.exports={stringReplaceAll:GF,stringEncaseCRLFWithFirstIndex:VF}});var Bb=j((Zj,Ub)=>{"use strict";var YF=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Nb=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,KF=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,JF=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,XF=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a","\x07"]]);function jb(t){let e=t[0]==="u",r=t[1]==="{";return e&&!r&&t.length===5||t[0]==="x"&&t.length===3?String.fromCharCode(parseInt(t.slice(1),16)):e&&r?String.fromCodePoint(parseInt(t.slice(2,-1),16)):XF.get(t)||t}function ZF(t,e){let r=[],n=e.trim().split(/\s*,\s*/g),i;for(let s of n){let o=Number(s);if(!Number.isNaN(o))r.push(o);else if(i=s.match(KF))r.push(i[2].replace(JF,(a,c,l)=>c?jb(c):l));else throw new Error(`Invalid Chalk template style argument: ${s} (in style '${t}')`)}return r}function QF(t){Nb.lastIndex=0;let e=[],r;for(;(r=Nb.exec(t))!==null;){let n=r[1];if(r[2]){let i=ZF(n,r[2]);e.push([n].concat(i))}else e.push([n])}return e}function Mb(t,e){let r={};for(let i of e)for(let s of i.styles)r[s[0]]=i.inverse?null:s.slice(1);let n=t;for(let[i,s]of Object.entries(r))if(!!Array.isArray(s)){if(!(i in n))throw new Error(`Unknown Chalk style: ${i}`);n=s.length>0?n[i](...s):n[i]}return n}Ub.exports=(t,e)=>{let r=[],n=[],i=[];if(e.replace(YF,(s,o,a,c,l,u)=>{if(o)i.push(jb(o));else if(c){let f=i.join("");i=[],n.push(r.length===0?f:Mb(t,r)(f)),r.push({inverse:a,styles:QF(c)})}else if(l){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(Mb(t,r)(i.join(""))),i=[],r.pop()}else i.push(u)}),n.push(i.join("")),r.length>0){let s=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(s)}return n.join("")}});var Kb=j((Qj,Yb)=>{"use strict";var no=Db(),{stdout:Jf,stderr:Xf}=ff(),{stringReplaceAll:ek,stringEncaseCRLFWithFirstIndex:tk}=$b(),{isArray:Pc}=Array,qb=["ansi","ansi","ansi256","ansi16m"],Vi=Object.create(null),rk=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=Jf?Jf.level:0;t.level=e.level===void 0?r:e.level},Hb=class{constructor(e){return zb(e)}},zb=t=>{let e={};return rk(e,t),e.template=(...r)=>Vb(e.template,...r),Object.setPrototypeOf(e,Ic.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=Hb,e.template};function Ic(t){return zb(t)}for(let[t,e]of Object.entries(no))Vi[t]={get(){let r=Oc(this,Zf(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:r}),r}};Vi.visible={get(){let t=Oc(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};var Wb=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let t of Wb)Vi[t]={get(){let{level:e}=this;return function(...r){let n=Zf(no.color[qb[e]][t](...r),no.color.close,this._styler);return Oc(this,n,this._isEmpty)}}};for(let t of Wb){let e="bg"+t[0].toUpperCase()+t.slice(1);Vi[e]={get(){let{level:r}=this;return function(...n){let i=Zf(no.bgColor[qb[r]][t](...n),no.bgColor.close,this._styler);return Oc(this,i,this._isEmpty)}}}}var nk=Object.defineProperties(()=>{},re(H({},Vi),{level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}})),Zf=(t,e,r)=>{let n,i;return r===void 0?(n=t,i=e):(n=r.openAll+t,i=e+r.closeAll),{open:t,close:e,openAll:n,closeAll:i,parent:r}},Oc=(t,e,r)=>{let n=(...i)=>Pc(i[0])&&Pc(i[0].raw)?Gb(n,Vb(n,...i)):Gb(n,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(n,nk),n._generator=t,n._styler=e,n._isEmpty=r,n},Gb=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let r=t._styler;if(r===void 0)return e;let{openAll:n,closeAll:i}=r;if(e.indexOf("")!==-1)for(;r!==void 0;)e=ek(e,r.close,r.open),r=r.parent;let s=e.indexOf(`
`);return s!==-1&&(e=tk(e,i,n,s)),n+e+i},Qf,Vb=(t,...e)=>{let[r]=e;if(!Pc(r)||!Pc(r.raw))return e.join(" ");let n=e.slice(1),i=[r.raw[0]];for(let s=1;s<r.length;s++)i.push(String(n[s-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[s]));return Qf===void 0&&(Qf=Bb()),Qf(t,i.join(""))};Object.defineProperties(Ic.prototype,Vi);var Ac=Ic();Ac.supportsColor=Jf;Ac.stderr=Ic({level:Xf?Xf.level:0});Ac.stderr.supportsColor=Xf;Yb.exports=Ac});UE(exports,{doExec:()=>Fc});var Ve=V(require("path"));var fo=V(require("assert"));"use strict";var qE={right:VE,center:YE},HE=0,so=1,zE=2,oo=3,dd=class{constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&gt.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),gt.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((s,o)=>({text:s.trim(),padding:this.measurePadding(s),width:o===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=gt.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let s="";n.forEach((o,a)=>{let{width:c}=e[a],l=this.negatePadding(e[a]),u=o;l>gt.stringWidth(o)&&(u+=" ".repeat(l-gt.stringWidth(o))),e[a].align&&e[a].align!=="left"&&this.wrap&&(u=qE[e[a].align](u,l),gt.stringWidth(u)<l&&(u+=" ".repeat((c||0)-gt.stringWidth(u)-1)));let f=e[a].padding||[0,0,0,0];f[oo]&&(s+=" ".repeat(f[oo])),s+=hd(e[a],u,"| "),s+=u,s+=hd(e[a],u," |"),f[so]&&(s+=" ".repeat(f[so])),i===0&&r.length>0&&(s=this.renderInline(s,r[r.length-1]))}),r.push({text:s.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,s=r.text,o=gt.stringWidth(s.trimRight());return r.span?this.wrap?i<o?e:(r.hidden=!0,s.trimRight()+" ".repeat(i-o)+e.trimLeft()):(r.hidden=!0,s+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((s,o)=>{s.width=n[o],this.wrap?i=gt.wrap(s.text,this.negatePadding(s),{hard:!0}).split(`
`):i=s.text.split(`
`),s.border&&(i.unshift("."+"-".repeat(this.negatePadding(s)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(s)+2)+"'")),s.padding&&(i.unshift(...new Array(s.padding[HE]||0).fill("")),i.push(...new Array(s.padding[zE]||0).fill(""))),i.forEach((a,c)=>{r[c]||r.push([]);let l=r[c];for(let u=0;u<o;u++)l[u]===void 0&&l.push("");l.push(a)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[oo]||0)+(e.padding[so]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(o=>o.width||gt.stringWidth(o.text));let r=e.length,n=this.width,i=e.map(o=>{if(o.width)return r--,n-=o.width,o.width}),s=r?Math.floor(n/r):0;return i.map((o,a)=>o===void 0?Math.max(s,WE(e[a])):o)}};function hd(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}function WE(t){let e=t.padding||[],r=1+(e[oo]||0)+(e[so]||0);return t.border?r+4:r}function GE(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function VE(t,e){t=t.trim();let r=gt.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}function YE(t,e){t=t.trim();let r=gt.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}var gt;function pd(t,e){return gt=e,new dd({width:(t==null?void 0:t.width)||GE(),wrap:t==null?void 0:t.wrap})}var md=new RegExp("(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function $c(t){return t.replace(md,"")}function gd(t,e){let[r,n]=t.match(md)||["",""];t=$c(t);let i="";for(let s=0;s<t.length;s++)s!==0&&s%e==0&&(i+=`
`),i+=t.charAt(s);return r&&n&&(i=`${r}${i}${n}`),i}function Nc(t){return pd(t,{stringWidth:e=>[...e].length,stripAnsi:$c,wrap:gd})}var Yn=V(require("path")),ao=V(require("fs"));function wd(t,e){let r=(0,Yn.resolve)(".",t),n;for((0,ao.statSync)(r).isDirectory()||(r=(0,Yn.dirname)(r));;){if(n=e(r,(0,ao.readdirSync)(r)),n)return(0,Yn.resolve)(r,n);if(r=(0,Yn.dirname)(n=r),n===r)break}}var _d=V(require("util")),Ld=V(require("fs")),Uc=V(require("url"));var bd=V(require("util")),Ed=V(require("fs")),uo=V(require("path"));function Qr(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLocaleLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let s=i?i[0].length:0;s<t.length;s++){let o=t.charAt(s);n&&(n=!1,o=o.toLocaleUpperCase()),s!==0&&(o==="-"||o==="_")?n=!0:o!=="-"&&o!=="_"&&(r+=o)}return r}}function co(t,e){let r=t.toLocaleLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let s=r.charAt(i),o=t.charAt(i);s!==o&&i>0?n+=`${e}${r.charAt(i)}`:n+=o}return n}function lo(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:t.length>1&&t[0]==="0"?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function yd(t){if(Array.isArray(t))return t.map(o=>typeof o!="string"?o+"":o);t=t.trim();let e=0,r=null,n=null,i=null,s=[];for(let o=0;o<t.length;o++){if(r=n,n=t.charAt(o),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),s[e]||(s[e]=""),s[e]+=n}return s}var dr,jc=class{constructor(e){dr=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=yd(e),s=KE(Object.assign(Object.create(null),n.alias)),o=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),a=Object.assign(Object.create(null),n.default),c=n.configObjects||[],l=n.envPrefix,u=o["populate--"],f=u?"--":"_",d=Object.create(null),h=Object.create(null),m=n.__||dr.format,p={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},w=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,y=new RegExp("^--"+o["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(x){let P=typeof x=="object"?x.key:x,q=Object.keys(x).map(function(O){return{boolean:"bools",string:"strings",number:"numbers"}[O]}).filter(Boolean).pop();q&&(p[q][P]=!0),p.arrays[P]=!0,p.keys.push(P)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(x){p.bools[x]=!0,p.keys.push(x)}),[].concat(n.string||[]).filter(Boolean).forEach(function(x){p.strings[x]=!0,p.keys.push(x)}),[].concat(n.number||[]).filter(Boolean).forEach(function(x){p.numbers[x]=!0,p.keys.push(x)}),[].concat(n.count||[]).filter(Boolean).forEach(function(x){p.counts[x]=!0,p.keys.push(x)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(x){p.normalize[x]=!0,p.keys.push(x)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([x,P])=>{typeof P=="number"&&(p.nargs[x]=P,p.keys.push(x))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([x,P])=>{typeof P=="function"&&(p.coercions[x]=P,p.keys.push(x))}),typeof n.config!="undefined"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(x){p.configs[x]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([x,P])=>{(typeof P=="boolean"||typeof P=="function")&&(p.configs[x]=P)})),ie(n.key,s,n.default,p.arrays),Object.keys(a).forEach(function(x){(p.aliases[x]||[]).forEach(function(P){a[P]=a[x]})});let v=null;Tc();let C=[],A=Object.assign(Object.create(null),{_:[]}),k={};for(let x=0;x<i.length;x++){let P=i[x],q,O,_,G,se,we;if(P!=="--"&&fe(P))T(P);else if(P.match(/---+(=|$)/)){T(P);continue}else if(P.match(/^--.+=/)||!o["short-option-groups"]&&P.match(/^-.+=/))G=P.match(/^--?([^=]+)=([\s\S]*)$/),G!==null&&Array.isArray(G)&&G.length>=3&&(W(G[1],p.arrays)?x=D(x,G[1],i,G[2]):W(G[1],p.nargs)!==!1?x=N(x,G[1],i,G[2]):U(G[1],G[2]));else if(P.match(y)&&o["boolean-negation"])G=P.match(y),G!==null&&Array.isArray(G)&&G.length>=2&&(O=G[1],U(O,W(O,p.arrays)?[!1]:!1));else if(P.match(/^--.+/)||!o["short-option-groups"]&&P.match(/^-[^-]+/))G=P.match(/^--?(.+)/),G!==null&&Array.isArray(G)&&G.length>=2&&(O=G[1],W(O,p.arrays)?x=D(x,O,i):W(O,p.nargs)!==!1?x=N(x,O,i):(se=i[x+1],se!==void 0&&(!se.match(/^-/)||se.match(w))&&!W(O,p.bools)&&!W(O,p.counts)||/^(true|false)$/.test(se)?(U(O,se),x++):U(O,he(O))));else if(P.match(/^-.\..+=/))G=P.match(/^-([^=]+)=([\s\S]*)$/),G!==null&&Array.isArray(G)&&G.length>=3&&U(G[1],G[2]);else if(P.match(/^-.\..+/)&&!P.match(w))se=i[x+1],G=P.match(/^-(.\..+)/),G!==null&&Array.isArray(G)&&G.length>=2&&(O=G[1],se!==void 0&&!se.match(/^-/)&&!W(O,p.bools)&&!W(O,p.counts)?(U(O,se),x++):U(O,he(O)));else if(P.match(/^-[^-]+/)&&!P.match(w)){_=P.slice(1,-1).split(""),q=!1;for(let ge=0;ge<_.length;ge++){if(se=P.slice(ge+2),_[ge+1]&&_[ge+1]==="="){we=P.slice(ge+3),O=_[ge],W(O,p.arrays)?x=D(x,O,i,we):W(O,p.nargs)!==!1?x=N(x,O,i,we):U(O,we),q=!0;break}if(se==="-"){U(_[ge],se);continue}if(/[A-Za-z]/.test(_[ge])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(se)&&W(se,p.bools)===!1){U(_[ge],se),q=!0;break}if(_[ge+1]&&_[ge+1].match(/\W/)){U(_[ge],se),q=!0;break}else U(_[ge],he(_[ge]))}O=P.slice(-1)[0],!q&&O!=="-"&&(W(O,p.arrays)?x=D(x,O,i):W(O,p.nargs)!==!1?x=N(x,O,i):(se=i[x+1],se!==void 0&&(!/^(-|--)[^-]/.test(se)||se.match(w))&&!W(O,p.bools)&&!W(O,p.counts)||/^(true|false)$/.test(se)?(U(O,se),x++):U(O,he(O))))}else if(P.match(/^-[0-9]$/)&&P.match(w)&&W(P.slice(1),p.bools))O=P.slice(1),U(O,he(O));else if(P==="--"){C=i.slice(x+1);break}else if(o["halt-at-non-option"]){C=i.slice(x);break}else T(P)}B(A,!0),B(A,!1),M(A),F(),I(A,p.aliases,a,!0),b(A),o["set-placeholder-key"]&&E(A),Object.keys(p.counts).forEach(function(x){R(A,x.split("."))||U(x,0)}),u&&C.length&&(A[f]=[]),C.forEach(function(x){A[f].push(x)}),o["camel-case-expansion"]&&o["strip-dashed"]&&Object.keys(A).filter(x=>x!=="--"&&x.includes("-")).forEach(x=>{delete A[x]}),o["strip-aliased"]&&[].concat(...Object.keys(s).map(x=>s[x])).forEach(x=>{o["camel-case-expansion"]&&x.includes("-")&&delete A[x.split(".").map(P=>Qr(P)).join(".")],delete A[x]});function T(x){let P=L("_",x);(typeof P=="string"||typeof P=="number")&&A._.push(P)}function N(x,P,q,O){let _,G=W(P,p.nargs);if(G=typeof G!="number"||isNaN(G)?1:G,G===0)return Te(O)||(v=Error(m("Argument unexpected for: %s",P))),U(P,he(P)),x;let se=Te(O)?0:1;if(o["nargs-eats-options"])q.length-(x+1)+se<G&&(v=Error(m("Not enough arguments following: %s",P))),se=G;else{for(_=x+1;_<q.length&&(!q[_].match(/^-[^0-9]/)||q[_].match(w)||fe(q[_]));_++)se++;se<G&&(v=Error(m("Not enough arguments following: %s",P)))}let we=Math.min(se,G);for(!Te(O)&&we>0&&(U(P,O),we--),_=x+1;_<we+x+1;_++)U(P,q[_]);return x+we}function D(x,P,q,O){let _=[],G=O||q[x+1],se=W(P,p.nargs);if(W(P,p.bools)&&!/^(true|false)$/.test(G))_.push(!0);else if(Te(G)||Te(O)&&/^-/.test(G)&&!w.test(G)&&!fe(G)){if(a[P]!==void 0){let we=a[P];_=Array.isArray(we)?we:[we]}}else{Te(O)||_.push($(P,O));for(let we=x+1;we<q.length&&!(!o["greedy-arrays"]&&_.length>0||se&&typeof se=="number"&&_.length>=se||(G=q[we],/^-/.test(G)&&!w.test(G)&&!fe(G)));we++)x=we,_.push($(P,G))}return typeof se=="number"&&(se&&_.length<se||isNaN(se)&&_.length===0)&&(v=Error(m("Not enough arguments following: %s",P))),U(P,_),x}function U(x,P){if(/-/.test(x)&&o["camel-case-expansion"]){let _=x.split(".").map(function(G){return Qr(G)}).join(".");Y(x,_)}let q=$(x,P),O=x.split(".");K(A,O,q),p.aliases[x]&&p.aliases[x].forEach(function(_){let G=_.split(".");K(A,G,q)}),O.length>1&&o["dot-notation"]&&(p.aliases[O[0]]||[]).forEach(function(_){let G=_.split("."),se=[].concat(O);se.shift(),G=G.concat(se),(p.aliases[x]||[]).includes(G.join("."))||K(A,G,q)}),W(x,p.normalize)&&!W(x,p.arrays)&&[x].concat(p.aliases[x]||[]).forEach(function(G){Object.defineProperty(k,G,{enumerable:!0,get(){return P},set(se){P=typeof se=="string"?dr.normalize(se):se}})})}function Y(x,P){p.aliases[x]&&p.aliases[x].length||(p.aliases[x]=[P],d[P]=!0),p.aliases[P]&&p.aliases[P].length||Y(P,x)}function $(x,P){typeof P=="string"&&(P[0]==="'"||P[0]==='"')&&P[P.length-1]===P[0]&&(P=P.substring(1,P.length-1)),(W(x,p.bools)||W(x,p.counts))&&typeof P=="string"&&(P=P==="true");let q=Array.isArray(P)?P.map(function(O){return L(x,O)}):L(x,P);return W(x,p.counts)&&(Te(q)||typeof q=="boolean")&&(q=Mc()),W(x,p.normalize)&&W(x,p.arrays)&&(Array.isArray(P)?q=P.map(O=>dr.normalize(O)):q=dr.normalize(P)),q}function L(x,P){return!o["parse-positional-numbers"]&&x==="_"||!W(x,p.strings)&&!W(x,p.bools)&&!Array.isArray(P)&&(lo(P)&&o["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${P}`)))||!Te(P)&&W(x,p.numbers))&&(P=Number(P)),P}function M(x){let P=Object.create(null);I(P,p.aliases,a),Object.keys(p.configs).forEach(function(q){let O=x[q]||P[q];if(O)try{let _=null,G=dr.resolve(dr.cwd(),O),se=p.configs[q];if(typeof se=="function"){try{_=se(G)}catch(we){_=we}if(_ instanceof Error){v=_;return}}else _=dr.require(G);z(_)}catch(_){_.name==="PermissionDenied"?v=_:x[q]&&(v=Error(m("Invalid JSON config file: %s",O)))}})}function z(x,P){Object.keys(x).forEach(function(q){let O=x[q],_=P?P+"."+q:q;typeof O=="object"&&O!==null&&!Array.isArray(O)&&o["dot-notation"]?z(O,_):(!R(A,_.split("."))||W(_,p.arrays)&&o["combine-arrays"])&&U(_,O)})}function F(){typeof c!="undefined"&&c.forEach(function(x){z(x)})}function B(x,P){if(typeof l=="undefined")return;let q=typeof l=="string"?l:"",O=dr.env();Object.keys(O).forEach(function(_){if(q===""||_.lastIndexOf(q,0)===0){let G=_.split("__").map(function(se,we){return we===0&&(se=se.substring(q.length)),Qr(se)});(P&&p.configs[G.join(".")]||!P)&&!R(x,G)&&U(G.join("."),O[_])}})}function b(x){let P,q=new Set;Object.keys(x).forEach(function(O){if(!q.has(O)&&(P=W(O,p.coercions),typeof P=="function"))try{let _=L(O,P(x[O]));[].concat(p.aliases[O]||[],O).forEach(G=>{q.add(G),x[G]=_})}catch(_){v=_}})}function E(x){return p.keys.forEach(P=>{~P.indexOf(".")||typeof x[P]=="undefined"&&(x[P]=void 0)}),x}function I(x,P,q,O=!1){Object.keys(q).forEach(function(_){R(x,_.split("."))||(K(x,_.split("."),q[_]),O&&(h[_]=!0),(P[_]||[]).forEach(function(G){R(x,G.split("."))||K(x,G.split("."),q[_])}))})}function R(x,P){let q=x;o["dot-notation"]||(P=[P.join(".")]),P.slice(0,-1).forEach(function(_){q=q[_]||{}});let O=P[P.length-1];return typeof q!="object"?!1:O in q}function K(x,P,q){let O=x;o["dot-notation"]||(P=[P.join(".")]),P.slice(0,-1).forEach(function(ge){ge=vd(ge),typeof O=="object"&&O[ge]===void 0&&(O[ge]={}),typeof O[ge]!="object"||Array.isArray(O[ge])?(Array.isArray(O[ge])?O[ge].push({}):O[ge]=[O[ge],{}],O=O[ge][O[ge].length-1]):O=O[ge]});let _=vd(P[P.length-1]),G=W(P.join("."),p.arrays),se=Array.isArray(q),we=o["duplicate-arguments-array"];!we&&W(_,p.nargs)&&(we=!0,(!Te(O[_])&&p.nargs[_]===1||Array.isArray(O[_])&&O[_].length===p.nargs[_])&&(O[_]=void 0)),q===Mc()?O[_]=Mc(O[_]):Array.isArray(O[_])?we&&G&&se?O[_]=o["flatten-duplicate-arrays"]?O[_].concat(q):(Array.isArray(O[_][0])?O[_]:[O[_]]).concat([q]):!we&&Boolean(G)===Boolean(se)?O[_]=q:O[_]=O[_].concat([q]):O[_]===void 0&&G?O[_]=se?q:[q]:we&&!(O[_]===void 0||W(_,p.counts)||W(_,p.bools))?O[_]=[O[_],q]:O[_]=q}function ie(...x){x.forEach(function(P){Object.keys(P||{}).forEach(function(q){p.aliases[q]||(p.aliases[q]=[].concat(s[q]||[]),p.aliases[q].concat(q).forEach(function(O){if(/-/.test(O)&&o["camel-case-expansion"]){let _=Qr(O);_!==q&&p.aliases[q].indexOf(_)===-1&&(p.aliases[q].push(_),d[_]=!0)}}),p.aliases[q].concat(q).forEach(function(O){if(O.length>1&&/[A-Z]/.test(O)&&o["camel-case-expansion"]){let _=co(O,"-");_!==q&&p.aliases[q].indexOf(_)===-1&&(p.aliases[q].push(_),d[_]=!0)}}),p.aliases[q].forEach(function(O){p.aliases[O]=[q].concat(p.aliases[q].filter(function(_){return O!==_}))}))})})}function W(x,P){let q=[].concat(p.aliases[x]||[],x),O=Object.keys(P),_=q.find(G=>O.includes(G));return _?P[_]:!1}function ke(x){let P=Object.keys(p);return[].concat(P.map(O=>p[O])).some(function(O){return Array.isArray(O)?O.includes(x):O[x]})}function _e(x,...P){return[].concat(...P).some(function(O){let _=x.match(O);return _&&ke(_[1])})}function J(x){if(x.match(w)||!x.match(/^-[^-]+/))return!1;let P=!0,q,O=x.slice(1).split("");for(let _=0;_<O.length;_++){if(q=x.slice(_+2),!ke(O[_])){P=!1;break}if(O[_+1]&&O[_+1]==="="||q==="-"||/[A-Za-z]/.test(O[_])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(q)||O[_+1]&&O[_+1].match(/\W/))break}return P}function fe(x){return o["unknown-options-as-args"]&&de(x)}function de(x){return x.match(w)||J(x)?!1:!_e(x,/^-+([^=]+?)=[\s\S]*$/,y,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function he(x){return!W(x,p.bools)&&!W(x,p.counts)&&`${x}`in a?a[x]:Le(ot(x))}function Le(x){return{boolean:!0,string:"",number:void 0,array:[]}[x]}function ot(x){let P="boolean";return W(x,p.strings)?P="string":W(x,p.numbers)?P="number":W(x,p.bools)?P="boolean":W(x,p.arrays)&&(P="array"),P}function Te(x){return x===void 0}function Tc(){Object.keys(p.counts).find(x=>W(x,p.arrays)?(v=Error(m("Invalid configuration: %s, opts.count excludes opts.array.",x)),!0):W(x,p.nargs)?(v=Error(m("Invalid configuration: %s, opts.count excludes opts.narg.",x)),!0):!1)}return{aliases:Object.assign({},p.aliases),argv:Object.assign(k,A),configuration:o,defaulted:Object.assign({},h),error:v,newAliases:Object.assign({},d)}}};function KE(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)if(e[i].filter(function(a){return e[s].indexOf(a)!==-1}).length){e[i]=e[i].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(o,a,c){return c.indexOf(o)===a});let s=i.pop();s!==void 0&&typeof s=="string"&&(r[s]=i)}),r}function Mc(t){return t!==void 0?t+1:1}function vd(t){return t==="__proto__"?"___proto___":t}var Cd=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):10;if(process&&process.version&&Number(process.version.match(/v([^.]+)/)[1])<Cd)throw Error(`yargs parser supports a minimum Node.js version of ${Cd}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var JE=process?process.env:{},xd=new jc({cwd:process.cwd,env:()=>JE,format:bd.format,normalize:uo.normalize,resolve:uo.resolve,require:t=>{if(typeof require!="undefined")return require(t);if(t.match(/\.json$/))return(0,Ed.readFileSync)(t,"utf8");throw Error("only .json config files are supported in ESM")}}),Zi=function(e,r){return xd.parse(e.slice(),r).argv};Zi.detailed=function(t,e){return xd.parse(t.slice(),e)};Zi.camelCase=Qr;Zi.decamelize=co;Zi.looksLikeNumber=lo;var Sd=Zi;var Wt=V(require("path"));function XE(){return ZE()?0:1}function ZE(){return QE()&&!process.defaultApp}function QE(){return!!process.versions.electron}function Pd(){return process.argv[XE()]}var be=class extends Error{constructor(e){super(e||"yargs error");this.name="YError",Error.captureStackTrace(this,be)}};var Kn=V(require("fs")),Id=V(require("util")),Od=V(require("path")),Ad={fs:{readFileSync:Kn.readFileSync,writeFile:Kn.writeFile},format:Id.format,resolve:Od.resolve,exists:t=>{try{return(0,Kn.statSync)(t).isFile()}catch{return!1}}};var zt,Rd=class{constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=function(){};return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),zt.format.apply(zt.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),s=function(){};typeof e[e.length-1]=="function"&&(s=e.pop()),this.cache[this.locale]||this._readLocaleFile();let o=i===1?r:n;this.cache[this.locale][r]&&(o=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s();let a=[o];return~o.indexOf("%d")&&a.push(i),zt.format.apply(zt.format,a.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,s){let o=r[s+1];n+=i,typeof o!="undefined"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,s=r.cb,o=this._resolveLocaleFile(n,i),a=JSON.stringify(this.cache[i],null,2);zt.fs.writeFile(o,a,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),s(c)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{zt.fs.readFileSync&&(e=JSON.parse(zt.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=zt.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=zt.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return zt.exists(e)}};function Fd(t,e){zt=e;let r=new Rd(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}var eC=t=>Fd(t,Ad),kd=eC;"use strict";var tC="require is not supported by ESM",Dd="loading a directory of commands is not supported yet for ESM",rC=(0,Uc.fileURLToPath)("file:///c%3A/mnt/vss/_work/1/s/node_modules/yargs/lib/platform-shims/esm.mjs").split("node_modules")[0],nC=(0,Uc.fileURLToPath)("file:///c%3A/mnt/vss/_work/1/s/node_modules/yargs/lib/platform-shims/esm.mjs"),Td={assert:{notStrictEqual:fo.notStrictEqual,strictEqual:fo.strictEqual},cliui:Nc,findUp:wd,getEnv:t=>process.env[t],inspect:_d.inspect,getCallerFile:()=>{throw new be(Dd)},getProcessArgvBin:Pd,mainFilename:rC||process.cwd(),Parser:Sd,path:{basename:Wt.basename,dirname:Wt.dirname,extname:Wt.extname,relative:Wt.relative,resolve:Wt.resolve},process:{argv:()=>process.argv,cwd:process.cwd,execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns!="undefined"?process.stdout.columns:null},readFileSync:Ld.readFileSync,require:()=>{throw new be(tC)},requireDirectory:()=>{throw new be(Dd)},stringWidth:t=>[...t].length,y18n:kd({directory:(0,Wt.resolve)(nC,"../../../locales"),updateFiles:!1})};function tt(t,e,r,n){r.assert.notStrictEqual(t,e,n)}function Bc(t,e){e.assert.strictEqual(typeof t,"string")}function Jn(t){return Object.keys(t)}function xe(t){return!!t&&!!t.then&&typeof t.then=="function"}function Ar(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let s={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((o,a)=>{let c=!1;o=o.replace(/\s/g,""),/\.+[\]>]/.test(o)&&a===r.length-1&&(c=!0),/^\[/.test(o)?s.optional.push({cmd:o.replace(n,"").split("|"),variadic:c}):s.demanded.push({cmd:o.replace(n,"").split("|"),variadic:c})}),s}var iC=["first","second","third","fourth","fifth","sixth"];function X(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[Ar(`cmd ${t}`),e,r]}try{let i=0,[s,o,a]=n(),c=[].slice.call(o);for(;c.length&&c[c.length-1]===void 0;)c.pop();let l=a||c.length;if(l<s.demanded.length)throw new be(`Not enough arguments provided. Expected ${s.demanded.length} but received ${c.length}.`);let u=s.demanded.length+s.optional.length;if(l>u)throw new be(`Too many arguments provided. Expected max ${u} but received ${l}.`);s.demanded.forEach(f=>{let d=c.shift(),h=$d(d);f.cmd.filter(p=>p===h||p==="*").length===0&&Nd(h,f.cmd,i),i+=1}),s.optional.forEach(f=>{if(c.length===0)return;let d=c.shift(),h=$d(d);f.cmd.filter(p=>p===h||p==="*").length===0&&Nd(h,f.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}function $d(t){return Array.isArray(t)?"array":t===null?"null":typeof t}function Nd(t,e,r){throw new be(`Invalid ${iC[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}var qc=class{constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0){if(X("<array|function> [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let i=0;i<e.length;i++){if(typeof e[i]!="function")throw Error("middleware must be a function");let s=e[i];s.applyBeforeValidation=r,s.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let i=e;i.applyBeforeValidation=r,i.global=n,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let s=[...n[r]||[],r];return i.option?!s.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function jd(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}function en(t,e,r,n){return r.reduce((i,s)=>{if(s.applyBeforeValidation!==n)return i;if(xe(i))return i.then(o=>Promise.all([o,s(o,e)])).then(([o,a])=>Object.assign(o,a));{let o=s(i,e);return xe(o)?o.then(a=>Object.assign(i,a)):Object.assign(i,o)}},t)}function tn(t,e,r=n=>{throw n}){try{let n=sC(t)?t():t;return xe(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}function sC(t){return typeof t=="function"}function Hc(t){if(typeof require=="undefined")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}var Xn=/(^\*)|(^\$0)/,Md=class{constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let s=typeof i.visit=="function"?i.visit:o=>o;i.visit=(o,a,c)=>{let l=s(o,a,c);if(l){if(this.requireCache.has(a))return l;this.requireCache.add(a),this.addHandler(l)}return l},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,s,o){let a=[],c=jd(s);if(i=i||(()=>{}),Array.isArray(e))if(oC(e))[e,...a]=e;else for(let l of e)this.addHandler(l);else if(cC(e)){let l=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(l=[].concat(l).concat(e.aliases)),this.addHandler(l,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(Bd(n)){this.addHandler([e].concat(a),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let l=Ar(e);a=a.map(d=>Ar(d).cmd);let u=!1,f=[l.cmd].concat(a).filter(d=>Xn.test(d)?(u=!0,!1):!0);f.length===0&&u&&f.push("$0"),u&&(l.cmd=f[0],a=f.slice(1),e=e.replace(Xn,l.cmd)),a.forEach(d=>{this.aliasMap[d]=l.cmd}),r!==!1&&this.usage.command(e,r,u,a,o),this.handlers[l.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:c,deprecated:o,demanded:l.demanded,optional:l.optional},u&&(this.defaultCommand=this.handlers[l.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,s,o){let a=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=r.getInternalMethods().getContext(),l=c.commands.slice(),u=!e;e&&(c.commands.push(e),c.fullCommands.push(a.original));let f=this.applyBuilderUpdateUsageAndParse(u,a,r,n.aliases,l,i,s,o);return xe(f)?f.then(d=>this.applyMiddlewareAndGetResult(u,a,d.innerArgv,c,s,d.aliases,r)):this.applyMiddlewareAndGetResult(u,a,f.innerArgv,c,s,f.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,s,o,a,c){let l=r.builder,u=n;if(ho(l)){let f=l(n.getInternalMethods().reset(i),c);if(xe(f))return f.then(d=>(u=qd(d)?d:n,this.parseAndUpdateUsage(e,r,u,s,o,a)))}else aC(l)&&(u=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(f=>{u.option(f,l[f])}));return this.parseAndUpdateUsage(e,r,u,s,o,a)}parseAndUpdateUsage(e,r,n,i,s,o){e&&n.getInternalMethods().getUsageInstance().unfreeze(),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let a=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,s,o);return xe(a)?a.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:a}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=Xn.test(r.original)?r.original.replace(Xn,"").trim():r.original,i=e.filter(s=>!Xn.test(s));return i.push(n),`$0 ${i.join(" ")}`}applyMiddlewareAndGetResult(e,r,n,i,s,o,a){let c={};if(s)return n;a.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,a));let l=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares);if(n=en(n,a,l,!0),!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);n=tn(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=en(n,a,l,!1),n=tn(n,f=>{let d=r.handler(f);return xe(d)?d.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),xe(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let s=e.demanded.slice(0),o=e.optional.slice(0),a={};for(this.validation.positionalCount(s.length,r._.length);s.length;){let c=s.shift();this.populatePositional(c,r,a)}for(;o.length;){let c=o.shift();this.populatePositional(c,r,a)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,a,this.cmdToParseOptions(e.original),i),a}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=Ar(e);return n.demanded.forEach(i=>{let[s,...o]=i.cmd;i.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=o,r.demand[s]=!0}),n.optional.forEach(i=>{let[s,...o]=i.cmd;i.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=o}),r}postProcessPositionals(e,r,n,i){let s=Object.assign({},i.getOptions());s.default=Object.assign(n.default,s.default);for(let l of Object.keys(n.alias))s.alias[l]=(s.alias[l]||[]).concat(n.alias[l]);s.array=s.array.concat(n.array),s.config={};let o=[];if(Object.keys(r).forEach(l=>{r[l].map(u=>{s.configuration["unknown-options-as-args"]&&(s.key[l]=!0),o.push(`--${l}`),o.push(u)})}),!o.length)return;let a=Object.assign({},s.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(o,Object.assign({},s,{configuration:a}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let l=Object.keys(r);Object.keys(r).forEach(u=>{l.push(...c.aliases[u])}),Object.keys(c.argv).forEach(u=>{l.indexOf(u)!==-1&&(r[u]||(r[u]=c.argv[u]),e[u]=c.argv[u])})}}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=Xn.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(ho(r))return r(e,!0);Bd(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=Hc(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;tt(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();tt(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Ud(t,e,r,n){return new Md(t,e,r,n)}function Bd(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}function oC(t){return t.every(e=>typeof e=="string")}function ho(t){return typeof t=="function"}function aC(t){return typeof t=="object"}function cC(t){return typeof t=="object"&&!Array.isArray(t)}function Rr(t={},e=()=>!0){let r={};return Jn(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}function Fr(t){typeof process!="undefined"&&[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}function lC(t){return typeof t=="boolean"}function Hd(t,e){let r=e.y18n.__,n={},i=[];n.failFn=function(L){i.push(L)};let s=null,o=!0;n.showHelpOnFail=function(L=!0,M){function z(){return typeof L=="string"?[!0,L]:[L,M]}let[F,B]=z();return s=B,o=F,n};let a=!1;n.fail=function(L,M){let z=t.getInternalMethods().getLoggerInstance();if(i.length)for(let F=i.length-1;F>=0;--F){let B=i[F];if(lC(B)){if(M)throw M;if(L)throw Error(L)}else B(L,M,n)}else{if(t.getExitProcess()&&Fr(!0),a||(a=!0,o&&(t.showHelp("error"),z.error()),(L||M)&&z.error(L||M),s&&((L||M)&&z.error(""),z.error(s))),M=M||new be(L),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,M);throw M}};let c=[],l=!1;n.usage=($,L)=>$===null?(l=!0,c=[],n):(l=!1,c.push([$,L||""]),n),n.getUsage=()=>c,n.getUsageDisabled=()=>l,n.getPositionalGroupName=()=>r("Positionals:");let u=[];n.example=($,L)=>{u.push([$,L||""])};let f=[];n.command=function(L,M,z,F,B=!1){z&&(f=f.map(b=>(b[2]=!1,b))),f.push([L,M||"",z,F,B])},n.getCommands=()=>f;let d={};n.describe=function(L,M){Array.isArray(L)?L.forEach(z=>{n.describe(z,M)}):typeof L=="object"?Object.keys(L).forEach(z=>{n.describe(z,L[z])}):d[L]=M},n.getDescriptions=()=>d;let h=[];n.epilog=$=>{h.push($)};let m=!1,p;n.wrap=$=>{m=!0,p=$};function w(){return m||(p=D(),m=!0),p}let y="__yargsString__:";n.deferY18nLookup=$=>y+$,n.help=function(){if(A)return A;C();let L=t.customScriptName?t.$0:e.path.basename(t.$0),M=t.getDemandedOptions(),z=t.getDemandedCommands(),F=t.getDeprecatedOptions(),B=t.getGroups(),b=t.getOptions(),E=[];E=E.concat(Object.keys(d)),E=E.concat(Object.keys(M)),E=E.concat(Object.keys(z)),E=E.concat(Object.keys(b.default)),E=E.filter(T),E=Object.keys(E.reduce((J,fe)=>(fe!=="_"&&(J[fe]=!0),J),{}));let I=w(),R=e.cliui({width:I,wrap:!!I});if(!l){if(c.length)c.forEach(J=>{R.div(`${J[0].replace(/\$0/g,L)}`),J[1]&&R.div({text:`${J[1]}`,padding:[1,0,0,0]})}),R.div();else if(f.length){let J=null;z._?J=`${L} <${r("command")}>
`:J=`${L} [${r("command")}]
`,R.div(`${J}`)}}if(f.length>1||f.length===1&&!f[0][2]){R.div(r("Commands:"));let J=t.getInternalMethods().getContext(),fe=J.commands.length?`${J.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(f=f.sort((de,he)=>de[0].localeCompare(he[0]))),f.forEach(de=>{let he=`${L} ${fe}${de[0].replace(/^\$0 ?/,"")}`;R.span({text:he,padding:[0,2,0,2],width:v(f,I,`${L}${fe}`)+4},{text:de[1]});let Le=[];de[2]&&Le.push(`[${r("default")}]`),de[3]&&de[3].length&&Le.push(`[${r("aliases:")} ${de[3].join(", ")}]`),de[4]&&(typeof de[4]=="string"?Le.push(`[${r("deprecated: %s",de[4])}]`):Le.push(`[${r("deprecated")}]`)),Le.length?R.div({text:Le.join(" "),padding:[0,0,0,2],align:"right"}):R.div()}),R.div()}let K=(Object.keys(b.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);E=E.filter(J=>!t.parsed.newAliases[J]&&K.every(fe=>(b.alias[fe]||[]).indexOf(J)===-1));let ie=r("Options:");B[ie]||(B[ie]=[]),k(E,b.alias,B,ie);let W=J=>/^--/.test(po(J)),ke=Object.keys(B).filter(J=>B[J].length>0).map(J=>{let fe=B[J].filter(T).map(de=>{if(~K.indexOf(de))return de;for(let he=0,Le;(Le=K[he])!==void 0;he++)if(~(b.alias[Le]||[]).indexOf(de))return Le;return de});return{groupName:J,normalizedKeys:fe}}).filter(({normalizedKeys:J})=>J.length>0).map(({groupName:J,normalizedKeys:fe})=>{let de=fe.reduce((he,Le)=>(he[Le]=[Le].concat(b.alias[Le]||[]).map(ot=>J===n.getPositionalGroupName()?ot:(/^[0-9]$/.test(ot)?~b.boolean.indexOf(Le)?"-":"--":ot.length>1?"--":"-")+ot).sort((ot,Te)=>W(ot)===W(Te)?0:W(ot)?1:-1).join(", "),he),{});return{groupName:J,normalizedKeys:fe,switches:de}});if(ke.filter(({groupName:J})=>J!==n.getPositionalGroupName()).some(({normalizedKeys:J,switches:fe})=>!J.every(de=>W(fe[de])))&&ke.filter(({groupName:J})=>J!==n.getPositionalGroupName()).forEach(({normalizedKeys:J,switches:fe})=>{J.forEach(de=>{W(fe[de])&&(fe[de]=uC(fe[de],"-x, ".length))})}),ke.forEach(({groupName:J,normalizedKeys:fe,switches:de})=>{R.div(J),fe.forEach(he=>{let Le=de[he],ot=d[he]||"",Te=null;~ot.lastIndexOf(y)&&(ot=r(ot.substring(y.length))),~b.boolean.indexOf(he)&&(Te=`[${r("boolean")}]`),~b.count.indexOf(he)&&(Te=`[${r("count")}]`),~b.string.indexOf(he)&&(Te=`[${r("string")}]`),~b.normalize.indexOf(he)&&(Te=`[${r("string")}]`),~b.array.indexOf(he)&&(Te=`[${r("array")}]`),~b.number.indexOf(he)&&(Te=`[${r("number")}]`);let Tc=P=>typeof P=="string"?`[${r("deprecated: %s",P)}]`:`[${r("deprecated")}]`,x=[he in F?Tc(F[he]):null,Te,he in M?`[${r("required")}]`:null,b.choices&&b.choices[he]?`[${r("choices:")} ${n.stringifiedValues(b.choices[he])}]`:null,N(b.default[he],b.defaultDescription[he])].filter(Boolean).join(" ");R.span({text:po(Le),padding:[0,2,0,2+zd(Le)],width:v(de,I)+4},ot),x?R.div({text:x,padding:[0,0,0,2],align:"right"}):R.div()}),R.div()}),u.length&&(R.div(r("Examples:")),u.forEach(J=>{J[0]=J[0].replace(/\$0/g,L)}),u.forEach(J=>{J[1]===""?R.div({text:J[0],padding:[0,2,0,2]}):R.div({text:J[0],padding:[0,2,0,2],width:v(u,I)+4},{text:J[1]})}),R.div()),h.length>0){let J=h.map(fe=>fe.replace(/\$0/g,L)).join(`
`);R.div(`${J}
`)}return R.toString().replace(/\s*$/,"")};function v($,L,M){let z=0;return Array.isArray($)||($=Object.values($).map(F=>[F])),$.forEach(F=>{z=Math.max(e.stringWidth(M?`${M} ${po(F[0])}`:po(F[0]))+zd(F[0]),z)}),L&&(z=Math.min(z,parseInt((L*.5).toString(),10))),z}function C(){let $=t.getDemandedOptions(),L=t.getOptions();(Object.keys(L.alias)||[]).forEach(M=>{L.alias[M].forEach(z=>{d[z]&&n.describe(M,d[z]),z in $&&t.demandOption(M,$[z]),~L.boolean.indexOf(z)&&t.boolean(M),~L.count.indexOf(z)&&t.count(M),~L.string.indexOf(z)&&t.string(M),~L.normalize.indexOf(z)&&t.normalize(M),~L.array.indexOf(z)&&t.array(M),~L.number.indexOf(z)&&t.number(M)})})}let A;n.cacheHelpMessage=function(){A=this.help()},n.clearCachedHelpMessage=function(){A=void 0},n.hasCachedHelpMessage=function(){return!!A};function k($,L,M,z){let F=[],B=null;return Object.keys(M).forEach(b=>{F=F.concat(M[b])}),$.forEach(b=>{B=[b].concat(L[b]),B.some(E=>F.indexOf(E)!==-1)||M[z].push(b)}),F}function T($){return t.getOptions().hiddenOptions.indexOf($)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}n.showHelp=$=>{let L=t.getInternalMethods().getLoggerInstance();$||($="error"),(typeof $=="function"?$:L[$])(n.help())},n.functionDescription=$=>{let L=$.name?e.Parser.decamelize($.name,"-"):r("generated-value");return["(",L,")"].join("")},n.stringifiedValues=function(L,M){let z="",F=M||", ",B=[].concat(L);return!L||!B.length||B.forEach(b=>{z.length&&(z+=F),z+=JSON.stringify(b)}),z};function N($,L){let M=`[${r("default:")} `;if($===void 0&&!L)return null;if(L)M+=L;else switch(typeof $){case"string":M+=`"${$}"`;break;case"object":M+=JSON.stringify($);break;default:M+=$}return`${M}]`}function D(){let $=80;return e.process.stdColumns?Math.min($,e.process.stdColumns):$}let U=null;n.version=$=>{U=$},n.showVersion=$=>{let L=t.getInternalMethods().getLoggerInstance();$||($="error"),(typeof $=="function"?$:L[$])(U)},n.reset=function(L){return s=null,a=!1,c=[],l=!1,h=[],u=[],f=[],d=Rr(d,M=>!L[M]),n};let Y=[];return n.freeze=function(){Y.push({failMessage:s,failureOutput:a,usages:c,usageDisabled:l,epilogs:h,examples:u,commands:f,descriptions:d})},n.unfreeze=function(){let L=Y.pop();!L||({failMessage:s,failureOutput:a,usages:c,usageDisabled:l,epilogs:h,examples:u,commands:f,descriptions:d}=L)},n}function zc(t){return typeof t=="object"}function uC(t,e){return zc(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}function zd(t){return zc(t)?t.indentation:0}function po(t){return zc(t)?t.text:t}var Wd=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Gd=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zsh_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Vd=class{constructor(e,r,n,i){var s,o,a;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.zshShell=(a=((s=this.shim.getEnv("SHELL"))===null||s===void 0?void 0:s.includes("zsh"))||((o=this.shim.getEnv("ZSH_NAME"))===null||o===void 0?void 0:o.includes("zsh")))!==null&&a!==void 0?a:!1}defaultCompletion(e,r,n,i){let s=this.command.getCommandHandlers();for(let a=0,c=e.length;a<c;++a)if(s[e[a]]&&s[e[a]].builder){let l=s[e[a]].builder;if(ho(l)){let u=this.yargs.getInternalMethods().reset();return l(u,!0),u.argv}}let o=[];this.commandCompletions(o,e,n),this.optionCompletions(o,e,r,n),i(null,o)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&this.usage.getCommands().forEach(s=>{let o=Ar(s[0]).cmd;if(r.indexOf(o)===-1)if(!this.zshShell)e.push(o);else{let a=s[1]||"";e.push(o.replace(/:/g,"\\:")+":"+a)}})}optionCompletions(e,r,n,i){if(i.match(/^-/)||i===""&&e.length===0){let s=this.yargs.getOptions(),o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(s.key).forEach(a=>{let c=!!s.configuration["boolean-negation"]&&s.boolean.includes(a);!o.includes(a)&&!this.argsContainKey(r,n,a,c)&&(this.completeOptionKey(a,e,i),c&&!!s.default[a]&&this.completeOptionKey(`no-${a}`,e,i))})}}argsContainKey(e,r,n,i){if(e.indexOf(`--${n}`)!==-1||i&&e.indexOf(`--no-${n}`)!==-1)return!0;if(this.aliases){for(let s of this.aliases[n])if(r[s]!==void 0)return!0}return!1}completeOptionKey(e,r,n){let i=this.usage.getDescriptions(),s=c=>/^--/.test(c),o=c=>/^[^0-9]$/.test(c),a=!s(n)&&o(e)?"-":"--";if(!this.zshShell)r.push(a+e);else{let c=i[e]||"";r.push(a+`${e.replace(/:/g,"\\:")}:${c.replace("__yargsString__:","")}`)}}customCompletion(e,r,n,i){if(tt(this.customCompletionFunction,null,this.shim),fC(this.customCompletionFunction)){let s=this.customCompletionFunction(n,r);return xe(s)?s.then(o=>{this.shim.process.nextTick(()=>{i(null,o)})}).catch(o=>{this.shim.process.nextTick(()=>{i(o,void 0)})}):i(null,s)}else return dC(this.customCompletionFunction)?this.customCompletionFunction(n,r,(s=i)=>this.defaultCompletion(e,r,n,s),s=>{i(null,s)}):this.customCompletionFunction(n,r,s=>{i(null,s)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),s=this.customCompletionFunction?o=>this.customCompletion(e,o,n,r):o=>this.defaultCompletion(e,o,n,r);return xe(i)?i.then(s):s(i)}generateCompletionScript(e,r){let n=this.zshShell?Gd:Wd,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function Yd(t,e,r,n){return new Vd(t,e,r,n)}function fC(t){return t.length<3}function dC(t){return t.length>3}function Kd(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}var Jd=["$0","--","_"];function Xd(t,e,r){let n=r.y18n.__,i=r.y18n.__n,s={};s.nonOptionCount=function(f){let d=t.getDemandedCommands(),m=f._.length+(f["--"]?f["--"].length:0)-t.getInternalMethods().getContext().commands.length;d._&&(m<d._.min||m>d._.max)&&(m<d._.min?d._.minMsg!==void 0?e.fail(d._.minMsg?d._.minMsg.replace(/\$0/g,m.toString()).replace(/\$1/,d._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m.toString(),d._.min.toString())):m>d._.max&&(d._.maxMsg!==void 0?e.fail(d._.maxMsg?d._.maxMsg.replace(/\$0/g,m.toString()).replace(/\$1/,d._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",m,m.toString(),d._.max.toString()))))},s.positionalCount=function(f,d){d<f&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",d,d+"",f+""))},s.requiredArguments=function(f,d){let h=null;for(let m of Object.keys(d))(!Object.prototype.hasOwnProperty.call(f,m)||typeof f[m]=="undefined")&&(h=h||{},h[m]=d[m]);if(h){let m=[];for(let w of Object.keys(h)){let y=h[w];y&&m.indexOf(y)<0&&m.push(y)}let p=m.length?`
${m.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+p))}},s.unknownArguments=function(f,d,h,m,p=!0){let w=t.getInternalMethods().getCommandInstance().getCommands(),y=[],v=t.getInternalMethods().getContext();Object.keys(f).forEach(C=>{Jd.indexOf(C)===-1&&!Object.prototype.hasOwnProperty.call(h,C)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),C)&&!s.isValidAndSomeAliasIsNotNew(C,d)&&y.push(C)}),p&&(v.commands.length>0||w.length>0||m)&&f._.slice(v.commands.length).forEach(C=>{w.indexOf(""+C)===-1&&y.push(""+C)}),y.length>0&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",y.length,y.join(", ")))},s.unknownCommands=function(f){let d=t.getInternalMethods().getCommandInstance().getCommands(),h=[],m=t.getInternalMethods().getContext();return(m.commands.length>0||d.length>0)&&f._.slice(m.commands.length).forEach(p=>{d.indexOf(""+p)===-1&&h.push(""+p)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},s.isValidAndSomeAliasIsNotNew=function(f,d){if(!Object.prototype.hasOwnProperty.call(d,f))return!1;let h=t.parsed.newAliases;return[f,...d[f]].some(m=>!Object.prototype.hasOwnProperty.call(h,m)||!h[f])},s.limitedChoices=function(f){let d=t.getOptions(),h={};if(!Object.keys(d.choices).length)return;Object.keys(f).forEach(w=>{Jd.indexOf(w)===-1&&Object.prototype.hasOwnProperty.call(d.choices,w)&&[].concat(f[w]).forEach(y=>{d.choices[w].indexOf(y)===-1&&y!==void 0&&(h[w]=(h[w]||[]).concat(y))})});let m=Object.keys(h);if(!m.length)return;let p=n("Invalid values:");m.forEach(w=>{p+=`
  ${n("Argument: %s, Given: %s, Choices: %s",w,e.stringifiedValues(h[w]),e.stringifiedValues(d.choices[w]))}`}),e.fail(p)};let o={};s.implies=function(f,d){X("<string|object> [array|number|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(h=>{s.implies(h,f[h])}):(t.global(f),o[f]||(o[f]=[]),Array.isArray(d)?d.forEach(h=>s.implies(f,h)):(tt(d,void 0,r),o[f].push(d)))},s.getImplied=function(){return o};function a(u,f){let d=Number(f);return f=isNaN(d)?f:d,typeof f=="number"?f=u._.length>=f:f.match(/^--no-.+/)?(f=f.match(/^--no-(.+)/)[1],f=!u[f]):f=u[f],f}s.implications=function(f){let d=[];if(Object.keys(o).forEach(h=>{let m=h;(o[h]||[]).forEach(p=>{let w=m,y=p;w=a(f,w),p=a(f,p),w&&!p&&d.push(` ${m} -> ${y}`)})}),d.length){let h=`${n("Implications failed:")}
`;d.forEach(m=>{h+=m}),e.fail(h)}};let c={};s.conflicts=function(f,d){X("<string|object> [array|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(h=>{s.conflicts(h,f[h])}):(t.global(f),c[f]||(c[f]=[]),Array.isArray(d)?d.forEach(h=>s.conflicts(f,h)):c[f].push(d))},s.getConflicting=()=>c,s.conflicting=function(f){Object.keys(f).forEach(d=>{c[d]&&c[d].forEach(h=>{h&&f[d]!==void 0&&f[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",d,h))})})},s.recommendCommands=function(f,d){let h=3;d=d.sort((w,y)=>y.length-w.length);let m=null,p=1/0;for(let w=0,y;(y=d[w])!==void 0;w++){let v=Kd(f,y);v<=h&&v<p&&(p=v,m=y)}m&&e.fail(n("Did you mean %s?",m))},s.reset=function(f){return o=Rr(o,d=>!f[d]),c=Rr(c,d=>!f[d]),s};let l=[];return s.freeze=function(){l.push({implied:o,conflicting:c})},s.unfreeze=function(){let f=l.pop();tt(f,void 0,r),{implied:o,conflicting:c}=f},s}var Wc=[],Qi;function mo(t,e,r,n){Qi=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let s=/\.json|\..*rc$/.test(t.extends),o=null;if(s)o=pC(e,t.extends);else try{o=require.resolve(t.extends)}catch{return t}hC(o),Wc.push(o),i=s?JSON.parse(Qi.readFileSync(o,"utf8")):require(t.extends),delete t.extends,i=mo(i,Qi.path.dirname(o),r,Qi)}return Wc=[],r?Zd(i,t):Object.assign({},i,t)}function hC(t){if(Wc.indexOf(t)>-1)throw new be(`Circular extended configurations: '${t}'.`)}function pC(t,e){return Qi.path.resolve(t,e)}function Zd(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=Zd(t[i],e[i]):r[i]=e[i];return r}var ee=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},g=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},Oe,rn,es,Rt,wt,go,kr,nn,Ft,wo,kt,tr,yt,_t,Zn,Me,ne,yo,vo,vt,sn,Qn,on,_r,bo,ae,an,cn,ln,le,hr,Pe;function Qd(t){return(e=[],r=t.process.cwd(),n)=>{let i=new gh(e,r,n,t);return Object.defineProperty(i,"argv",{get:()=>i.parse(),enumerable:!0}),i.help(),i.version(),i}}var eh=Symbol("copyDoubleDash"),th=Symbol("copyDoubleDash"),Gc=Symbol("deleteFromParserHintObject"),rh=Symbol("freeze"),nh=Symbol("getDollarZero"),un=Symbol("getParserConfiguration"),Vc=Symbol("guessLocale"),ih=Symbol("guessVersion"),sh=Symbol("parsePositionalNumbers"),Yc=Symbol("pkgUp"),Lr=Symbol("populateParserHintArray"),ei=Symbol("populateParserHintSingleValueDictionary"),Kc=Symbol("populateParserHintArrayDictionary"),Jc=Symbol("populateParserHintDictionary"),Xc=Symbol("sanitizeKey"),Zc=Symbol("setKey"),Qc=Symbol("unfreeze"),oh=Symbol("validateAsync"),ah=Symbol("getCommandInstance"),ch=Symbol("getContext"),lh=Symbol("getHasOutput"),uh=Symbol("getLoggerInstance"),fh=Symbol("getParseContext"),dh=Symbol("getUsageInstance"),hh=Symbol("getValidationInstance"),Eo=Symbol("hasParseCallback"),fn=Symbol("postProcess"),ph=Symbol("rebase"),el=Symbol("reset"),ts=Symbol("runYargsParserAndExecuteCommands"),tl=Symbol("runValidation"),mh=Symbol("setHasOutput"),gh=class{constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Oe.set(this,void 0),rn.set(this,void 0),es.set(this,{commands:[],fullCommands:[]}),Rt.set(this,null),wt.set(this,null),go.set(this,"show-hidden"),kr.set(this,null),nn.set(this,!0),Ft.set(this,!0),wo.set(this,[]),kt.set(this,void 0),tr.set(this,{}),yt.set(this,!1),_t.set(this,null),Zn.set(this,void 0),Me.set(this,""),ne.set(this,void 0),yo.set(this,void 0),vo.set(this,{}),vt.set(this,null),sn.set(this,null),Qn.set(this,{}),on.set(this,{}),_r.set(this,void 0),bo.set(this,!1),ae.set(this,void 0),an.set(this,!1),cn.set(this,!1),ln.set(this,!1),le.set(this,void 0),hr.set(this,null),Pe.set(this,void 0),ee(this,ae,i),ee(this,_r,e),ee(this,rn,r),ee(this,yo,n),ee(this,kt,new qc(this)),this.$0=this[nh](),this[el](),ee(this,Oe,g(this,Oe)),ee(this,le,g(this,le)),ee(this,Pe,g(this,Pe)),ee(this,ne,g(this,ne)),g(this,ne).showHiddenOpt=g(this,go),ee(this,Zn,this[th]())}addHelpOpt(e,r){let n="help";return X("[string|boolean] [string]",[e,r],arguments.length),g(this,_t)&&(this[Gc](g(this,_t)),ee(this,_t,null)),e===!1&&r===void 0?this:(ee(this,_t,typeof e=="string"?e:n),this.boolean(g(this,_t)),this.describe(g(this,_t),r||g(this,le).deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(X("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:g(this,go);return this.boolean(n),this.describe(n,r||g(this,le).deferY18nLookup("Show hidden options")),g(this,ne).showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return X("<object|string|array> [string|array]",[e,r],arguments.length),this[Kc](this.alias.bind(this),"alias",e,r),this}array(e){return X("<array|string>",[e],arguments.length),this[Lr]("array",e),this}boolean(e){return X("<array|string>",[e],arguments.length),this[Lr]("boolean",e),this}check(e,r){return X("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>tn(()=>e(n),s=>(s?(typeof s=="string"||s instanceof Error)&&g(this,le).fail(s.toString(),s):g(this,le).fail(g(this,ae).y18n.__("Argument check failed: %s",e.toString())),n),s=>(g(this,le).fail(s.message?s.message:s.toString(),s),n)),!1,r),this}choices(e,r){return X("<object|string|array> [string|array]",[e,r],arguments.length),this[Kc](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(X("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new be("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new be("coerce callback must be provided");return g(this,ne).key[e]=!0,g(this,kt).addCoerceMiddleware((n,i)=>{let s;return tn(()=>(s=i.getAliases(),r(n[e])),o=>{if(n[e]=o,s[e])for(let a of s[e])n[a]=o;return n},o=>{throw new be(o.message)})},e),this}conflicts(e,r){return X("<string|object> [string|array]",[e,r],arguments.length),g(this,Pe).conflicts(e,r),this}config(e="config",r,n){return X("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=mo(e,g(this,rn),this[un]()["deep-merge-config"]||!1,g(this,ae)),g(this,ne).configObjects=(g(this,ne).configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||g(this,le).deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{g(this,ne).config[i]=n||!0}),this)}completion(e,r,n){return X("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),ee(this,wt,e||g(this,wt)||"completion"),!r&&r!==!1&&(r="generate completion script"),this.command(g(this,wt),r),n&&g(this,Rt).registerFunction(n),this}command(e,r,n,i,s,o){return X("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,s,o],arguments.length),g(this,Oe).addHandler(e,r,n,i,s,o),this}commands(e,r,n,i,s,o){return this.command(e,r,n,i,s,o)}commandDir(e,r){X("<string> [object]",[e,r],arguments.length);let n=g(this,yo)||g(this,ae).require;return g(this,Oe).addDirectory(e,n,g(this,ae).getCallerFile(),r),this}count(e){return X("<array|string>",[e],arguments.length),this[Lr]("count",e),this}default(e,r,n){return X("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Bc(e,g(this,ae)),g(this,ne).defaultDescription[e]=n),typeof r=="function"&&(Bc(e,g(this,ae)),g(this,ne).defaultDescription[e]||(g(this,ne).defaultDescription[e]=g(this,le).functionDescription(r)),r=r.call()),this[ei](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return X("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),g(this,ne).demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{tt(n,!0,g(this,ae)),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(tt(n,!0,g(this,ae)),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{tt(n,!0,g(this,ae)),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n=="undefined")&&this.demandOption(e),this}demandOption(e,r){return X("<object|string|array> [string]",[e,r],arguments.length),this[ei](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return X("<string> [string|boolean]",[e,r],arguments.length),g(this,ne).deprecatedOptions[e]=r,this}describe(e,r){return X("<object|string|array> [string]",[e,r],arguments.length),this[Zc](e,!0),g(this,le).describe(e,r),this}detectLocale(e){return X("<boolean>",[e],arguments.length),ee(this,nn,e),this}env(e){return X("[string|boolean]",[e],arguments.length),e===!1?delete g(this,ne).envPrefix:g(this,ne).envPrefix=e||"",this}epilogue(e){return X("<string>",[e],arguments.length),g(this,le).epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return X("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):g(this,le).example(e,r),this}exit(e,r){ee(this,yt,!0),ee(this,kr,r),g(this,Ft)&&g(this,ae).process.exit(e)}exitProcess(e=!0){return X("[boolean]",[e],arguments.length),ee(this,Ft,e),this}fail(e){if(X("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new be("Invalid first argument. Expected function or boolean 'false'");return g(this,le).failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return X("<array> [function]",[e,r],arguments.length),r?g(this,Rt).getCompletion(e,r):new Promise((n,i)=>{g(this,Rt).getCompletion(e,(s,o)=>{s?i(s):n(o)})})}getDemandedOptions(){return X([],0),g(this,ne).demandedOptions}getDemandedCommands(){return X([],0),g(this,ne).demandedCommands}getDeprecatedOptions(){return X([],0),g(this,ne).deprecatedOptions}getDetectLocale(){return g(this,nn)}getExitProcess(){return g(this,Ft)}getGroups(){return Object.assign({},g(this,tr),g(this,on))}getHelp(){if(ee(this,yt,!0),!g(this,le).hasCachedHelpMessage()){if(!this.parsed){let r=this[ts](g(this,_r),void 0,void 0,0,!0);if(xe(r))return r.then(()=>g(this,le).help())}let e=g(this,Oe).runDefaultBuilderOn(this);if(xe(e))return e.then(()=>g(this,le).help())}return Promise.resolve(g(this,le).help())}getOptions(){return g(this,ne)}getStrict(){return g(this,an)}getStrictCommands(){return g(this,cn)}getStrictOptions(){return g(this,ln)}global(e,r){return X("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?g(this,ne).local=g(this,ne).local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{g(this,ne).local.indexOf(n)===-1&&g(this,ne).local.push(n)}),this}group(e,r){X("<string|array> <string>",[e,r],arguments.length);let n=g(this,on)[r]||g(this,tr)[r];g(this,on)[r]&&delete g(this,on)[r];let i={};return g(this,tr)[r]=(n||[]).concat(e).filter(s=>i[s]?!1:i[s]=!0),this}hide(e){return X("<string>",[e],arguments.length),g(this,ne).hiddenOptions.push(e),this}implies(e,r){return X("<string|object> [number|string|array]",[e,r],arguments.length),g(this,Pe).implies(e,r),this}locale(e){return X("[string]",[e],arguments.length),e?(ee(this,nn,!1),g(this,ae).y18n.setLocale(e),this):(this[Vc](),g(this,ae).y18n.getLocale())}middleware(e,r,n){return g(this,kt).addMiddleware(e,!!r,n)}nargs(e,r){return X("<string|object|array> [number]",[e,r],arguments.length),this[ei](this.nargs.bind(this),"narg",e,r),this}normalize(e){return X("<array|string>",[e],arguments.length),this[Lr]("normalize",e),this}number(e){return X("<array|string>",[e],arguments.length),this[Lr]("number",e),this}option(e,r){if(X("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),g(this,ne).key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(g(this,ne).defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let s=r.describe||r.description||r.desc;this.describe(e,s),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){X("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[rh](),typeof e=="undefined"&&(e=g(this,_r)),typeof r=="object"&&(ee(this,sn,r),r=n),typeof r=="function"&&(ee(this,vt,r),r=!1),r||ee(this,_r,e),g(this,vt)&&ee(this,Ft,!1);let i=this[ts](e,!!r),s=this.parsed;return g(this,Rt).setParsed(this.parsed),xe(i)?i.then(o=>(g(this,vt)&&g(this,vt).call(this,g(this,kr),o,g(this,Me)),o)).catch(o=>{throw g(this,vt)&&g(this,vt)(o,this.parsed.argv,g(this,Me)),o}).finally(()=>{this[Qc](),this.parsed=s}):(g(this,vt)&&g(this,vt).call(this,g(this,kr),i,g(this,Me)),this[Qc](),this.parsed=s,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return xe(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(xe(i))throw new be(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return X("<object>",[e],arguments.length),ee(this,vo,e),this}pkgConf(e,r){X("<string> [string]",[e,r],arguments.length);let n=null,i=this[Yc](r||g(this,rn));return i[e]&&typeof i[e]=="object"&&(n=mo(i[e],r||g(this,rn),this[un]()["deep-merge-config"]||!1,g(this,ae)),g(this,ne).configObjects=(g(this,ne).configObjects||[]).concat(n)),this}positional(e,r){X("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=Rr(r,(o,a)=>{let c=n.indexOf(o)!==-1;return o==="type"&&["string","number","boolean"].indexOf(a)===-1&&(c=!1),c});let i=g(this,es).fullCommands[g(this,es).fullCommands.length-1],s=i?g(this,Oe).cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return Jn(s).forEach(o=>{let a=s[o];Array.isArray(a)?a.indexOf(e)!==-1&&(r[o]=!0):a[e]&&!(o in r)&&(r[o]=a[e])}),this.group(e,g(this,le).getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return X("[boolean]",[e],arguments.length),ee(this,bo,e),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return X("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&g(this,ne).narg[e]?this:(this[ei](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return X("[string] [string]",[e,r],arguments.length),e=e||this.$0,g(this,Zn).log(g(this,Rt).generateCompletionScript(e,r||g(this,wt)||"completion")),this}showHelp(e){if(X("[string|function]",[e],arguments.length),ee(this,yt,!0),!g(this,le).hasCachedHelpMessage()){if(!this.parsed){let n=this[ts](g(this,_r),void 0,void 0,0,!0);if(xe(n))return n.then(()=>{g(this,le).showHelp(e)}),this}let r=g(this,Oe).runDefaultBuilderOn(this);if(xe(r))return r.then(()=>{g(this,le).showHelp(e)}),this}return g(this,le).showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return X("[boolean|string] [string]",[e,r],arguments.length),g(this,le).showHelpOnFail(e,r),this}showVersion(e){return X("[string|function]",[e],arguments.length),g(this,le).showVersion(e),this}skipValidation(e){return X("<array|string>",[e],arguments.length),this[Lr]("skipValidation",e),this}strict(e){return X("[boolean]",[e],arguments.length),ee(this,an,e!==!1),this}strictCommands(e){return X("[boolean]",[e],arguments.length),ee(this,cn,e!==!1),this}strictOptions(e){return X("[boolean]",[e],arguments.length),ee(this,ln,e!==!1),this}string(e){return X("<array|string>",[e],arguments.length),this[Lr]("string",e),this}terminalWidth(){return X([],0),g(this,ae).process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return X("<object>",[e],arguments.length),ee(this,nn,!1),g(this,ae).y18n.updateLocale(e),this}usage(e,r,n,i){if(X("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(tt(e,null,g(this,ae)),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new be(".usage() description must start with $0 if being used as alias for .command()")}else return g(this,le).usage(e),this}version(e,r,n){let i="version";if(X("[boolean|string] [string] [string]",[e,r,n],arguments.length),g(this,hr)&&(this[Gc](g(this,hr)),g(this,le).version(void 0),ee(this,hr,null)),arguments.length===0)n=this[ih](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return ee(this,hr,typeof e=="string"?e:i),r=r||g(this,le).deferY18nLookup("Show version number"),g(this,le).version(n||void 0),this.boolean(g(this,hr)),this.describe(g(this,hr),r),this}wrap(e){return X("<number|null|undefined>",[e],arguments.length),g(this,le).wrap(e),this}[(Oe=new WeakMap,rn=new WeakMap,es=new WeakMap,Rt=new WeakMap,wt=new WeakMap,go=new WeakMap,kr=new WeakMap,nn=new WeakMap,Ft=new WeakMap,wo=new WeakMap,kt=new WeakMap,tr=new WeakMap,yt=new WeakMap,_t=new WeakMap,Zn=new WeakMap,Me=new WeakMap,ne=new WeakMap,yo=new WeakMap,vo=new WeakMap,vt=new WeakMap,sn=new WeakMap,Qn=new WeakMap,on=new WeakMap,_r=new WeakMap,bo=new WeakMap,ae=new WeakMap,an=new WeakMap,cn=new WeakMap,ln=new WeakMap,le=new WeakMap,hr=new WeakMap,Pe=new WeakMap,eh)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[th](){return{log:(...e)=>{this[Eo]()||console.log(...e),ee(this,yt,!0),g(this,Me).length&&ee(this,Me,g(this,Me)+`
`),ee(this,Me,g(this,Me)+e.join(" "))},error:(...e)=>{this[Eo]()||console.error(...e),ee(this,yt,!0),g(this,Me).length&&ee(this,Me,g(this,Me)+`
`),ee(this,Me,g(this,Me)+e.join(" "))}}}[Gc](e){Jn(g(this,ne)).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=g(this,ne)[r];Array.isArray(n)?~n.indexOf(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete g(this,le).getDescriptions()[e]}[rh](){g(this,wo).push({options:g(this,ne),configObjects:g(this,ne).configObjects.slice(0),exitProcess:g(this,Ft),groups:g(this,tr),strict:g(this,an),strictCommands:g(this,cn),strictOptions:g(this,ln),completionCommand:g(this,wt),output:g(this,Me),exitError:g(this,kr),hasOutput:g(this,yt),parsed:this.parsed,parseFn:g(this,vt),parseContext:g(this,sn)}),g(this,le).freeze(),g(this,Pe).freeze(),g(this,Oe).freeze(),g(this,kt).freeze()}[nh](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(g(this,ae).process.argv()[0])?r=g(this,ae).process.argv().slice(1,2):r=g(this,ae).process.argv().slice(0,1),e=r.map(n=>{let i=this[ph](g(this,rn),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),g(this,ae).getEnv("_")&&g(this,ae).getProcessArgvBin()===g(this,ae).getEnv("_")&&(e=g(this,ae).getEnv("_").replace(`${g(this,ae).path.dirname(g(this,ae).process.execPath())}/`,"")),e}[un](){return g(this,vo)}[Vc](){if(!g(this,nn))return;let e=g(this,ae).getEnv("LC_ALL")||g(this,ae).getEnv("LC_MESSAGES")||g(this,ae).getEnv("LANG")||g(this,ae).getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[ih](){return this[Yc]().version||"unknown"}[sh](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)g(this,ae).Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Yc](e){let r=e||"*";if(g(this,Qn)[r])return g(this,Qn)[r];let n={};try{let i=e||g(this,ae).mainFilename;!e&&g(this,ae).path.extname(i)&&(i=g(this,ae).path.dirname(i));let s=g(this,ae).findUp(i,(o,a)=>{if(a.includes("package.json"))return"package.json"});tt(s,void 0,g(this,ae)),n=JSON.parse(g(this,ae).readFileSync(s,"utf8"))}catch{}return g(this,Qn)[r]=n||{},g(this,Qn)[r]}[Lr](e,r){r=[].concat(r),r.forEach(n=>{n=this[Xc](n),g(this,ne)[e].push(n)})}[ei](e,r,n,i){this[Jc](e,r,n,i,(s,o,a)=>{g(this,ne)[s][o]=a})}[Kc](e,r,n,i){this[Jc](e,r,n,i,(s,o,a)=>{g(this,ne)[s][o]=(g(this,ne)[s][o]||[]).concat(a)})}[Jc](e,r,n,i,s){if(Array.isArray(n))n.forEach(o=>{e(o,i)});else if((o=>typeof o=="object")(n))for(let o of Jn(n))e(o,n[o]);else s(r,this[Xc](n),i)}[Xc](e){return e==="__proto__"?"___proto___":e}[Zc](e,r){return this[ei](this[Zc].bind(this),"key",e,r),this}[Qc](){var e,r,n,i,s,o,a,c,l,u,f,d;let h=g(this,wo).pop();tt(h,void 0,g(this,ae));let m;e=this,r=this,n=this,i=this,s=this,o=this,a=this,c=this,l=this,u=this,f=this,d=this,{options:{set value(p){ee(e,ne,p)}}.value,configObjects:m,exitProcess:{set value(p){ee(r,Ft,p)}}.value,groups:{set value(p){ee(n,tr,p)}}.value,output:{set value(p){ee(i,Me,p)}}.value,exitError:{set value(p){ee(s,kr,p)}}.value,hasOutput:{set value(p){ee(o,yt,p)}}.value,parsed:this.parsed,strict:{set value(p){ee(a,an,p)}}.value,strictCommands:{set value(p){ee(c,cn,p)}}.value,strictOptions:{set value(p){ee(l,ln,p)}}.value,completionCommand:{set value(p){ee(u,wt,p)}}.value,parseFn:{set value(p){ee(f,vt,p)}}.value,parseContext:{set value(p){ee(d,sn,p)}}.value}=h,g(this,ne).configObjects=m,g(this,le).unfreeze(),g(this,Pe).unfreeze(),g(this,Oe).unfreeze(),g(this,kt).unfreeze()}[oh](e,r){return tn(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[ah].bind(this),getContext:this[ch].bind(this),getHasOutput:this[lh].bind(this),getLoggerInstance:this[uh].bind(this),getParseContext:this[fh].bind(this),getParserConfiguration:this[un].bind(this),getUsageInstance:this[dh].bind(this),getValidationInstance:this[hh].bind(this),hasParseCallback:this[Eo].bind(this),postProcess:this[fn].bind(this),reset:this[el].bind(this),runValidation:this[tl].bind(this),runYargsParserAndExecuteCommands:this[ts].bind(this),setHasOutput:this[mh].bind(this)}}[ah](){return g(this,Oe)}[ch](){return g(this,es)}[lh](){return g(this,yt)}[uh](){return g(this,Zn)}[fh](){return g(this,sn)||{}}[dh](){return g(this,le)}[hh](){return g(this,Pe)}[Eo](){return!!g(this,vt)}[fn](e,r,n,i){return n||xe(e)||(r||(e=this[eh](e)),(this[un]()["parse-positional-numbers"]||this[un]()["parse-positional-numbers"]===void 0)&&(e=this[sh](e)),i&&(e=en(e,this,g(this,kt).getMiddleware(),!1))),e}[el](e={}){ee(this,ne,g(this,ne)||{});let r={};r.local=g(this,ne).local?g(this,ne).local:[],r.configObjects=g(this,ne).configObjects?g(this,ne).configObjects:[];let n={};r.local.forEach(o=>{n[o]=!0,(e[o]||[]).forEach(a=>{n[a]=!0})}),Object.assign(g(this,on),Object.keys(g(this,tr)).reduce((o,a)=>{let c=g(this,tr)[a].filter(l=>!(l in n));return c.length>0&&(o[a]=c),o},{})),ee(this,tr,{});let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],s=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(o=>{r[o]=(g(this,ne)[o]||[]).filter(a=>!n[a])}),s.forEach(o=>{r[o]=Rr(g(this,ne)[o],a=>!n[a])}),r.envPrefix=g(this,ne).envPrefix,ee(this,ne,r),ee(this,le,g(this,le)?g(this,le).reset(n):Hd(this,g(this,ae))),ee(this,Pe,g(this,Pe)?g(this,Pe).reset(n):Xd(this,g(this,le),g(this,ae))),ee(this,Oe,g(this,Oe)?g(this,Oe).reset():Ud(g(this,le),g(this,Pe),g(this,kt),g(this,ae))),g(this,Rt)||ee(this,Rt,Yd(this,g(this,le),g(this,Oe),g(this,ae))),g(this,kt).reset(),ee(this,wt,null),ee(this,Me,""),ee(this,kr,null),ee(this,yt,!1),this.parsed=!1,this}[ph](e,r){return g(this,ae).path.relative(e,r)}[ts](e,r,n,i=0,s=!1){let o=!!n||s;e=e||g(this,_r),g(this,ne).__=g(this,ae).y18n.__,g(this,ne).configuration=this[un]();let a=!!g(this,ne).configuration["populate--"],c=Object.assign({},g(this,ne).configuration,{"populate--":!0}),l=g(this,ae).Parser.detailed(e,Object.assign({},g(this,ne),{configuration:H({"parse-positional-numbers":!1},c)})),u=Object.assign(l.argv,g(this,sn)),f,d=l.aliases,h=!1,m=!1;Object.keys(u).forEach(p=>{p===g(this,_t)&&u[p]?h=!0:p===g(this,hr)&&u[p]&&(m=!0)}),u.$0=this.$0,this.parsed=l,i===0&&g(this,le).clearCachedHelpMessage();try{if(this[Vc](),r)return this[fn](u,a,!!n,!1);g(this,_t)&&~[g(this,_t)].concat(d[g(this,_t)]||[]).filter(C=>C.length>1).indexOf(""+u._[u._.length-1])&&(u._.pop(),h=!0);let p=g(this,Oe).getCommands(),w=g(this,Rt).completionKey in u,y=h||w||s;if(u._.length){if(p.length){let v;for(let C=i||0,A;u._[C]!==void 0;C++)if(A=String(u._[C]),~p.indexOf(A)&&A!==g(this,wt)){let k=g(this,Oe).runCommand(A,this,l,C+1,s,h||m||s);return this[fn](k,a,!!n,!1)}else if(!v&&A!==g(this,wt)){v=A;break}!g(this,Oe).hasDefaultCommand()&&g(this,bo)&&v&&!y&&g(this,Pe).recommendCommands(v,p)}g(this,wt)&&~u._.indexOf(g(this,wt))&&!w&&(g(this,Ft)&&Fr(!0),this.showCompletionScript(),this.exit(0))}if(g(this,Oe).hasDefaultCommand()&&!y){let v=g(this,Oe).runCommand(null,this,l,0,s,h||m||s);return this[fn](v,a,!!n,!1)}if(w){g(this,Ft)&&Fr(!0),e=[].concat(e);let v=e.slice(e.indexOf(`--${g(this,Rt).completionKey}`)+1);return g(this,Rt).getCompletion(v,(C,A)=>{if(C)throw new be(C.message);(A||[]).forEach(k=>{g(this,Zn).log(k)}),this.exit(0)}),this[fn](u,!a,!!n,!1)}if(g(this,yt)||(h?(g(this,Ft)&&Fr(!0),o=!0,this.showHelp("log"),this.exit(0)):m&&(g(this,Ft)&&Fr(!0),o=!0,g(this,le).showVersion("log"),this.exit(0))),!o&&g(this,ne).skipValidation.length>0&&(o=Object.keys(u).some(v=>g(this,ne).skipValidation.indexOf(v)>=0&&u[v]===!0)),!o){if(l.error)throw new be(l.error.message);if(!w){let v=this[tl](d,{},l.error);n||(f=en(u,this,g(this,kt).getMiddleware(),!0)),f=this[oh](v,f!=null?f:u),xe(f)&&!n&&(f=f.then(()=>en(u,this,g(this,kt).getMiddleware(),!1)))}}}catch(p){if(p instanceof be)g(this,le).fail(p.message,p);else throw p}return this[fn](f!=null?f:u,a,!!n,!0)}[tl](e,r,n,i){e=H({},e),r=H({},r);let s=H({},this.getDemandedOptions());return o=>{if(n)throw new be(n.message);g(this,Pe).nonOptionCount(o),g(this,Pe).requiredArguments(o,s);let a=!1;g(this,cn)&&(a=g(this,Pe).unknownCommands(o)),g(this,an)&&!a?g(this,Pe).unknownArguments(o,e,r,!!i):g(this,ln)&&g(this,Pe).unknownArguments(o,e,{},!1,!1),g(this,Pe).limitedChoices(o),g(this,Pe).implications(o),g(this,Pe).conflicting(o)}}[mh](){ee(this,yt,!0)}};function qd(t){return!!t&&typeof t.getInternalMethods=="function"}"use strict";var mC=Qd(Td),wh=mC;var yb=V(require("path")),vb=V(require("crypto"));var qf=V(require("path")),sb=V(require("crypto")),yF=V(require("os"));var gC=V(require("os")),S;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(S||(S={}));var rl={info:3,debug:2,trace:1},SL=Object.keys(rl).reduce((t,e)=>(t[rl[e]]=e,t),[]);function at(t){return rl[t]||3}var dn={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},rs=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function yh(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function vh(t,e,r){return{event(n){let i=wC(n,e(),r.getTime());i&&t(i)}}}function bh(t,e,r){return{event(n){t(JSON.stringify(n)+`
`)}}}function ve(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function wC(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${ns(Ch,`${t.timestamp-r} ms`)}] ${Co(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${ns(CC,`[${t.timestamp-r} ms] Start`)}: ${Co(t.text)}`:`[${ns(Ch,`${t.timestamp-r} ms`)}] Start: ${Co(t.text)}`;case"stop":return 1>=e?`${ns(EC,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${Co(t.text)}`:void 0;default:throw yC(t)}}function Co(t){return SC(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function yC(t){return new Error(`Unknown log event type: ${t.type}`)}var vC="38;2;143;99;79",Eh="38;2;99;143;79",bC="38;2;86;156;214",EC=vC,CC=Eh,Ch=Eh,xC=bC;function ns(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function SC(t){let e,r=0,n=[];for(rs.lastIndex=0;e=rs.exec(t);)n.push(xh(t.substring(r,e.index))),n.push(e[0]),r=rs.lastIndex;return n.push(xh(t.substr(r))),n.join("")}function xh(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(ns(xC,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Ie(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function nl(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ce=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var Be=V(require("path")),Uh=V(require("os")),Bh=V(require("fs")),al=V(require("child_process")),cl=V(require("string_decoder"));var Se=V(require("fs")),Gt=V(require("util")),Ih=V(Ph());function nt(t){return new Promise(e=>Se.stat(t,(r,n)=>e(!r&&n.isFile())))}function ti(t){return new Promise(e=>Se.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Ue=(0,Gt.promisify)(Se.readFile),rr=(0,Gt.promisify)(Se.writeFile),RL=(0,Gt.promisify)(Se.appendFile),Oh=(0,Gt.promisify)(Se.rename),So=(0,Gt.promisify)(Se.readdir),FL=(0,Gt.promisify)(Se.unlink),Lt=t=>new Promise((e,r)=>Se.mkdir(t,{recursive:!0},n=>n?r(n):e())),kL=(0,Gt.promisify)(Se.rmdir),ri=(0,Gt.promisify)(Se.rm),_L=(0,Gt.promisify)(Se.copyFile),ni=(0,Gt.promisify)(Ih.ncp),il;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(il||(il={}));var AC=V(require("path")),Ao=V(require("net")),Ro=V(require("os"));var Ah;Ah=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function s(a,c){for(var l,u="",f=0,d=-1,h=0,m=0;m<=a.length;++m){if(m<a.length)l=a.charCodeAt(m);else{if(l===47)break;l=47}if(l===47){if(!(d===m-1||h===1))if(d!==m-1&&h===2){if(u.length<2||f!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var p=u.lastIndexOf("/");if(p!==u.length-1){p===-1?(u="",f=0):f=(u=u.slice(0,p)).length-1-u.lastIndexOf("/"),d=m,h=0;continue}}else if(u.length===2||u.length===1){u="",f=0,d=m,h=0;continue}}c&&(u.length>0?u+="/..":u="..",f=2)}else u.length>0?u+="/"+a.slice(d+1,m):u=a.slice(d+1,m),f=m-d-1;d=m,h=0}else l===46&&h!==-1?++h:h=-1}return u}var o={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var f;u>=0?f=arguments[u]:(a===void 0&&(a=process.cwd()),f=a),i(f),f.length!==0&&(c=f+"/"+c,l=f.charCodeAt(0)===47)}return c=s(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=s(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":o.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=o.resolve(a))===(c=o.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,f=u-l,d=1;d<c.length&&c.charCodeAt(d)===47;++d);for(var h=c.length-d,m=f<h?f:h,p=-1,w=0;w<=m;++w){if(w===m){if(h>m){if(c.charCodeAt(d+w)===47)return c.slice(d+w+1);if(w===0)return c.slice(d+w)}else f>m&&(a.charCodeAt(l+w)===47?p=w:w===0&&(p=0));break}var y=a.charCodeAt(l+w);if(y!==c.charCodeAt(d+w))break;y===47&&(p=w)}var v="";for(w=l+p+1;w<=u;++w)w!==u&&a.charCodeAt(w)!==47||(v.length===0?v+="..":v+="/..");return v.length>0?v+c.slice(d+p):(d+=p,c.charCodeAt(d)===47&&++d,c.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,f=!0,d=a.length-1;d>=1;--d)if((c=a.charCodeAt(d))===47){if(!f){u=d;break}}else f=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,f=-1,d=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var h=c.length-1,m=-1;for(l=a.length-1;l>=0;--l){var p=a.charCodeAt(l);if(p===47){if(!d){u=l+1;break}}else m===-1&&(d=!1,m=l+1),h>=0&&(p===c.charCodeAt(h)?--h==-1&&(f=l):(h=-1,f=m))}return u===f?f=m:f===-1&&(f=a.length),a.slice(u,f)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!d){u=l+1;break}}else f===-1&&(d=!1,f=l+1);return f===-1?"":a.slice(u,f)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,f=!0,d=0,h=a.length-1;h>=0;--h){var m=a.charCodeAt(h);if(m!==47)u===-1&&(f=!1,u=h+1),m===46?c===-1?c=h:d!==1&&(d=1):c!==-1&&(d=-1);else if(!f){l=h+1;break}}return c===-1||u===-1||d===0||d===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+f:u+"/"+f:f}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),f=u===47;f?(c.root="/",l=1):l=0;for(var d=-1,h=0,m=-1,p=!0,w=a.length-1,y=0;w>=l;--w)if((u=a.charCodeAt(w))!==47)m===-1&&(p=!1,m=w+1),u===46?d===-1?d=w:y!==1&&(y=1):d!==-1&&(y=-1);else if(!p){h=w+1;break}return d===-1||m===-1||y===0||y===1&&d===m-1&&d===h+1?m!==-1&&(c.base=c.name=h===0&&f?a.slice(1,m):a.slice(h,m)):(h===0&&f?(c.name=a.slice(1,d),c.base=a.slice(1,m)):(c.name=a.slice(h,d),c.base=a.slice(h,m)),c.ext=a.slice(d,m)),h>0?c.dir=a.slice(0,h-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,n.exports=o},447:(n,i,s)=>{var o;if(s.r(i),s.d(i,{URI:()=>v,Utils:()=>M}),typeof process=="object")o=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;o=a.indexOf("Windows")>=0}var c,l,u=(c=function(b,E){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,R){I.__proto__=R}||function(I,R){for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&(I[K]=R[K])})(b,E)},function(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function I(){this.constructor=b}c(b,E),b.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}),f=/^\w[\w\d+.-]*$/,d=/^\//,h=/^\/\//;function m(b,E){if(!b.scheme&&E)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(b.authority,'", path: "').concat(b.path,'", query: "').concat(b.query,'", fragment: "').concat(b.fragment,'"}'));if(b.scheme&&!f.test(b.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(b.path){if(b.authority){if(!d.test(b.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(h.test(b.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var p="",w="/",y=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,v=function(){function b(E,I,R,K,ie,W){W===void 0&&(W=!1),typeof E=="object"?(this.scheme=E.scheme||p,this.authority=E.authority||p,this.path=E.path||p,this.query=E.query||p,this.fragment=E.fragment||p):(this.scheme=function(ke,_e){return ke||_e?ke:"file"}(E,W),this.authority=I||p,this.path=function(ke,_e){switch(ke){case"https":case"http":case"file":_e?_e[0]!==w&&(_e=w+_e):_e=w}return _e}(this.scheme,R||p),this.query=K||p,this.fragment=ie||p,m(this,W))}return b.isUri=function(E){return E instanceof b||!!E&&typeof E.authority=="string"&&typeof E.fragment=="string"&&typeof E.path=="string"&&typeof E.query=="string"&&typeof E.scheme=="string"&&typeof E.fsPath=="string"&&typeof E.with=="function"&&typeof E.toString=="function"},Object.defineProperty(b.prototype,"fsPath",{get:function(){return D(this,!1)},enumerable:!1,configurable:!0}),b.prototype.with=function(E){if(!E)return this;var I=E.scheme,R=E.authority,K=E.path,ie=E.query,W=E.fragment;return I===void 0?I=this.scheme:I===null&&(I=p),R===void 0?R=this.authority:R===null&&(R=p),K===void 0?K=this.path:K===null&&(K=p),ie===void 0?ie=this.query:ie===null&&(ie=p),W===void 0?W=this.fragment:W===null&&(W=p),I===this.scheme&&R===this.authority&&K===this.path&&ie===this.query&&W===this.fragment?this:new A(I,R,K,ie,W)},b.parse=function(E,I){I===void 0&&(I=!1);var R=y.exec(E);return R?new A(R[2]||p,L(R[4]||p),L(R[5]||p),L(R[7]||p),L(R[9]||p),I):new A(p,p,p,p,p)},b.file=function(E){var I=p;if(o&&(E=E.replace(/\\/g,w)),E[0]===w&&E[1]===w){var R=E.indexOf(w,2);R===-1?(I=E.substring(2),E=w):(I=E.substring(2,R),E=E.substring(R)||w)}return new A("file",I,E,p,p)},b.from=function(E){var I=new A(E.scheme,E.authority,E.path,E.query,E.fragment);return m(I,!0),I},b.prototype.toString=function(E){return E===void 0&&(E=!1),U(this,E)},b.prototype.toJSON=function(){return this},b.revive=function(E){if(E){if(E instanceof b)return E;var I=new A(E);return I._formatted=E.external,I._fsPath=E._sep===C?E.fsPath:null,I}return E},b}(),C=o?1:void 0,A=function(b){function E(){var I=b!==null&&b.apply(this,arguments)||this;return I._formatted=null,I._fsPath=null,I}return u(E,b),Object.defineProperty(E.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=D(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),E.prototype.toString=function(I){return I===void 0&&(I=!1),I?U(this,!0):(this._formatted||(this._formatted=U(this,!1)),this._formatted)},E.prototype.toJSON=function(){var I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=C),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I},E}(v),k=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function T(b,E){for(var I=void 0,R=-1,K=0;K<b.length;K++){var ie=b.charCodeAt(K);if(ie>=97&&ie<=122||ie>=65&&ie<=90||ie>=48&&ie<=57||ie===45||ie===46||ie===95||ie===126||E&&ie===47)R!==-1&&(I+=encodeURIComponent(b.substring(R,K)),R=-1),I!==void 0&&(I+=b.charAt(K));else{I===void 0&&(I=b.substr(0,K));var W=k[ie];W!==void 0?(R!==-1&&(I+=encodeURIComponent(b.substring(R,K)),R=-1),I+=W):R===-1&&(R=K)}}return R!==-1&&(I+=encodeURIComponent(b.substring(R))),I!==void 0?I:b}function N(b){for(var E=void 0,I=0;I<b.length;I++){var R=b.charCodeAt(I);R===35||R===63?(E===void 0&&(E=b.substr(0,I)),E+=k[R]):E!==void 0&&(E+=b[I])}return E!==void 0?E:b}function D(b,E){var I;return I=b.authority&&b.path.length>1&&b.scheme==="file"?"//".concat(b.authority).concat(b.path):b.path.charCodeAt(0)===47&&(b.path.charCodeAt(1)>=65&&b.path.charCodeAt(1)<=90||b.path.charCodeAt(1)>=97&&b.path.charCodeAt(1)<=122)&&b.path.charCodeAt(2)===58?E?b.path.substr(1):b.path[1].toLowerCase()+b.path.substr(2):b.path,o&&(I=I.replace(/\//g,"\\")),I}function U(b,E){var I=E?N:T,R="",K=b.scheme,ie=b.authority,W=b.path,ke=b.query,_e=b.fragment;if(K&&(R+=K,R+=":"),(ie||K==="file")&&(R+=w,R+=w),ie){var J=ie.indexOf("@");if(J!==-1){var fe=ie.substr(0,J);ie=ie.substr(J+1),(J=fe.indexOf(":"))===-1?R+=I(fe,!1):(R+=I(fe.substr(0,J),!1),R+=":",R+=I(fe.substr(J+1),!1)),R+="@"}(J=(ie=ie.toLowerCase()).indexOf(":"))===-1?R+=I(ie,!1):(R+=I(ie.substr(0,J),!1),R+=ie.substr(J))}if(W){if(W.length>=3&&W.charCodeAt(0)===47&&W.charCodeAt(2)===58)(de=W.charCodeAt(1))>=65&&de<=90&&(W="/".concat(String.fromCharCode(de+32),":").concat(W.substr(3)));else if(W.length>=2&&W.charCodeAt(1)===58){var de;(de=W.charCodeAt(0))>=65&&de<=90&&(W="".concat(String.fromCharCode(de+32),":").concat(W.substr(2)))}R+=I(W,!0)}return ke&&(R+="?",R+=I(ke,!1)),_e&&(R+="#",R+=E?_e:T(_e,!1)),R}function Y(b){try{return decodeURIComponent(b)}catch{return b.length>3?b.substr(0,3)+Y(b.substr(3)):b}}var $=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function L(b){return b.match($)?b.replace($,function(E){return Y(E)}):b}var M,z=s(470),F=function(b,E,I){if(I||arguments.length===2)for(var R,K=0,ie=E.length;K<ie;K++)!R&&K in E||(R||(R=Array.prototype.slice.call(E,0,K)),R[K]=E[K]);return b.concat(R||Array.prototype.slice.call(E))},B=z.posix||z;(function(b){b.joinPath=function(E){for(var I=[],R=1;R<arguments.length;R++)I[R-1]=arguments[R];return E.with({path:B.join.apply(B,F([E.path],I,!1))})},b.resolvePath=function(E){for(var I=[],R=1;R<arguments.length;R++)I[R-1]=arguments[R];var K=E.path||"/";return E.with({path:B.resolve.apply(B,F([K],I,!1))})},b.dirname=function(E){var I=B.dirname(E.path);return I.length===1&&I.charCodeAt(0)===46?E:E.with({path:I})},b.basename=function(E){return B.basename(E.path)},b.extname=function(E){return B.extname(E.path)}})(M||(M={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var s in i)r.o(i,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:i[s]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:ct,Utils:DL}=Ah;var Nh=$h(),jh;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(jh||(jh={}));async function Vt(t,e){let r=sl(t),n=await Mh(t,e);return RC(t,r,n,FC)}function RC(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:AC,homedir:async()=>Ro.homedir(),tmpdir:async()=>Ro.tmpdir(),isFile:nt,isFolder:ti,readFile:Ue,writeFile:rr,rename:Oh,mkdirp:async i=>{await Lt(i)},readDir:So,getUsername:ol,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async i=>ct.file(i),connect:n}}function FC(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return Nh.duplex(Ao.connect(t));let e=new Ao.Socket;return(async()=>{let r=await Ue(t),n=r.indexOf(10),i=parseInt(r.slice(0,n).toString(),10),s=r.slice(n+1);e.connect(i,"127.0.0.1",()=>{e.write(s,o=>{o&&(console.error(o),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),Nh.duplex(e)}function qh(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var JL=Be.join(__dirname,"..","..","node_modules",".bin","ts-node"),XL=Be.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function mr(t){let{exec:e,cmd:r,args:n,cwd:i,env:s,stdin:o,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:s,output:a});return new Promise((u,f)=>{let d=[],h=[],m=c==="continuous"?new cl.StringDecoder:void 0;l.stdout.on("data",y=>{d.push(y),c==="continuous"&&a.write(m.write(y))}),l.stdout.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let p=c==="continuous"?new cl.StringDecoder:void 0;l.stderr.on("data",y=>{h.push(y),c==="continuous"&&a.write(Ie(p.write(y)))}),l.stderr.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let w=[];l.exit.then(({code:y})=>{try{w.forEach(A=>A.dispose());let v=Buffer.concat(d),C=Buffer.concat(h);(c===!0||y&&c==="onerror")&&(a.write(v.toString().replace(/\r?\n/g,`\r
`)),a.write(Ie(C.toString()))),c&&y&&a.write(`Exit code ${y}`),y?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:v,stderr:C,code:y}):u({stdout:v,stderr:C})}catch(v){f(v)}},f),o instanceof Buffer?(l.stdin.write(o,y=>{y&&f(y)}),l.stdin.end()):o instanceof Bh.ReadStream?o.pipe(l.stdin):typeof o=="function"&&w.push(o(y=>l.stdin.write(y)))})}async function ss(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:s,output:o,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:s,output:o});return new Promise((u,f)=>{let d="",h=[c&&c(m=>l.write(m))];l.onData(m=>{d+=m,o.raw(m),a&&a.exec(d)&&u({cmdOutput:d})}),l.exit.then(({code:m,signal:p})=>{try{h.forEach(w=>w==null?void 0:w.dispose()),m||p?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:d,code:m,signal:p}):u({cmdOutput:d})}catch(w){f(w)}},m=>{h.forEach(p=>p==null?void 0:p.dispose()),f(m)})})}function sl(t){return async function(e){let{cmd:r,args:n,output:i}=e,s=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?H(H({},process.env),e.env):process.env,l=await Hh(r,a,c,i),u=al.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,d)=>{u.once("error",h=>{i.stop(s,o),d(h)}),u.once("close",(h,m)=>{i.stop(s,o),f({code:h,signal:m})})}),async terminate(){u.kill("SIGKILL")}}}}async function Mh(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var p,w;let{cmd:i,args:s,output:o}=n,a=`Run: ${i} ${(s||[]).join(" ").replace(/\n.*/g,"")}`,c=o.start(a),l=!1,u=n.cwd||t,f=n.env?H(H({},process.env),n.env):process.env,d=await Hh(i,u,f,o),h=r.spawn(d,s||[],{cwd:u,env:f,cols:(p=o.dimensions)==null?void 0:p.columns,rows:(w=o.dimensions)==null?void 0:w.rows,useConpty:l}),m=[o.onDidChangeDimensions&&o.onDidChangeDimensions(y=>h.resize(y.columns,y.rows))];return{onData:h.onData.bind(h),write:h.write.bind(h),resize:h.resize.bind(h),exit:new Promise(y=>{h.onExit(({exitCode:v,signal:C})=>{if(m.forEach(A=>A==null?void 0:A.dispose()),o.stop(a,c),y({code:v,signal:C}),process.platform==="win32")try{h.kill()}catch{}})}),async terminate(){h.kill("SIGKILL")}}}}async function Hh(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Be.isAbsolute(t))return await os(t)||t;if(/[/\\]/.test(t)){let a=Be.join(e,t);return await os(a)||a}let i,s;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,s=c.split(Be.delimiter).filter(Boolean),s.push(Be.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(s===void 0||s.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Be.join(e,t);return await os(a)||a}for(let a of s){let c;Be.isAbsolute(a)?c=Be.join(a,t):c=Be.join(e,a,t);let l=await os(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let o=Be.join(e,t);return await os(o)||o}var zh=process.env.PATHEXT,Wh=zh?zh.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function os(t){if(Wh.indexOf(Be.extname(t))!==-1)return await nt(t)?t:void 0;for(let e of Wh){let r=t+e;if(await nt(r))return r}}function ii(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function as(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,s=e[r]||0;if(i!==s)return i<s}return!1}async function Yt(t){if(process.env.NODE_PATH){for(let e of process.env.NODE_PATH.split(Be.delimiter))if(e)try{return require(`${e}/${t}`)}catch{}}try{return require(t)}catch{}}function Fo(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function ll(t,e){return Fo(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var ul;async function ol(){return ul===void 0&&(ul=(async()=>{try{return Uh.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await mr({exec:sl(void 0),cmd:"id",args:["-u","-n"],output:dn})).stdout.toString().trim()}})()),ul}var gr=V(require("path")),ep=V(require("fs")),pl=V(require("string_decoder")),tp=V(require("crypto")),rp=V(require("util"));var kC=V(require("path")),fl=V(require("string_decoder"));var nr="\u2404";async function ko(t,e,r,n="linux",i="Container"){let s=typeof t=="function",o=n==="win32",a=s?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let d=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${nr}; /bin/sh'
`;a.stdin.write(d),await new Promise(m=>{let p="",w=new fl.StringDecoder;a.stdout.on("data",function y(v){p+=w.write(v),p.includes(d)&&(a.stdout.off("data",y),m())})})}let c=_C(a),l;async function u(d,h){let m=l=(async()=>{try{await l}catch{}return f(Fo(n,d),h)})();try{return await Promise.race([m,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===m&&(l=void 0)}}async function f(d,h){let m=`Run in ${i.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,p;if((h==null?void 0:h.logOutput)!=="silent"&&(p=e.start(m,h==null?void 0:h.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:N,signal:D}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${N}, signal: ${D})`,code:N,signal:D})}n==="win32"?a.stdin.write(`[Console]::Write('${nr}'); ( ${d} ); [Console]::Write("${nr}$LastExitCode ${nr}"); [Console]::Error.Write('${nr}')
`):a.stdin.write(`echo -n ${nr}; ( ${d} ); echo -n ${nr}$?${nr}; echo -n ${nr} >&2
`);let[w,y]=Gh(a.stdout,[1,2],(h==null?void 0:h.logOutput)==="continuous"?(N,D,U)=>{D===1&&U===0&&e.write(N,h==null?void 0:h.logLevel)}:()=>{}),v=Gh(a.stderr,[1],(h==null?void 0:h.logOutput)==="continuous"?(N,D,U)=>{D===0&&U===0&&e.write(N,h==null?void 0:h.logLevel)}:()=>{})[0];(h==null?void 0:h.stdin)&&(await w,a.stdin.write(h==null?void 0:h.stdin));let[C,A]=await y,[k]=await v,T=parseInt(A,10)||0;return((h==null?void 0:h.logOutput)===void 0||(h==null?void 0:h.logOutput)===!0)&&(e.write(C,h==null?void 0:h.logLevel),e.write(k,h==null?void 0:h.logLevel),T&&e.write(`Exit code ${T}`,h==null?void 0:h.logLevel)),(h==null?void 0:h.logOutput)==="continuous"&&T&&e.write(`Exit code ${T}`,h==null?void 0:h.logLevel),(h==null?void 0:h.logOutput)!=="silent"&&e.stop(m,p,h==null?void 0:h.logLevel),T?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${d}`,code:T,stdout:C,stderr:k}):{stdout:C,stderr:k}}return{exec:u,process:a,platform:n,path:Fo(n,kC)}}function Gh(t,e,r){let n=e.map(()=>{let u,f=new Promise((d,h)=>u={resolve:d,reject:h});return H({promise:f},u)}),i=new fl.StringDecoder("utf8"),s=[],o=0,a=[];function c(u){let f=i.write(u);l(f)}function l(u){let f=u.indexOf(nr);if(f!==-1){let d=u.substr(0,f);s.push(d),r(d,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(n[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else s.push(u),r(u,o,a.length)}return t.on("data",c),n.map(u=>u.promise)}function _C(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],s=c=>n.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),n.length=0,i.length=0}}}var Vh=V(require("events")),dl=class{constructor(e){this.register=e;this.nodeEmitter=new Vh.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),this.register&&this.nodeEmitter.listenerCount("event")===1&&this.register.on(),{dispose:()=>{this.register&&this.nodeEmitter.listenerCount("event")===1&&this.register.off(),this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}};var si=V(require("path"));function Yh(t,e){let r,n=t.platform==="win32",i=re(H({},t),{get env(){return r||(r=Kh(n,t.env))}}),s=TC.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=Jh(s,t.containerWorkspaceFolder)),_o(s,e)}function oi(t,e,r,n){let i=t==="win32";return _o($C.bind(void 0,i,e,Kh(i,r)),n)}function _o(t,e){if(typeof e=="string")return Jh(t,e);if(Array.isArray(e))return e.map(r=>_o(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=_o(t,e[n])}),r}return e}var LC=/\$\{(.*?)\}/g;function Kh(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function Jh(t,e){return e.replace(LC,DC.bind(void 0,t))}function DC(t,e,r){let n=[],i=r.split(":");return i.length>1&&(r=i[0],n=i.slice(1)),t(e,r,n)}function TC(t,e,r,n,i){switch(n){case"env":case"localEnv":return Xh(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?si.win32:si.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?si.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function $C(t,e,r,n,i,s){switch(i){case"containerEnv":return Xh(t,r,s,n,e);default:return n}}function Xh(t,e,r,n,i){if(r.length>0){let s=r[0];t&&(s=s.toLowerCase());let o=e[s];return typeof o=="string"?o:r.length>1?r[1]:""}throw new ce({description:`'${n}'${i?` in ${si.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function cs(t){return new Promise(e=>setTimeout(e,t))}async function Zh(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,f,d])=>{let h=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:h[1],pgrp:h[2],cwd:c,mntNS:l,cmd:d,env:f.split(" ").reduce((m,p)=>{let w=p.indexOf("=");return w!==-1&&(m[p.substr(0,w)]=p.substr(w+1)),m},{})}}),mntNS:s}}function Qh(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function hl(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>hl(n,e,r+e))}`}var hn;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(hn||(hn={}));function np(t,e,r){function n(s){i.fire(s.toString())}let i=new dl({on:()=>process.stdin.on("data",n),off:()=>process.stdin.off("data",n)});return process.stdin.setEncoding("utf8"),{enabled:t,skipNonBlocking:e,output:ve(re(H({},r),{get dimensions(){return r.dimensions},event:s=>r.event(re(H({},s),{channel:"postCreate"}))})),onDidInput:i.event,done:()=>{}}}var NC="updateContentCommand";async function ip(t){let{params:e,createdAt:r,startedAt:n,remoteWorkspaceFolder:i,containerUser:s,containerGroup:o,containerEnv:a,remoteExec:c,remotePtyExec:l,remoteExecAsRoot:u,rootShellServer:f}=t,d;if(f&&s==="root"?d=f:d=await ko(c,e.output,e.sessionId),!a){let A=(await d.exec("echo $PATH")).stdout.trim();a=A?{PATH:A}:{}}s||(s=await jC(d)),!u&&s==="root"&&(u=c);let h=await zC(d),m=await BC(d,s);m||e.output.write(nl(`User ${s} not found in /etc/passwd.`));let p=await UC(a,m),w=await MC(a,m),y=HC(w,e),v;f?v=Promise.resolve(f):s==="root"&&(v=Promise.resolve(d));let C={createdAt:r,startedAt:n,osRelease:h,user:s,gid:o||(m==null?void 0:m.gid),env:a,shell:p,homeFolder:w,userDataFolder:y,remoteWorkspaceFolder:i,remoteExec:c,remotePtyExec:l,remoteExecAsRoot:u,shellServer:d};return(v||u)&&(C.launchRootShellServer=()=>v||(v=ko(u,e.output))),C}async function jC(t){return(await t.exec("id -un")).stdout.trim()}async function MC(t,e){return t.HOME||e&&e.home||"/root"}async function UC(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function BC(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return qC(r,e)}function qC(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}function HC(t,e){return gr.posix.resolve(t,e.containerDataFolder||".devcontainer")}function sp(t){return t.containerSystemDataFolder||"/var/devcontainer"}async function Lo(t,e,r){await KC(t,e),await JC(t,e);let n=t.computeExtensionHostEnv||t.postCreate.enabled,i=oi(t.cliHost.platform,r.configFilePath,e.env,r),s=n?Do(t,e,i):Promise.resolve({});return t.postCreate.enabled&&await ml(t,e,i,s,!1),{remoteEnv:t.computeExtensionHostEnv?await s:{}}}function Do(t,e,r){return XC(t,e,r).then(n=>H(H(H({},n),t.remoteEnv),r.remoteEnv))}async function ml(t,e,r,n,i){let s=t.postCreate.skipNonBlocking,o=r.waitFor||NC;return s&&o==="initializeCommand"||(await gl(t,e,r,"onCreateCommand",n,!1),s&&o==="onCreateCommand")||(await gl(t,e,r,"updateContentCommand",n,!!t.prebuild),s&&o==="updateContentCommand")?"skipNonBlocking":t.prebuild?"prebuild":(await gl(t,e,r,"postCreateCommand",n,!1),s&&o==="postCreateCommand"?"skipNonBlocking":i?"stopForPersonalization":(await WC(t,e,r,n),s&&o==="postStartCommand"?"skipNonBlocking":(await GC(t,e,r,n),"done")))}async function zC(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function gl(t,e,r,n,i,s){let o=gr.posix.join(e.userDataFolder,`.${n}Marker`),a=!!e.createdAt&&await op(e.shellServer,o,e.createdAt)||s;await wl(t,e,r,n,i,a)}async function WC(t,e,r,n){let i=gr.posix.join(e.userDataFolder,".postStartCommandMarker"),s=!!e.startedAt&&await op(e.shellServer,i,e.startedAt);await wl(t,e,r,"postStartCommand",n,s)}async function op(t,e,r){try{return await t.exec(`mkdir -p '${gr.posix.dirname(e)}' && CONTENT="$(cat '${e}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function GC(t,e,r,n){await wl(t,e,r,"postAttachCommand",n,!0)}async function wl({postCreate:t},e,r,n,i,s){let o=r[n];if(s&&o&&(typeof o=="string"?o.trim():o.length)){let a=`Running ${n}...`,c=typeof o=="string"?o:o.join(" "),l=ve({event(u){t.output.event(u),u.type==="raw"&&u.text.includes("::endstep::")&&t.output.event({type:"progress",name:a,status:"running",stepDetail:""}),u.type==="raw"&&u.text.includes("::step::")&&t.output.event({type:"progress",name:a,status:"running",stepDetail:`${u.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},S.Info);try{l.event({type:"progress",name:a,status:"running",stepDetail:c});let u=e.remoteWorkspaceFolder||e.homeFolder;l.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await yl(re(H({},t),{output:l}),e,typeof o=="string"?["/bin/sh","-c",o]:o,u,{remoteEnv:await i,print:"continuous"}),l.raw(`\r
`),l.event({type:"progress",name:a,status:"succeeded"})}catch(u){if(l.event({type:"progress",name:a,status:"failed"}),u&&(u.code===130||u.signal===2))l.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(u==null?void 0:u.code)&&l.write(Ie(`${n} failed with exit code ${u.code}. Skipping any further user-provided commands.`)),new ce({description:`The ${n} in the devcontainer.json failed.`,originalError:u})}}}async function ap(t,e){try{return await t.exec(VC(e)),!0}catch{return!1}}function VC(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${gr.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function yl(t,{remotePtyExec:e},r,n,i={}){let s=i.print||(i.silent?"off":"end"),o=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?dn:t.output}),a="",c,l=new Promise(d=>{c=d});o.onData(d=>{a+=d,s==="continuous"&&t.output.raw(d),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(d=>o.write(d)),f=await Promise.race([o.exit,l]);return u&&u.dispose(),s==="end"&&t.output.raw(a),f&&(f.code||f.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:f.code,signal:f.signal}):{cmdOutput:a}}async function YC(t,{remoteExec:e},r,n,i={}){let s=i.print||(i.silent?"off":"end"),o=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?dn:t.output}),a=[],c=[],l=new pl.StringDecoder,u=new pl.StringDecoder,f="",d="",h,m,p=new Promise((A,k)=>{h=A,m=k});o.stdout.on("data",A=>{a.push(A);let k=l.write(A);s==="continuous"&&t.output.write(k.replace(/\r?\n/g,`\r
`)),f+=k,i.resolveOn&&i.resolveOn.exec(f)&&h()}),o.stderr.on("data",A=>{c.push(A),d+=u.write(A)}),i.stdin instanceof Buffer?(o.stdin.write(i.stdin,A=>{A&&m(A)}),o.stdin.end()):i.stdin instanceof ep.ReadStream&&i.stdin.pipe(o.stdin);let w=await Promise.race([o.exit,p]),y=Buffer.concat(a),v=Buffer.concat(c);s==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(Ie(d)));let C=`${f}
${d}`;return w&&(w.code||w.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:C,stdout:y,stderr:v,code:w.code,signal:w.signal}):{cmdOutput:C,stdout:y,stderr:v}}async function KC(t,e){let r=gr.posix.join(sp(t),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await ll(e.shellServer,r)){let n=await e.launchRootShellServer();await ap(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}="${e.env[i]}"`).join("")}
etcEnvrionmentEOF
`)}}async function JC(t,e){let r=gr.posix.join(sp(t),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await ll(e.shellServer,r)){let n=await e.launchRootShellServer();await ap(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function XC(t,e,r){let n=await cp(t,e,r,"cat /proc/self/environ","\0");return n||(t.output.write("userEnvProbe: falling back to printenv"),await cp(t,e,r,"printenv",`
`)||{})}async function cp(t,e,r,n,i){var o;let{userEnvProbe:s}=r||{};if(t.output.write(`userEnvProbe: ${s||t.defaultUserEnvProbe}${s?"":" (default)"}`),s||(s=t.defaultUserEnvProbe),s==="none")return{};try{let c=(await(0,rp.promisify)(tp.randomBytes)(16)).toString("hex"),l=new RegExp(c+"([^]*)"+c),u=e.shell;t.output.write(`userEnvProbe shell: ${u}`);let f=gr.posix.basename(u),d=`echo -n ${c}; ${n}; echo -n ${c}`,h;/^pwsh(-preview)?$/.test(f)?h=s==="loginInteractiveShell"||s==="loginShell"?["-Login","-Command"]:["-Command"]:h=[s==="loginInteractiveShell"?"-lic":s==="loginShell"?"-lc":s==="interactiveShell"?"-ic":"-c"];let m=ve(t.output,S.Trace),p=YC({output:m},{remoteExec:e.remoteExec},[u,...h,d],e.installFolder);Promise.race([p,cs(2e3)]).then(async D=>{if(!D){let U,Y=e.shellServer||await ko(e.remoteExec,t.output);try{({processes:U}=await Zh(Y))}finally{e.shellServer||await Y.process.terminate()}let $=U.find(L=>L.cmd.startsWith(u)&&L.cmd.indexOf(c)!==-1);if($){let M=Qh(U)[$.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${hl(M)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(D=>t.output.write(Ie(D&&(D.stack||D.message)||"Error reading process tree.")));let w=await Promise.race([p,cs(1e4)]);if(!w)return t.output.write(Ie("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let y=w.stdout.toString(),v=l.exec(y),C=v?v[1]:"";if(!C)return;let A=C.split(i).reduce((D,U)=>{let Y=U.indexOf("=");return Y!==-1&&(D[U.substring(0,Y)]=U.substring(Y+1)),D},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(A,void 0,"  ")}`,S.Trace),delete A.PWD;let k=A.PATH,T=(o=e.env)==null?void 0:o.PATH,N=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&k&&T;if(N){let D=e.user;A.PATH=ZC(k,T,D==="root"||D==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof k=="string"?`'${k}'`:"None"}
Container: ${typeof T=="string"?`'${T}'`:"None"}${N?`
Merged:    ${typeof A.PATH=="string"?`'${A.PATH}'`:"None"}`:""}`),A}catch(a){return t.output.write(Ie(a&&(a.stack||a.message)||"Error reading shell environment.")),{}}}function ZC(t,e,r){let n=t.split(":"),i=0;for(let s of e.split(":")){let o=n.indexOf(s);o===-1?(r||!/\/sbin(\/|$)/.test(s))&&n.splice(i++,0,s):i=o+1}return n.join(":")}async function lp(t){for(let e of t)await(typeof e=="function"?e():e)}async function ir(t,e){return(await vl(t,[e]))[0]}async function vl(t,e){let r=await up(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let s in i){let[o,a]=s.split("/");for(let c of i[s]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(o),PublicPort:parseInt(u),Type:a})}}}return r}async function bl(t,e){return(await up(t,"image",[e]))[0]}async function up(t,e,r){if(!r.length)return[];let n=Et(t),i=await mr(re(H({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(s){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),s}}async function To(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let s of r)n.push("--filter",`label=${s}`);return(await bt(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(s=>!!s)}async function fp(t,e){let{exec:r,cmd:n,args:i,env:s,output:o}=Et(t),a=[];for(let d in e)for(let h of e[d])a.push("--filter",`${d}=${h}`);let c=await QC(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:s,output:o}),f=[];return u.stderr.on("data",d=>f.push(d)),u.exit.then(({code:d,signal:h})=>{f.length&&o.write(Ie(Buffer.concat(f).toString())),(d||h&&h!=="SIGKILL")&&o.write(Ie(`Docker events terminated (code: ${d}, signal: ${h}).`))},d=>{o.write(Ie(d&&(d.stack||d.message)))}),u}async function dp(t){try{let r=(await bt(t,"buildx","version")).stdout.toString().match(/(?<major>[0-9]+)\.(?<minor>[0-9]+)\.(?<patch>[0-9]+)/);return r?r[0]:null}catch{return null}}async function bt(t,...e){let r=Et(t);return mr(re(H({},r),{args:(r.args||[]).concat(e)}))}async function QC(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await bt(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function lt(t,...e){let r=Kt(t);return ss(re(H({},r),{args:(r.args||[]).concat(e)}))}async function pn(t,...e){let r=Et(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return mr(re(H({},r),{args:(r.args||[]).concat(e)}))}async function $o(t,...e){let r=Kt(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return ss(re(H({},r),{args:(r.args||[]).concat(e)}))}function El(t,e,r){return async function(n){let{exec:i,cmd:s,args:o,env:a}=Et(t),{argsPrefix:c,args:l}=mp(e,r,n,!1);return i({cmd:s,args:(o||[]).concat(l),env:a,output:pp(n.output,s,c)})}}async function hp(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(s){let{ptyExec:o,cmd:a,args:c,env:l}=Kt(t),{argsPrefix:u,args:f}=mp(e,r,s,!0);return o({cmd:a,args:(c||[]).concat(f),env:l,output:pp(s.output,a,u)})}}function pp(t,e,r){return ex(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function ex(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return ve(re(H({},t),{get dimensions(){return t.dimensions},event:s=>t.event("text"in s?re(H({},s),{text:s.text.replace(n,r)}):s)}))}function mp(t,e,r,n){let{env:i,cwd:s,cmd:o,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),s&&c.push("-w",s),c.push(t);let l=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:l,args:c}}function Et(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.dockerEnv,output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.env,output:t.output}:re(H({},t),{env:t.env})}function Kt(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.dockerEnv,output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.env,output:t.output}:re(H({},t),{env:t.env})}function gp(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}function wp(t){return typeof t=="undefined"||t===null}function tx(t){return typeof t=="object"&&t!==null}function rx(t){return Array.isArray(t)?t:wp(t)?[]:[t]}function nx(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function ix(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function sx(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var ox=wp,ax=tx,cx=rx,lx=ix,ux=sx,fx=nx,$e={isNothing:ox,isObject:ax,toArray:cx,repeat:lx,isNegativeZero:ux,extend:fx};function yp(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ls(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yp(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ls.prototype=Object.create(Error.prototype);ls.prototype.constructor=ls;ls.prototype.toString=function(e){return this.name+": "+yp(this,e)};var ut=ls;function Cl(t,e,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+o,pos:n-e+s.length}}function xl(t,e){return $e.repeat(" ",e-t.length)+t}function dx(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(o-c<0);c++)l=Cl(t.buffer,n[o-c],i[o-c],t.position-(n[o]-n[o-c]),f),a=$e.repeat(" ",e.indent)+xl((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=Cl(t.buffer,n[o],i[o],t.position,f),a+=$e.repeat(" ",e.indent)+xl((t.line+1).toString(),u)+" | "+l.str+`
`,a+=$e.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(o+c>=i.length);c++)l=Cl(t.buffer,n[o+c],i[o+c],t.position-(n[o]-n[o+c]),f),a+=$e.repeat(" ",e.indent)+xl((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var hx=dx,px=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mx=["scalar","sequence","mapping"];function gx(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function wx(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(px.indexOf(r)===-1)throw new ut('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=gx(e.styleAliases||null),mx.indexOf(this.kind)===-1)throw new ut('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ye=wx;function vp(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function yx(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Sl(t){return this.extend(t)}Sl.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ye)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new ut("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Ye))throw new ut("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ut("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ut("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Ye))throw new ut("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Sl.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=vp(i,"implicit"),i.compiledExplicit=vp(i,"explicit"),i.compiledTypeMap=yx(i.compiledImplicit,i.compiledExplicit),i};var vx=Sl,bx=new Ye("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Ex=new Ye("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Cx=new Ye("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),xx=new vx({explicit:[bx,Ex,Cx]});function Sx(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Px(){return null}function Ix(t){return t===null}var Ox=new Ye("tag:yaml.org,2002:null",{kind:"scalar",resolve:Sx,construct:Px,predicate:Ix,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Ax(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Rx(t){return t==="true"||t==="True"||t==="TRUE"}function Fx(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var kx=new Ye("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ax,construct:Rx,predicate:Fx,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function _x(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Lx(t){return 48<=t&&t<=55}function Dx(t){return 48<=t&&t<=57}function Tx(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!_x(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Lx(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Dx(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function $x(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Nx(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!$e.isNegativeZero(t)}var jx=new Ye("tag:yaml.org,2002:int",{kind:"scalar",resolve:Tx,construct:$x,predicate:Nx,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Mx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ux(t){return!(t===null||!Mx.test(t)||t[t.length-1]==="_")}function Bx(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var qx=/^[-+]?[0-9]+e/;function Hx(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if($e.isNegativeZero(t))return"-0.0";return r=t.toString(10),qx.test(r)?r.replace("e",".e"):r}function zx(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||$e.isNegativeZero(t))}var Wx=new Ye("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ux,construct:Bx,predicate:zx,represent:Hx,defaultStyle:"lowercase"}),Gx=xx.extend({implicit:[Ox,kx,jx,Wx]}),Vx=Gx,bp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ep=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Yx(t){return t===null?!1:bp.exec(t)!==null||Ep.exec(t)!==null}function Kx(t){var e,r,n,i,s,o,a,c=0,l=null,u,f,d;if(e=bp.exec(t),e===null&&(e=Ep.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),d=new Date(Date.UTC(r,n,i,s,o,a,c)),l&&d.setTime(d.getTime()-l),d}function Jx(t){return t.toISOString()}var Xx=new Ye("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Yx,construct:Kx,instanceOf:Date,represent:Jx});function Zx(t){return t==="<<"||t===null}var Qx=new Ye("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Zx}),Pl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function e1(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=Pl;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function t1(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=Pl,o=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function r1(t){var e="",r=0,n,i,s=t.length,o=Pl;for(n=0;n<s;n++)n%3==0&&n&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):i===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):i===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}function n1(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var i1=new Ye("tag:yaml.org,2002:binary",{kind:"scalar",resolve:e1,construct:t1,predicate:n1,represent:r1}),s1=Object.prototype.hasOwnProperty,o1=Object.prototype.toString;function a1(t){if(t===null)return!0;var e=[],r,n,i,s,o,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,o1.call(i)!=="[object Object]")return!1;for(s in i)if(s1.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function c1(t){return t!==null?t:[]}var l1=new Ye("tag:yaml.org,2002:omap",{kind:"sequence",resolve:a1,construct:c1}),u1=Object.prototype.toString;function f1(t){if(t===null)return!0;var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(n=o[e],u1.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function d1(t){if(t===null)return[];var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)n=o[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var h1=new Ye("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:f1,construct:d1}),p1=Object.prototype.hasOwnProperty;function m1(t){if(t===null)return!0;var e,r=t;for(e in r)if(p1.call(r,e)&&r[e]!==null)return!1;return!0}function g1(t){return t!==null?t:{}}var w1=new Ye("tag:yaml.org,2002:set",{kind:"mapping",resolve:m1,construct:g1}),Cp=Vx.extend({implicit:[Xx,Qx],explicit:[i1,l1,h1,w1]}),Dr=Object.prototype.hasOwnProperty,No=1,xp=2,Sp=3,jo=4,Il=1,y1=2,Pp=3,v1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,b1=/[\x85\u2028\u2029]/,E1=/[,\[\]\{\}]/,Ip=/^(?:!|!!|![a-z\-]+!)$/i,Op=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ap(t){return Object.prototype.toString.call(t)}function sr(t){return t===10||t===13}function mn(t){return t===9||t===32}function ft(t){return t===9||t===32||t===10||t===13}function ai(t){return t===44||t===91||t===93||t===123||t===125}function C1(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function x1(t){return t===120?2:t===117?4:t===85?8:0}function S1(t){return 48<=t&&t<=57?t-48:-1}function Rp(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function P1(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Fp=new Array(256),kp=new Array(256);for(gn=0;gn<256;gn++)Fp[gn]=Rp(gn)?1:0,kp[gn]=Rp(gn);var gn;function I1(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Cp,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _p(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=hx(r),new ut(e,r)}function oe(t,e){throw _p(t,e)}function Mo(t,e){t.onWarning&&t.onWarning.call(null,_p(t,e))}var Lp={YAML:function(e,r,n){var i,s,o;e.version!==null&&oe(e,"duplication of %YAML directive"),n.length!==1&&oe(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&oe(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&oe(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Mo(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&oe(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],Ip.test(i)||oe(e,"ill-formed tag handle (first argument) of the TAG directive"),Dr.call(e.tagMap,i)&&oe(e,'there is a previously declared suffix for "'+i+'" tag handle'),Op.test(s)||oe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{oe(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function Tr(t,e,r,n){var i,s,o,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||oe(t,"expected valid JSON character");else v1.test(a)&&oe(t,"the stream contains non-printable characters");t.result+=a}}function Dp(t,e,r,n){var i,s,o,a;for($e.isObject(r)||oe(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Dr.call(e,s)||(e[s]=r[s],n[s]=!0)}function ci(t,e,r,n,i,s,o,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&oe(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ap(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&Ap(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(l=0,u=s.length;l<u;l+=1)Dp(t,e,s[l],r);else Dp(t,e,s,r);else!t.json&&!Dr.call(r,i)&&Dr.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,oe(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function Ol(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):oe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function De(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;mn(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(sr(i))for(Ol(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Mo(t,"deficient indentation"),n}function Uo(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||ft(r)))}function Al(t,e){e===1?t.result+=" ":e>1&&(t.result+=$e.repeat(`
`,e-1))}function O1(t,e,r){var n,i,s,o,a,c,l,u,f=t.kind,d=t.result,h;if(h=t.input.charCodeAt(t.position),ft(h)||ai(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),ft(i)||r&&ai(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),ft(i)||r&&ai(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),ft(n))break}else{if(t.position===t.lineStart&&Uo(t)||r&&ai(h))break;if(sr(h))if(c=t.line,l=t.lineStart,u=t.lineIndent,De(t,!1,-1),t.lineIndent>=e){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Tr(t,s,o,!1),Al(t,t.line-c),s=o=t.position,a=!1),mn(h)||(o=t.position+1),h=t.input.charCodeAt(++t.position)}return Tr(t,s,o,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function A1(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Tr(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else sr(r)?(Tr(t,n,i,!0),Al(t,De(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Uo(t)?oe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);oe(t,"unexpected end of the stream within a single quoted scalar")}function R1(t,e){var r,n,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Tr(t,r,t.position,!0),t.position++,!0;if(a===92){if(Tr(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),sr(a))De(t,!1,e);else if(a<256&&Fp[a])t.result+=kp[a],t.position++;else if((o=x1(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=C1(a))>=0?s=(s<<4)+o:oe(t,"expected hexadecimal character");t.result+=P1(s),t.position++}else oe(t,"unknown escape sequence");r=n=t.position}else sr(a)?(Tr(t,r,n,!0),Al(t,De(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Uo(t)?oe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}oe(t,"unexpected end of the stream within a double quoted scalar")}function F1(t,e){var r=!0,n,i,s,o=t.tag,a,c=t.anchor,l,u,f,d,h,m=Object.create(null),p,w,y,v;if(v=t.input.charCodeAt(t.position),v===91)u=93,h=!1,a=[];else if(v===123)u=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),v=t.input.charCodeAt(++t.position);v!==0;){if(De(t,!0,e),v=t.input.charCodeAt(t.position),v===u)return t.position++,t.tag=o,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=a,!0;r?v===44&&oe(t,"expected the node content, but found ','"):oe(t,"missed comma between flow collection entries"),w=p=y=null,f=d=!1,v===63&&(l=t.input.charCodeAt(t.position+1),ft(l)&&(f=d=!0,t.position++,De(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,li(t,e,No,!1,!0),w=t.tag,p=t.result,De(t,!0,e),v=t.input.charCodeAt(t.position),(d||t.line===n)&&v===58&&(f=!0,v=t.input.charCodeAt(++t.position),De(t,!0,e),li(t,e,No,!1,!0),y=t.result),h?ci(t,a,m,w,p,y,n,i,s):f?a.push(ci(t,null,m,w,p,y,n,i,s)):a.push(p),De(t,!0,e),v=t.input.charCodeAt(t.position),v===44?(r=!0,v=t.input.charCodeAt(++t.position)):r=!1}oe(t,"unexpected end of the stream within a flow collection")}function k1(t,e){var r,n,i=Il,s=!1,o=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Il===i?i=f===43?Pp:y1:oe(t,"repeat of a chomping mode identifier");else if((u=S1(f))>=0)u===0?oe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?oe(t,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(mn(f)){do f=t.input.charCodeAt(++t.position);while(mn(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!sr(f)&&f!==0)}for(;f!==0;){for(Ol(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),sr(f)){c++;continue}if(t.lineIndent<a){i===Pp?t.result+=$e.repeat(`
`,s?1+c:c):i===Il&&s&&(t.result+=`
`);break}for(n?mn(f)?(l=!0,t.result+=$e.repeat(`
`,s?1+c:c)):l?(l=!1,t.result+=$e.repeat(`
`,c+1)):c===0?s&&(t.result+=" "):t.result+=$e.repeat(`
`,c):t.result+=$e.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,r=t.position;!sr(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Tr(t,r,t.position,!1)}return!0}function Tp(t,e){var r,n=t.tag,i=t.anchor,s=[],o,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,oe(t,"tab characters must not be used in indentation")),!(c!==45||(o=t.input.charCodeAt(t.position+1),!ft(o))));){if(a=!0,t.position++,De(t,!0,-1)&&t.lineIndent<=e){s.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,li(t,e,Sp,!1,!0),s.push(t.result),De(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)oe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function _1(t,e,r){var n,i,s,o,a,c,l=t.tag,u=t.anchor,f={},d=Object.create(null),h=null,m=null,p=null,w=!1,y=!1,v;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),v=t.input.charCodeAt(t.position);v!==0;){if(!w&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,oe(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(v===63||v===58)&&ft(n))v===63?(w&&(ci(t,f,d,h,m,null,o,a,c),h=m=p=null),y=!0,w=!0,i=!0):w?(w=!1,i=!0):oe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,v=n;else{if(o=t.line,a=t.lineStart,c=t.position,!li(t,r,xp,!1,!0))break;if(t.line===s){for(v=t.input.charCodeAt(t.position);mn(v);)v=t.input.charCodeAt(++t.position);if(v===58)v=t.input.charCodeAt(++t.position),ft(v)||oe(t,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(ci(t,f,d,h,m,null,o,a,c),h=m=p=null),y=!0,w=!1,i=!1,h=t.tag,m=t.result;else if(y)oe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(y)oe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(w&&(o=t.line,a=t.lineStart,c=t.position),li(t,e,jo,!0,i)&&(w?m=t.result:p=t.result),w||(ci(t,f,d,h,m,p,o,a,c),h=m=p=null),De(t,!0,-1),v=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&v!==0)oe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return w&&ci(t,f,d,h,m,null,o,a,c),y&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),y}function L1(t){var e,r=!1,n=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&oe(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(n=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):oe(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ft(o);)o===33&&(n?oe(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Ip.test(i)||oe(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),E1.test(s)&&oe(t,"tag suffix cannot contain flow indicator characters")}s&&!Op.test(s)&&oe(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{oe(t,"tag name is malformed: "+s)}return r?t.tag=s:Dr.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:oe(t,'undeclared tag handle "'+i+'"'),!0}function D1(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&oe(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!ft(r)&&!ai(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&oe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function T1(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!ft(n)&&!ai(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&oe(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Dr.call(t.anchorMap,r)||oe(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],De(t,!0,-1),!0}function li(t,e,r,n,i){var s,o,a,c=1,l=!1,u=!1,f,d,h,m,p,w;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=jo===r||Sp===r,n&&De(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;L1(t)||D1(t);)De(t,!0,-1)?(l=!0,a=s,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||jo===r)&&(No===r||xp===r?p=e:p=e+1,w=t.position-t.lineStart,c===1?a&&(Tp(t,w)||_1(t,w,p))||F1(t,p)?u=!0:(o&&k1(t,p)||A1(t,p)||R1(t,p)?u=!0:T1(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&oe(t,"alias node should not have any properties")):O1(t,p,No===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&Tp(t,w))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&oe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(m=t.implicitTypes[f],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Dr.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,h=t.typeMap.multi[t.kind||"fallback"],f=0,d=h.length;f<d;f+=1)if(t.tag.slice(0,h[f].tag.length)===h[f].tag){m=h[f];break}m||oe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&oe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):oe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function $1(t){var e=t.position,r,n,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(De(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!ft(o);)o=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&oe(t,"directive name must not be less than one character in length");o!==0;){for(;mn(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!sr(o));break}if(sr(o))break;for(r=t.position;o!==0&&!ft(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}o!==0&&Ol(t),Dr.call(Lp,n)?Lp[n](t,n,i):Mo(t,'unknown document directive "'+n+'"')}if(De(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,De(t,!0,-1)):s&&oe(t,"directives end mark is expected"),li(t,t.lineIndent-1,jo,!1,!0),De(t,!0,-1),t.checkLineBreaks&&b1.test(t.input.slice(e,t.position))&&Mo(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Uo(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,De(t,!0,-1));return}if(t.position<t.length-1)oe(t,"end of the stream or a document separator is expected");else return}function $p(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new I1(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,oe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)$1(r);return r.documents}function N1(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=$p(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function j1(t,e){var r=$p(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new ut("expected a single document in the stream, but found more")}}var M1=N1,U1=j1,Np={loadAll:M1,load:U1},jp=Object.prototype.toString,Mp=Object.prototype.hasOwnProperty,Rl=65279,B1=9,us=10,q1=13,H1=32,z1=33,W1=34,Fl=35,G1=37,V1=38,Y1=39,K1=42,Up=44,J1=45,Bo=58,X1=61,Z1=62,Q1=63,eS=64,Bp=91,qp=93,tS=96,Hp=123,rS=124,zp=125,Ke={};Ke[0]="\\0";Ke[7]="\\a";Ke[8]="\\b";Ke[9]="\\t";Ke[10]="\\n";Ke[11]="\\v";Ke[12]="\\f";Ke[13]="\\r";Ke[27]="\\e";Ke[34]='\\"';Ke[92]="\\\\";Ke[133]="\\N";Ke[160]="\\_";Ke[8232]="\\L";Ke[8233]="\\P";var nS=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],iS=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function sS(t,e){var r,n,i,s,o,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=t.compiledTypeMap.fallback[o],c&&Mp.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[o]=a;return r}function oS(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new ut("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+$e.repeat("0",n-e.length)+e}var aS=1,fs=2;function cS(t){this.schema=t.schema||Cp,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=$e.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=sS(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?fs:aS,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Wp(t,e){for(var r=$e.repeat(" ",e),n=0,i=-1,s="",o,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(o=t.slice(n),n=a):(o=t.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function kl(t,e){return`
`+$e.repeat(" ",t.indent*e)}function lS(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function qo(t){return t===H1||t===B1}function ds(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Rl||65536<=t&&t<=1114111}function Gp(t){return ds(t)&&t!==Rl&&t!==q1&&t!==us}function Vp(t,e,r){var n=Gp(t),i=n&&!qo(t);return(r?n:n&&t!==Up&&t!==Bp&&t!==qp&&t!==Hp&&t!==zp)&&t!==Fl&&!(e===Bo&&!i)||Gp(e)&&!qo(e)&&t===Fl||e===Bo&&i}function uS(t){return ds(t)&&t!==Rl&&!qo(t)&&t!==J1&&t!==Q1&&t!==Bo&&t!==Up&&t!==Bp&&t!==qp&&t!==Hp&&t!==zp&&t!==Fl&&t!==V1&&t!==K1&&t!==z1&&t!==rS&&t!==X1&&t!==Z1&&t!==Y1&&t!==W1&&t!==G1&&t!==eS&&t!==tS}function fS(t){return!qo(t)&&t!==Bo}function hs(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Yp(t){var e=/^\n* /;return e.test(t)}var Kp=1,_l=2,Jp=3,Xp=4,ui=5;function dS(t,e,r,n,i,s,o,a){var c,l=0,u=null,f=!1,d=!1,h=n!==-1,m=-1,p=uS(hs(t,0))&&fS(hs(t,t.length-1));if(e||o)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=hs(t,c),!ds(l))return ui;p=p&&Vp(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=hs(t,c),l===us)f=!0,h&&(d=d||c-m-1>n&&t[m+1]!==" ",m=c);else if(!ds(l))return ui;p=p&&Vp(l,u,a),u=l}d=d||h&&c-m-1>n&&t[m+1]!==" "}return!f&&!d?p&&!o&&!i(t)?Kp:s===fs?ui:_l:r>9&&Yp(t)?ui:o?s===fs?ui:_l:d?Xp:Jp}function hS(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===fs?'""':"''";if(!t.noCompatMode&&(nS.indexOf(e)!==-1||iS.test(e)))return t.quotingType===fs?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return lS(t,l)}switch(dS(e,a,t.indent,o,c,t.quotingType,t.forceQuotes&&!n,i)){case Kp:return e;case _l:return"'"+e.replace(/'/g,"''")+"'";case Jp:return"|"+Zp(e,t.indent)+Qp(Wp(e,s));case Xp:return">"+Zp(e,t.indent)+Qp(Wp(pS(e,o),s));case ui:return'"'+mS(e)+'"';default:throw new ut("impossible error: invalid scalar style")}}()}function Zp(t,e){var r=Yp(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function Qp(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function pS(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,em(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],c=o[2];s=c[0]===" ",n+=a+(!i&&!s&&c!==""?`
`:"")+em(c,e),i=s}return n}function em(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(s=o>i?o:a,c+=`
`+t.slice(i,s),i=s+1),o=a;return c+=`
`,t.length-i>e&&o>i?c+=t.slice(i,o)+`
`+t.slice(o+1):c+=t.slice(i),c.slice(1)}function mS(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=hs(t,i),n=Ke[r],!n&&ds(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||oS(r);return e}function gS(t,e,r){var n="",i=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(wr(t,e,a,!1,!1)||typeof a=="undefined"&&wr(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function tm(t,e,r,n){var i="",s=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(wr(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&wr(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=kl(t,e)),t.dump&&us===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function wS(t,e,r){var n="",i=t.tag,s=Object.keys(r),o,a,c,l,u;for(o=0,a=s.length;o<a;o+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=s[o],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!wr(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!wr(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function yS(t,e,r,n){var i="",s=t.tag,o=Object.keys(r),a,c,l,u,f,d;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new ut("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)d="",(!n||i!=="")&&(d+=kl(t,e)),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!wr(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&us===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,f&&(d+=kl(t,e)),!!wr(t,e+1,u,!0,f)&&(t.dump&&us===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,i+=d));t.tag=s,t.dump=i||"{}"}function rm(t,e,r){var n,i,s,o,a,c;for(i=r?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,jp.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(Mp.call(a.represent,c))n=a.represent[c](e,c);else throw new ut("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function wr(t,e,r,n,i,s,o){t.tag=null,t.dump=r,rm(t,r,!1)||rm(t,r,!0);var a=jp.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,d;if(u&&(f=t.duplicates.indexOf(r),d=f!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(i=!1),d&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&d&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(yS(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(wS(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?tm(t,e-1,t.dump,i):tm(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(gS(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&hS(t,t.dump,e,s,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new ut("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function vS(t,e){var r=[],n=[],i,s;for(Ll(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function Ll(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Ll(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)Ll(t[n[i]],e,r)}function bS(t,e){e=e||{};var r=new cS(e);r.noRefs||vS(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),wr(r,0,n,!0,!0)?r.dump+`
`:""}var ES=bS,CS={dump:ES};function Dl(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Ho=Np.load,UD=Np.loadAll,BD=CS.dump;var qD=Dl("safeLoad","load"),HD=Dl("safeLoadAll","loadAll"),zD=Dl("safeDump","dump");var Nf=V(im());var Yo=V(require("path"));var dm=V(require("path"));var cm=V(require("crypto"));"use strict";function zo(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",s=0,o=16,a=0,c=0,l=0,u=0,f=0;function d(C,A){for(var k=0,T=0;k<C||!A;){var N=t.charCodeAt(n);if(N>=48&&N<=57)T=T*16+N-48;else if(N>=65&&N<=70)T=T*16+N-65+10;else if(N>=97&&N<=102)T=T*16+N-97+10;else break;n++,k++}return k<C&&(T=-1),T}function h(C){n=C,i="",s=0,o=16,f=0}function m(){var C=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&fi(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&fi(t.charCodeAt(n)))for(n++;n<t.length&&fi(t.charCodeAt(n));)n++;else return f=3,t.substring(C,n);var A=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&fi(t.charCodeAt(n))){for(n++;n<t.length&&fi(t.charCodeAt(n));)n++;A=n}else f=3;return t.substring(C,A)}function p(){for(var C="",A=n;;){if(n>=r){C+=t.substring(A,n),f=2;break}var k=t.charCodeAt(n);if(k===34){C+=t.substring(A,n),n++;break}if(k===92){if(C+=t.substring(A,n),n++,n>=r){f=2;break}var T=t.charCodeAt(n++);switch(T){case 34:C+='"';break;case 92:C+="\\";break;case 47:C+="/";break;case 98:C+="\b";break;case 102:C+="\f";break;case 110:C+=`
`;break;case 114:C+="\r";break;case 116:C+="	";break;case 117:var N=d(4,!0);N>=0?C+=String.fromCharCode(N):f=4;break;default:f=5}A=n;continue}if(k>=0&&k<=31)if(ps(k)){C+=t.substring(A,n),f=2;break}else f=6;n++}return C}function w(){if(i="",f=0,s=n,c=a,u=l,n>=r)return s=r,o=17;var C=t.charCodeAt(n);if(jl(C)){do n++,i+=String.fromCharCode(C),C=t.charCodeAt(n);while(jl(C));return o=15}if(ps(C))return n++,i+=String.fromCharCode(C),C===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,o=14;switch(C){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=p(),o=10;case 47:var A=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!ps(t.charCodeAt(n));)n++;return i=t.substring(A,n),o=12}if(t.charCodeAt(n+1)===42){n+=2;for(var k=r-1,T=!1;n<k;){var N=t.charCodeAt(n);if(N===42&&t.charCodeAt(n+1)===47){n+=2,T=!0;break}n++,ps(N)&&(N===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return T||(n++,f=1),i=t.substring(A,n),o=13}return i+=String.fromCharCode(C),n++,o=16;case 45:if(i+=String.fromCharCode(C),n++,n===r||!fi(t.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),o=11;default:for(;n<r&&y(C);)n++,C=t.charCodeAt(n);if(s!==n){switch(i=t.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(C),n++,o=16}}function y(C){if(jl(C)||ps(C))return!1;switch(C){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function v(){var C;do C=w();while(C>=12&&C<=15);return C}return{setPosition:h,getPosition:function(){return n},scan:e?v:w,getToken:function(){return o},getTokenValue:function(){return i},getTokenOffset:function(){return s},getTokenLength:function(){return n-s},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return s-u},getTokenError:function(){return f}}}function jl(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function ps(t){return t===10||t===13||t===8232||t===8233}function fi(t){return t>=48&&t<=57}"use strict";"use strict";var Wo;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Wo||(Wo={}));function sm(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Wo.DEFAULT);var n=null,i=[],s=[];function o(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};o(c),s.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var c=[];o(c),s.push(i),i=c,n=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:o,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return om(t,a,r),i[0]}function om(t,e,r){r===void 0&&(r=Wo.DEFAULT);var n=zo(t,!1);function i(U){return U?function(){return U(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function s(U){return U?function(Y){return U(Y,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var o=i(e.onObjectBegin),a=s(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),f=s(e.onLiteralValue),d=s(e.onSeparator),h=i(e.onComment),m=s(e.onError),p=r&&r.disallowComments,w=r&&r.allowTrailingComma;function y(){for(;;){var U=n.scan();switch(n.getTokenError()){case 4:v(14);break;case 5:v(15);break;case 3:v(13);break;case 1:p||v(11);break;case 2:v(12);break;case 6:v(16);break}switch(U){case 12:case 13:p?v(10):h();break;case 16:v(1);break;case 15:case 14:break;default:return U}}}function v(U,Y,$){if(Y===void 0&&(Y=[]),$===void 0&&($=[]),m(U),Y.length+$.length>0)for(var L=n.getToken();L!==17;){if(Y.indexOf(L)!==-1){y();break}else if($.indexOf(L)!==-1)break;L=y()}}function C(U){var Y=n.getTokenValue();return U?f(Y):a(Y),y(),!0}function A(){switch(n.getToken()){case 11:var U=n.getTokenValue(),Y=Number(U);isNaN(Y)&&(v(2),Y=0),f(Y);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return y(),!0}function k(){return n.getToken()!==10?(v(3,[],[2,5]),!1):(C(!1),n.getToken()===6?(d(":"),y(),D()||v(4,[],[2,5])):v(5,[],[2,5]),!0)}function T(){o(),y();for(var U=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(U||v(4,[],[]),d(","),y(),n.getToken()===2&&w)break}else U&&v(6,[],[]);k()||v(4,[],[2,5]),U=!0}return c(),n.getToken()!==2?v(7,[2],[]):y(),!0}function N(){l(),y();for(var U=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(U||v(4,[],[]),d(","),y(),n.getToken()===4&&w)break}else U&&v(6,[],[]);D()||v(4,[],[4,5]),U=!0}return u(),n.getToken()!==4?v(8,[4],[]):y(),!0}function D(){switch(n.getToken()){case 3:return N();case 1:return T();case 10:return C(!0);default:return A()}}return y(),n.getToken()===17?r.allowEmptyContent?!0:(v(4,[],[]),!1):D()?(n.getToken()!==17&&v(9,[],[]),!0):(v(4,[],[]),!1)}"use strict";function am(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var yn=sm;function Go(t,e){for(var r=e.length-1;r>=0;r--)t=am(t,e[r]);return t}var lm=V(require("util"));var um={async readDocument(t){switch(t.scheme){case"file":try{return(await Ue(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=Go(r,e);await rr(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Vo=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case Vo.scheme:try{return(await this.fileHost.readFile(qe(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Vo.scheme:let i=Go(n,r);await this.fileHost.writeFile(qe(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},yr=Vo;yr.scheme="vscode-fileHost";var bn=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case bn.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case bn.scheme:try{if(!bn.nonce){let o=await(0,lm.promisify)(cm.randomBytes)(20);bn.nonce=o.toString("hex")}let i=Go(n,r),s=`EOF-${bn.nonce}`;await this.shellServer.exec(`cat <<'${s}' >${e.path}
${i}
${s}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},vn=bn;vn.scheme="vscode-remote";var fm=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function Ml(t,e){let r={file:um,[yr.scheme]:new yr(t)};return e&&(r[vn.scheme]=new vn(e)),new fm(r)}var wT=new Map;var $r;(function(o){o[o.Slash=47]="Slash",o[o.Colon=58]="Colon",o[o.A=65]="A",o[o.Z=90]="Z",o[o.a=97]="a",o[o.z=122]="z"})($r||($r={}));function qe(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===yr.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function hm(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function Dt(t,e){return ct.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:yr.scheme})}async function En(t,e){let r=hm(t.path,e);for(let n of r)if(await t.isFile(n))return ct.file(n).with({scheme:yr.scheme})}function ms(t){let e=dm.posix.dirname(t.path);return t.with({path:e})}function pm(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e=H({},t),r=e.customizations||(e.customizations={}),n=r.vscode||(r.vscode={});return e.extensions&&(n.extensions=(n.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(n.settings=H(H({},e.settings),n.settings||{}),delete e.settings),e.devPort!==void 0&&n.devPort===void 0&&(n.devPort=e.devPort,delete e.devPort),e}function di(t,e,r){return mm(t,e.configFilePath,r)}function mm(t,e,r){let n=ms(e);return e.with({path:Yo.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==vn.scheme?(Yo.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function Cn(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function gs(t,e){return di(t,e,FS(e))}function FS(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function Ko(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(a=>qe(di(t,e,a),t.platform))}else if(typeof e.dockerComposeFile=="string")return[qe(di(t,e,e.dockerComposeFile),t.platform)];let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(n,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let s=[t.path.resolve(n,"docker-compose.yml")],o=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(o)&&s.push(o),s}var Qt=V(require("path")),Df=V(require("string_decoder")),X0=V(Ts());var Re=V(require("path")),U0=V(require("url")),B0=V(Ts());var Va=V($y()),Ya=V(require("url"));function Xr(t,e){return new Promise((r,n)=>{let i=new Ya.URL(t.url),s={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},o=Va.https.request(s,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,S.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});o.on("error",n),t.data&&o.write(t.data),o.end()})}function Ny(t,e){return new Promise((r,n)=>{let i=new Ya.URL(t.url),s={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:"HEAD",headers:t.headers},o=Va.https.request(s,a=>{a.on("error",n),e&&e.write(`HEAD ${t.url} -> ${a.statusCode}`,S.Trace),r(a.statusCode)});o.on("error",n),o.end()})}function Ns(t,e){return new Promise((r,n)=>{let i=new Ya.URL(t.url),s={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},o=Va.https.request(s,a=>{a.on("error",n);let c={statusCode:a.statusCode,resHeaders:a.headers};r(c)});o.on("error",n),t.data&&o.write(t.data),o.end()})}function jy(t,e){return t.overrideFeatureInstallOrder?DO(t,e):My(e)}function DO(t,e){let r=My(e),n=[];for(let i of t.overrideFeatureInstallOrder){let s=r.find(o=>o.sourceInformation.userFeatureIdWithoutVersion===i||o.sourceInformation.userFeatureId===i);if(!s)throw new Error(`Feature ${i} not found`);n.push(s),e.splice(e.indexOf(s),1)}return n.concat(e)}function My(t){let e=t.map(c=>({feature:c,before:new Set,after:new Set})).reduce((c,l)=>c.set(l.feature.sourceInformation.userFeatureId,l),new Map),r=[...e.values()];for(let c of r)for(let l of c.feature.features[0].installAfter||[]){let u=e.get(l);u&&(c.after.add(u),u.before.add(c))}let{roots:n,islands:i}=r.reduce((c,l)=>(l.after.size===0&&(l.before.size===0?c.islands.push(l):c.roots.push(l)),c),{roots:[],islands:[]}),s=[],o=n;for(;o.length;){let c=[];for(let l of o)for(let u of l.before)u.after.delete(l),u.after.size===0&&c.push(u);s.push(...o.map(l=>l.feature).sort((l,u)=>l.sourceInformation.userFeatureId<u.sourceInformation.userFeatureId?-1:1)),o=c}s.push(...i.map(c=>c.feature).sort((c,l)=>c.sourceInformation.userFeatureId<l.sourceInformation.userFeatureId?-1:1));let a=new Set(e.keys());for(let c of s)a.delete(c.sourceInformation.userFeatureId);if(a.size!==0)throw new Error(`Features declare cyclic dependency: ${[...a].join(", ")}`);return s}var _0=V(require("path")),L0=V(Ts()),D0=V(Rf());var UR="application/vnd.devcontainers",T0="application/vnd.devcontainers.layer.v1+tar",$0="application/vnd.devcontainers.collection.layer.v1+json";function N0(t,e,r,n,i){let s=Ui(t,e),o={id:s.id,name:s.id,included:!0,value:r},a=i.split(":")[0];return{sourceInformation:{type:"oci",manifest:n,featureRef:s,userFeatureId:i,userFeatureIdWithoutVersion:a},features:[o]}}function Ui(t,e){let r=e.split(":"),n=r[0],i=r[1]?r[1]:"latest",s=n.split("/"),o=s[s.length-1],a=s[1],c=s[0],l=s.slice(1,-1).join("/"),u=`${l}/${o}`;return t.write(`resource: ${n}`,S.Trace),t.write(`id: ${o}`,S.Trace),t.write(`version: ${i}`,S.Trace),t.write(`owner: ${a}`,S.Trace),t.write(`namespace: ${l}`,S.Trace),t.write(`registry: ${c}`,S.Trace),t.write(`path: ${u}`,S.Trace),{id:o,version:i,owner:a,namespace:l,registry:c,resource:n,path:u}}async function j0(t,e,r,n,i){let s=Ui(t,r);return await cc(t,e,s,n,i)}async function cc(t,e,r,n,i){if(r.registry.indexOf(".")<0)return;let s=r.version;n&&(s=n);let o=`https://${r.registry}/v2/${r.path}/manifests/${s}`;t.write(`manifest url: ${o}`,S.Trace);let a=await BR(t,e,o,r,i);if(!!a){if((a==null?void 0:a.config.mediaType)!==UR){t.write(`(!) Unexpected manifest media type: ${a==null?void 0:a.config.mediaType}`,S.Error);return}return a}}async function M0(t,e,r,n,i){var c;if(r.sourceInformation.type!=="oci")throw t.write("FeatureSet is not an OCI featureSet.",S.Error),new Error("FeatureSet is not an OCI featureSet.");let{featureRef:s}=r.sourceInformation,o=`https://${r.sourceInformation.featureRef.registry}/v2/${r.sourceInformation.featureRef.path}/blobs/${(c=r.sourceInformation.manifest)==null?void 0:c.layers[0].digest}`;if(t.write(`blob url: ${o}`,S.Trace),!await qR(t,e,o,n,i,s))throw new Error(`Failed to download package for ${r.sourceInformation.featureRef.resource}`);return!0}async function BR(t,e,r,n,i){try{let s={"user-agent":"devcontainer",accept:"application/vnd.oci.image.manifest.v1+json"},o=i!=null?i:await Bi(t,n.registry,n.path,e,"pull");o&&(s.authorization=`Bearer ${o}`);let c=await Xr({type:"GET",url:r,headers:s});return JSON.parse(c.toString())}catch{return}}async function qR(t,e,r,n,i,s,o){try{let a=_0.join(n,"blob.tar"),c={"user-agent":"devcontainer",accept:"application/vnd.oci.image.manifest.v1+json"},l=o!=null?o:await Bi(t,s.registry,s.path,e,"pull");l&&(c.authorization=`Bearer ${l}`);let f=await Xr({type:"GET",url:r,headers:c},t);return await Lt(i),await rr(a,f),await L0.x({file:a,cwd:i}),!0}catch(a){return t.write(`error: ${a}`,S.Error),!1}}async function Bi(t,e,r,n,i){var f;let s={"user-agent":"devcontainer"},o="";if(!!n.GITHUB_TOKEN&&e==="ghcr.io")o=n.GITHUB_TOKEN;else if(n.DEVCONTAINERS_OCI_AUTH){let h=n.DEVCONTAINERS_OCI_AUTH.split(",").find(m=>m.split(":")[0]===e);h&&h.length===2&&(o=h.split(":")[1])}else t.write("No oauth authentication credentials found.",S.Trace);if(o){let d=Buffer.from(`USERNAME:${o}`).toString("base64");s.authorization=`Basic ${d}`}let a=`https://${e}/token?scope=repo:${r}:${i}&service=${e}`;t.write(`url: ${a}`,S.Trace);let c={type:"GET",url:a,headers:s},l;try{l=await Xr(c,t)}catch(d){t.write(`Failed to get registry auth token with error: ${d}`,S.Error);return}if(!l){t.write("Failed to get registry auth token",S.Error);return}let u=(f=JSON.parse(l.toString()))==null?void 0:f.token;if(!u){t.write("Failed to parse registry auth token response",S.Error);return}return u}async function lc(t,e,r=!1){var n;try{let i=`https://${t.registry}/v2/${t.namespace}/${t.id}/tags/list`,s=await Bi(e,t.registry,t.path,process.env,"pull");if(!s){e.write(`(!) ERR: Failed to publish feature: ${t.resource}`,S.Error);return}let o={"user-agent":"devcontainer",accept:"application/json",authorization:`Bearer ${s}`},c=await Xr({type:"GET",url:i,headers:o}),l=JSON.parse(c.toString());if(!r)return l.tags;let u=l.tags.includes("latest"),f=l.tags.filter(d=>d!=="latest").sort((d,h)=>D0.compareIdentifiers(d,h));return u?["latest",...f]:f}catch(i){if(i==null?void 0:i.message.includes("HTTP 404: Not Found"))return[];e.write(`(!) ERR: Could not fetch published tags for '${t.namespace}/${t.id}' : ${(n=i==null?void 0:i.message)!=null?n:""} `,S.Trace);return}}var Ff="devcontainer-features.tgz",Js="devcontainer-features.json",HR="devcontainer-feature.json";function q0(t){return{allFeatures:t.featureSets.map(r=>r.features).flat()}}var H0=!1,zR=1;function qi(){return zR++}var WR=Re.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;function Xs(t){if(WR)return Re.join(require.resolve("vscode-dev-containers/package.json"),"..","container-features");let e=typeof t=="string"?Re.join(t,"dist"):t.distFolder;return Re.join(e,"node_modules","vscode-dev-containers","container-features")}function At(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache-"+qi();case"direct-tarball":return t.tarballUri+qi();case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}-${qi()}`;case"file-path":return t.resolvedFilePath+"-"+qi();case"oci":return`oci-${t.featureRef.resource}-${qi()}`}}function z0(){return`
#{featureBuildStages}

#{nonBuildKitFeatureContentFallback}

FROM $_DEV_CONTAINERS_BASE_IMAGE AS dev_containers_target_stage

USER root

COPY --from=dev_containers_feature_content_source {contentSourceRootPath} /tmp/build-features/

#{featureLayer}

#{copyFeatureBuildStages}

#{containerEnv}

ARG _DEV_CONTAINERS_IMAGE_USER=root
USER $_DEV_CONTAINERS_IMAGE_USER
`}function W0(t){let e="";return(t.featureSets||[]).filter(n=>n.internalVersion!=="2").map(n=>n.features[0].consecutiveId).forEach(n=>{e+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),t.featureSets.filter(n=>n.internalVersion==="2").forEach(n=>{n.features.forEach(i=>{e+=GR(i),e+=`
				
RUN cd /tmp/build-features/${i.consecutiveId} \\
&& set -a \\
&& . ./devcontainer-features.env \\
&& set +a \\
&& chmod +x ./install.sh \\
&& ./install.sh

`})}),e}function GR(t){let e="";return t.containerEnv&&(e=Object.keys(t.containerEnv).map(n=>`ENV ${n}=${t.containerEnv[n]}`).join(`
`)),e}var G0=new RegExp("^[a-zA-Z0-9_-]*$"),V0=async(t,e)=>{try{await ri(t,{force:!0})}catch(r){e.write(`Didn't remove temporary tarball from disk with caught exception: ${r==null?void 0:r.Message} `,S.Trace)}};function VR(t,e,r){let n={"user-agent":"devcontainer"},i=s=>{let o=s.tarballUri;return o.startsWith("https://github.com")||o.startsWith("https://api.github.com")};if(t.type==="github-repo"||t.type==="direct-tarball"&&i(t)){let s=e.GITHUB_TOKEN;s?(r.write("Using environment GITHUB_TOKEN."),n.Authorization=`Bearer ${s}`):r.write("No environment GITHUB_TOKEN available.")}return n}async function YR(t,e,r,n){let i={type:"GET",url:t.apiUri,headers:r},s=JSON.parse((await Xr(i,n)).toString());if(s){let o=s.assets.find(a=>a.name===`${e.id}.tgz`)||s.assets.find(a=>a.name===Ff)||void 0;if(o&&o.url)return n.write(`Found url to fetch release artifact '${o.name}'. Asset of size ${o.size} has been downloaded ${o.download_count} times and was last updated at ${o.updated_at}`),o.url;n.write("Unable to fetch release artifact URI from GitHub API",S.Error);return}}async function KR(t,e,r){if(t.length===0){r.write("Parsed featureSet is empty.",S.Error);return}let n=yn(t.toString());if(!(n==null?void 0:n.features)||n.features.length===0){r.write("Parsed featureSet contains no features.",S.Error);return}return r.write(`Loaded ${e}, which declares ${n.features.length} features and ${n.sourceInformation?"contains":"does not contain"} explicit source info.`,S.Trace),kf(n)}async function JR(t,e){let r=Re.join(t,Js),n=await Ue(r);return KR(n,r,e)}function kf(t){return t.features.find(e=>e.extensions||e.settings)?re(H({},t),{features:t.features.map(e=>{if(!(e.extensions||e.settings))return e;let r=H({},e),n=r.customizations||(r.customizations={}),i=n.vscode||(n.vscode={});return r.extensions&&(i.extensions=(i.extensions||[]).concat(r.extensions),delete r.extensions),r.settings&&(i.settings=H(H({},r.settings),i.settings||{}),delete r.settings),r})}):t}async function uc(t,e,r,n){let{output:i}=t,s=t.cwd;i.write(`workspace root: ${s}`,S.Trace);let o=ZR(r);if(!o)return;let a={featureSets:[],dstFolder:e},c=n(t.extensionPath),l=await JR(c,i);if(!l){i.write("Failed to load locally cached features",S.Error);return}i.write("--- Processing User Features ----",S.Trace),a=await QR(t.output,r,s,t.env,o,a,t.skipFeatureAutoMapping),i.write(JSON.stringify(a,null,4),S.Trace);let u=await XR(e);i.write("--- Fetching User Features ----",S.Trace),await nF(t,a,l,e,c,u);let f=jy(r,a.featureSets);i.write("--- Computed order ----",S.Trace);for(let d of f)i.write(`${d.sourceInformation.userFeatureId}`,S.Trace);return a.featureSets=f,a}async function XR(t){let e=Re.join(t,"ociCache");return await Lt(e),e}function ZR(t){if(!t.features)return;let e=[];for(let r of Object.keys(t.features)){let n=t.features[r],i={id:r,options:n};e.push(i)}return e}async function QR(t,e,r,n,i,s,o){for(let a of i){let c=await rF(t,e.configFilePath.path,r,n,a,o);if(!c)throw new Error(`Failed to process feature ${a.id}`);s.featureSets.push(c)}return s}async function eF(t,e,r){if(!r.includes("/")&&!r.includes("\\"))return{type:"local-cache",manifest:void 0};if(r.startsWith("https://"))return{type:"direct-tarball",manifest:void 0};if(r.startsWith("./")||r.startsWith("../")||r.startsWith("/"))return{type:"file-path",manifest:void 0};if(r.includes("@"))return{type:"github-repo",manifest:void 0};let n=await j0(t,e,r);return n?{type:"oci",manifest:n}:(t.write("(!) WARNING: Falling back to deprecated GitHub Release syntax. See https://github.com/devcontainers/spec/blob/main/proposals/devcontainer-features.md#referencing-a-feature for updated specification.",S.Warning),{type:"github-repo",manifest:void 0})}function tF(t){let e=["aws-cli","azure-cli","desktop-lite","docker-in-docker","docker-from-docker","dotnet","git","git-lfs","github-cli","java","kubectl-helm-minikube","node","powershell","python","ruby","rust","sshd","terraform"],r=new Map;r.set("golang","go"),r.set("common","common-utils");let n="ghcr.io/devcontainers/features",i="1";return e.includes(t)?`${n}/${t}:${i}`:r.get(t)!==void 0?`${n}/${r.get(t)}:${i}`:t}async function rF(t,e,r,n,i,s){t.write(`* Processing feature: ${i.id}`);let o=i.id;s||(i.id=tF(i.id));let{type:a,manifest:c}=await eF(t,n,i.id);if(a==="local-cache"){t.write("Cached feature found.");let v={id:i.id,name:i.id,value:i.options,included:!0};return{sourceInformation:{type:"local-cache",userFeatureId:o},features:[v]}}if(a==="direct-tarball"){t.write("Remote tar file found.");let v=new U0.URL(i.id),C=v.pathname,A=C.substring(C.lastIndexOf("/")+1);t.write(`tarballName = ${A}`,S.Trace);let T=new RegExp("devcontainer-feature-(.*).tgz").exec(A);if(!T||T.length!==2){t.write(`Expected tarball name to follow 'devcontainer-feature-<feature-id>.tgz' format.  Received '${A}'`,S.Error);return}let N=T[1];if(N===""||!G0.test(N)){t.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Received ${N}.`,S.Error);return}let D={id:N,name:i.id,value:i.options,included:!0};return{sourceInformation:{type:"direct-tarball",tarballUri:v.toString(),userFeatureId:o},features:[D]}}if(a==="file-path"){t.write("Local disk feature.");let v=Re.basename(i.id);if(Re.isAbsolute(i.id)){t.write("An Absolute path to a local feature is not allowed.",S.Error);return}let C=Re.join(Re.dirname(e),i.id),A=Re.join(r,".devcontainer"),k=C,T=Re.relative(A,k);if(t.write(`${A} -> ${k}:   Relative Distance = '${T}'`,S.Trace),T.indexOf("..")!==-1){t.write(`Local file path parse error. Resolved path must be a child of the .devcontainer/ folder.  Parsed: ${C}`,S.Error);return}t.write(`Resolved: ${i.id}  ->  ${C}`,S.Trace),t.write(`Parsed feature id: ${v}`,S.Trace);let N={id:v,name:i.id,value:i.options,included:!0};return{sourceInformation:{type:"file-path",resolvedFilePath:C,userFeatureId:o},features:[N]}}if(a==="oci"&&c)return N0(t,i.id,i.options,c,o);t.write("Github feature.");let l="latest",u=i.id.split("@");if(u.length>2){t.write("Parse error. Use the '@' symbol only to designate a version tag.",S.Error);return}u.length===2&&(t.write(`[${i.id}] has version ${u[1]}`,S.Trace),l=u[1]);let d=u[0].split("/");if(d.length!==3||d.some(v=>v==="")||!G0.test(d[2])){t.write("Invalid parse for GitHub Release feature: Follow format '<publisher>/<feature-set>/<feature>, or republish feature to OCI registry.'",S.Error);return}let h=d[0],m=d[1],w={id:d[2],name:i.id,value:i.options,included:!0},y=o.split("@")[0];return l==="latest"?{sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${h}/${m}/releases/latest`,unauthenticatedUri:`https://github.com/${h}/${m}/releases/latest/download`,owner:h,repo:m,isLatest:!0,userFeatureId:o,userFeatureIdWithoutVersion:y},features:[w]}:{sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${h}/${m}/releases/tags/${l}`,unauthenticatedUri:`https://github.com/${h}/${m}/releases/download/${l}`,owner:h,repo:m,tag:l,isLatest:!1,userFeatureId:o,userFeatureIdWithoutVersion:y},features:[w]}}async function nF(t,e,r,n,i,s){var o,a;for(let c of e.featureSets)try{if(!c||!c.features||!c.sourceInformation||!r)continue;let{output:l}=t,u=c.features[0],f=u.id+"_"+qi(),d=Re.join(n,f),h=(o=c.sourceInformation)==null?void 0:o.type;u.cachePath=d,u.consecutiveId=f;let m=`${u.consecutiveId}_${h}`;if(l.write(`* Fetching feature: ${m}`),h==="oci"){if(l.write("Fetching from OCI",S.Trace),await Lt(d),!await M0(l,t.env,c,s,d)){let C=`Could not download OCI feature: ${c.sourceInformation.featureRef.id}`;throw new Error(C)}if(!await fc(l,c,u,d)){let C=`Failed to parse feature '${m}'. Please check your devcontainer.json 'features' attribute.`;throw new Error(C)}continue}if(h==="local-cache"){if(await Lt(d),await ni(i,d),!await fc(l,c,u,d)){let v=`Failed to parse feature '${m}'. Please check your devcontainer.json 'features' attribute.`;throw new Error(v)}continue}if(h==="file-path"){l.write("Detected local file path",S.Trace),await Lt(d);let v=c.sourceInformation.resolvedFilePath;if(await ni(v,d),!await fc(l,c,u,d)){let C=`Failed to parse feature '${m}'. Please check your devcontainer.json 'features' attribute.`;throw new Error(C)}continue}l.write("Detected tarball",S.Trace);let p=VR(c.sourceInformation,t.env,l),w=[];if(h==="github-repo"){if(l.write("Determining tarball URI for provided github repo.",S.Trace),p.Authorization&&p.Authorization!==""){l.write("GITHUB_TOKEN available. Attempting to fetch via GH API.",S.Info);let v=await YR(c.sourceInformation,u,p,l);v?w.push(v):l.write("Failed to generate autenticated tarball URI for provided feature, despite a GitHub token present",S.Warning),p.Accept="Accept: application/octet-stream"}l.write("Appending unauthenticated URIs for v2 and then v1",S.Trace),w.push(`${c.sourceInformation.unauthenticatedUri}/${u.id}.tgz`),w.push(`${c.sourceInformation.unauthenticatedUri}/${Ff}`)}else w.push(c.sourceInformation.tarballUri);let y=!1;for(let v of w)if(y=await iF(v,d,p,n,l),y){if(l.write(`Succeeded fetching ${v}`,S.Trace),!await fc(l,c,u,d)){let C=`Failed to parse feature '${m}'. Please check your devcontainer.json 'features' attribute.`;throw new Error(C)}break}if(!y){let v=`(!) Failed to fetch tarball for ${m} after attempting ${w.length} possibilities.`;throw new Error(v)}}catch(l){throw t.output.write(`(!) ERR: Failed to fetch feature: ${(a=l==null?void 0:l.message)!=null?a:""} `,S.Error),l}}async function iF(t,e,r,n,i){let s=Re.join(n,"temp.tgz");try{let o={type:"GET",url:t,headers:r};i.write(`Fetching tarball at ${o.url}`),i.write(`Headers: ${JSON.stringify(o)}`,S.Trace);let a=await Xr(o,i);if(!a||a.length===0)return i.write(`Did not receive a response from tarball download URI: ${t}`,S.Trace),!1;let c=(l,u)=>!(l.startsWith("./.")||l===`./${Ff}`||l==="./.");return i.write(`Preparing to unarchive received tgz from ${s} -> ${e}.`,S.Trace),await Lt(e),await rr(s,a),await B0.x({file:s,cwd:e,filter:c}),await V0(s,i),!0}catch(o){return i.write(`Caught failure when fetching from URI '${t}': ${o}`,S.Trace),await V0(s,i),!1}}async function fc(t,e,r,n){let i=Re.join(n,HR);if(!await nt(i))return t.write(`Feature ${r.id} is not a 'v2' feature. Attempting fallback to 'v1' implementation.`,S.Trace),t.write(`For v2, expected devcontainer-feature.json at ${i}`,S.Trace),await sF(t,e,r,n);e.internalVersion="2",r.cachePath=n;let s=await Ue(i),o=yn(s.toString());return r=H(H({},o),r),e.features[0]=kf({features:[r]}).features[0],!0}async function sF(t,e,r,n){let i=Re.join(n,Js);if(!await nt(i))return t.write(`Failed to find ${Js} metadata file (v1)`,S.Error),!1;e.internalVersion="1",r.cachePath=n;let s=await Ue(i),o=yn(s.toString()),a=o==null?void 0:o.features.find(c=>c.id===r.id);return a?(r=H(H({},a),r),e.features[0]=kf({features:[r]}).features[0],!0):(t.write(`Failed to find feature '${r.id}' in provided v1 metadata file`,S.Error),!1)}function Y0(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function _f(t){var r,n;let e=Y0(t);if(!e)return!!t.value;if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function K0(t){if(typeof t.value=="object")return H(H({},Lf(t)),t.value);let e=Y0(t);return e?re(H({},Lf(t)),{[e]:t.value}):Lf(t)}function Lf(t){let e=t.options||{};return Object.keys(e).reduce((r,n)=>("default"in e[n]&&(r[n]=e[n].default),r),{})}var J0=V(require("path"));async function mt(t){let e=await Ue(J0.join(t,"package.json"),"utf8");return JSON.parse(e)}var Fe=!0;var dc=t=>t.replace(/[^\w_]/g,"_").replace(/^[\d_]+/g,"_").toUpperCase();async function hc(t,e,r,n){let i,{common:s}=t,{cliHost:o,output:a}=s,c=()=>i||(i=qn(t,r,n)),u=await Zs(t,e,r,async()=>(await c()).Config.User||"root");if(!u||!u.featureBuildInfo)return{updatedImageName:[r],collapsedFeaturesConfig:void 0,imageDetails:c};let{featureBuildInfo:f,collapsedFeaturesConfig:d}=u,h=o.path.join(f.dstFolder,"Dockerfile.extended");await o.writeFile(h,Buffer.from(f.dockerfilePrefixContent+f.dockerfileContent));let m=Qs(s),p=`${r.startsWith(m)?r:m}-features`,w=[];if(t.buildKitVersion){w.push("buildx","build","--load");for(let v in f.buildKitContexts)w.push("--build-context",`${v}=${f.buildKitContexts[v]}`)}else w.push("build");for(let v in f.buildArgs)w.push("--build-arg",`${v}=${f.buildArgs[v]}`);let y=o.path.join(await o.tmpdir(),"__dev-containers-build-empty");if(o.mkdirp(y),w.push("--target",f.overrideTarget,"-t",p,"-f",h,y),t.isTTY){let v=re(H({},Kt(t)),{output:ve(a,S.Info)});await lt(v,...w)}else{let v=re(H({},Et(t)),{output:ve(a,S.Info),print:"continuous"});await bt(v,...w)}return{updatedImageName:[p],collapsedFeaturesConfig:d,imageDetails:c}}async function Zs(t,e,r,n){let i=await mc(t.common);await aF(t,i);let s=await uc(t.common,i,e,Xs);if(!s)return null;let o=q0(s),a=await cF(t,s,r,n);return a?{featureBuildInfo:a,collapsedFeaturesConfig:o}:null}function oF(t){let e="";for(let r of t.featureSets)r.internalVersion!=="2"&&(e+=`
`,e+=r.features.filter(n=>(Fe||n.included)&&n.value).reduce((n,i)=>n.concat(Object.keys(i.containerEnv||{}).map(s=>`ENV ${s}=${i.containerEnv[s]}`)),[]).join(`
`));return e}async function aF(t,e){let{common:r}=t,{cliHost:n,output:i}=r,s="local-cache",o=Xs(r.extensionPath);i.write(`local container features stored at: ${o}`),await n.mkdirp(`${e}/${s}`);let a=X0.c({cwd:o,filter:d=>d!=="./Dockerfile"&&d!==`./${Js}`},["."]),c=new Promise((d,h)=>{a.on("error",h),a.on("finish",d)}),l=await n.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${e}/${s}`,output:i}),u=new Df.StringDecoder;l.stdout.on("data",d=>{i.write(u.write(d))});let f=new Df.StringDecoder;l.stderr.on("data",d=>{i.write(Ie(f.write(d)))}),a.pipe(l.stdin),await l.exit,await c}async function cF(t,e,r,n){let{common:i}=t,{cliHost:s,output:o}=i,{dstFolder:a}=e;if(!a||a==="")return o.write("dstFolder is undefined or empty in addContainerFeatures",S.Error),null;let c=await Promise.all(e.featureSets.map(w=>H0?w.features.filter(y=>(Fe||y.included)&&y.value).reduce(async(y,v)=>{let C=s.path.join(a,At(w.sourceInformation),"features",v.id,"bin"),A=s.isFile(s.path.join(C,"acquire")),k=s.isFile(s.path.join(C,"configure")),T=await y;return T[v.id]={hasAcquire:await A,hasConfigure:await k},T},Promise.resolve({})):Promise.resolve({}))),l=t.buildKitVersion?ii(t.buildKitVersion):null,f=l?!as(l,[0,8,0]):!1,d="dev_container_feature_content_temp",h=f?".":"/tmp/build-features/",m=z0().replace("#{nonBuildKitFeatureContentFallback}",f?"":`FROM ${d} as dev_containers_feature_content_source`).replace("{contentSourceRootPath}",h).replace("#{featureBuildStages}",lF(e,c,h)).replace("#{featureLayer}",W0(e)).replace("#{containerEnv}",oF(e)).replace("#{copyFeatureBuildStages}",uF(e,c)),p=`${f?"# syntax=docker/dockerfile:1.4":""}
ARG _DEV_CONTAINERS_BASE_IMAGE=placeholder
`;for await(let w of e.featureSets){let y=0;if(w.internalVersion==="2"){for await(let v of w.features)if(v.cachePath){v.internalVersion="2";let C=s.path.join(v.cachePath,"devcontainer-features.env"),A=Tf(v);await s.writeFile(C,Buffer.from(A.join(`
`)))}}else{let v=[].concat(...w.features.filter(A=>{var k;return(Fe||A.included)&&A.value&&!((k=c[y][A.id])==null?void 0:k.hasAcquire)}).map(Tf)).join(`
`),C=s.path.join(w.features[0].cachePath,"devcontainer-features.env");await Promise.all([s.writeFile(C,Buffer.from(v)),...w.features.filter(A=>{var k;return(Fe||A.included)&&A.value&&((k=c[y][A.id])==null?void 0:k.hasAcquire)}).map(A=>{let k=[...Tf(A),`_BUILD_ARG_${dc(A.id)}_TARGETPATH=${Qt.posix.join("/usr/local/devcontainer-features",At(w.sourceInformation),A.id)}`].join(`
`),T=s.path.join(a,At(w.sourceInformation),"features",A.id,"devcontainer-features.env");return s.writeFile(T,Buffer.from(k))})])}y++}if(!f){let w=`
	FROM scratch
	COPY . /tmp/build-features/
	`,y=s.path.join(a,"Dockerfile.buildContent");await s.writeFile(y,Buffer.from(w));let v=["build","-t",d,"-f",y];if(v.push(a),t.isTTY){let C=re(H({},Kt(t)),{output:ve(o,S.Info)});await lt(C,...v)}else{let C=re(H({},Et(t)),{output:ve(o,S.Info),print:"continuous"});await bt(C,...v)}}return{dstFolder:a,dockerfileContent:m,overrideTarget:"dev_containers_target_stage",dockerfilePrefixContent:p,buildArgs:{_DEV_CONTAINERS_BASE_IMAGE:r,_DEV_CONTAINERS_IMAGE_USER:await n(),_DEV_CONTAINERS_FEATURE_CONTENT_SOURCE:d},buildKitContexts:f?{dev_containers_feature_content_source:a}:{}}}function lF(t,e,r){return[].concat(...t.featureSets.map((n,i)=>n.features.filter(s=>{var o;return(Fe||s.included)&&s.value&&((o=e[i][s.id])==null?void 0:o.hasAcquire)}).map(s=>`FROM mcr.microsoft.com/vscode/devcontainers/base:0-focal as ${At(n.sourceInformation)}_${s.id}
COPY --from=dev_containers_feature_content_source ${Qt.posix.join(r,At(n.sourceInformation),"features",s.id)} ${Qt.posix.join("/tmp/build-features",At(n.sourceInformation),"features",s.id)}
COPY --from=dev_containers_feature_content_source ${Qt.posix.join(r,At(n.sourceInformation),"common")} ${Qt.posix.join("/tmp/build-features",At(n.sourceInformation),"common")}
RUN cd ${Qt.posix.join("/tmp/build-features",At(n.sourceInformation),"features",s.id)} && set -a && . ./devcontainer-features.env && set +a && ./bin/acquire`))).join(`

`)}function uF(t,e){return[].concat(...t.featureSets.map((r,n)=>r.features.filter(i=>{var s;return(Fe||i.included)&&i.value&&((s=e[n][i.id])==null?void 0:s.hasAcquire)}).map(i=>{var o;let s=Qt.posix.join("/usr/local/devcontainer-features",At(r.sourceInformation),i.id);return`COPY --from=${At(r.sourceInformation)}_${i.id} ${s} ${s}${((o=e[n][i.id])==null?void 0:o.hasConfigure)?`
RUN cd ${Qt.posix.join("/tmp/build-features",At(r.sourceInformation),"features",i.id)} && set -a && . ./devcontainer-features.env && set +a && ./bin/configure`:""}`}))).join(`

`)}function Tf(t){let e=K0(t),r=dc(t.id),n=[];return t.internalVersion!=="2"?(e&&(n.push(...Object.keys(e).map(i=>`_BUILD_ARG_${r}_${dc(i)}="${e[i]}"`)),n.push(`_BUILD_ARG_${r}=true`)),t.buildArg&&n.push(`${t.buildArg}=${_f(t)}`),n):(e&&n.push(...Object.keys(e).map(i=>`${dc(i)}="${e[i]}"`)),t.buildArg&&n.push(`${t.buildArg}=${_f(t)}`),n)}async function fF(t,e,r,n,i){let{common:s}=t,{cliHost:o}=s;if(t.updateRemoteUserUIDDefault==="never"||!(typeof e.updateRemoteUserUID=="boolean"?e.updateRemoteUserUID:t.updateRemoteUserUIDDefault==="on")||!(o.platform==="linux"||t.updateRemoteUserUIDOnMacOS&&o.platform==="darwin"))return null;let a=(await n()).Config.User||"root",c=e.remoteUser||i||a;if(c==="root"||/^\d+$/.test(c))return null;let l=Qs(s);return{imageName:`${r.startsWith(l)?r:l}-uid`,remoteUser:c,imageUser:a}}async function pc(t,e,r,n,i){let{common:s}=t,{cliHost:o}=s,a=await fF(t,e,r,n,i);if(!a)return r;let{imageName:c,remoteUser:l,imageUser:u}=a,f="updateUID.Dockerfile",d=Qt.join(s.extensionPath,"scripts",f),h=s.package.version,m=o.path.join(await $f(o),`${f}-${h}`),p=`${m}-${Date.now()}`;await o.mkdirp(o.path.dirname(p)),await o.writeFile(p,await Ue(d)),await o.rename(p,m);let w=["build","-f",m,"-t",c,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${l}`,"--build-arg",`NEW_UID=${await o.getuid()}`,"--build-arg",`NEW_GID=${await o.getgid()}`,"--build-arg",`IMAGE_USER=${u}`,o.path.dirname(m)];return t.isTTY?await lt(t,...w):await bt(t,...w),c}var Z0=V(require("path")),Q0="com.docker.compose.project",eb="com.docker.compose.service";async function tb(t,e,r,n){let{common:i,dockerCLI:s,dockerComposeCLI:o}=t,{cliHost:a,env:c,output:l}=i;return dF(t,{cliHost:a,dockerCLI:s,dockerComposeCLI:o,env:c,output:l},e,r,jf(r),n)}async function dF(t,e,r,n,i,s){let{common:o}=t,{cliHost:a}=e,c,l;try{let u=await Ko(a,n,a.env,a.cwd),f=a.path.join(a.cwd,".env"),d=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await a.isFile(f)?f:void 0,h=await Bf(e,r,u),m=await nb(t,h,n.service);if(t.expectExistingContainer&&!m)throw new ce({description:"The expected container does not exist."});if(c=m?await ir(t,m):void 0,c&&(t.removeOnStartup===!0||t.removeOnStartup===c.Id)){let w="Removing existing container.",y=o.output.start(w);await bt(t,"rm","-f",c.Id),o.output.stop(w,y),c=void 0}if(!c||c.State.Status!=="running"){let w=await pF(t,e,n,h,u,d,c,s);c=await ir(t,w.containerId)}l=await Hn(t,c.Id,i,n.remoteUser);let{remoteEnv:p}=await Lo(o,l,n);return{params:o,properties:l,config:n,resolvedAuthority:{extensionHostEnv:p},tunnelInformation:o.isLocalContainer?bc(c):{},dockerParams:t,dockerContainerId:c.Id,composeProjectName:h}}catch(u){let f=u instanceof ce?u:new ce({description:"An error occurred setting up the container.",originalError:u});throw c&&(f.manageContainer=!0,f.params=t.common,f.containerId=c.Id,f.dockerParams=t),l&&(f.containerProperties=l),f.config=n,f}}function jf(t){return t.workspaceFolder||"/"}function hF(t,e,r){var s,o;let n=t.image,i=t.build;return i?typeof i=="string"?{image:n,build:{context:i,dockerfilePath:"Dockerfile"}}:{image:n,build:{dockerfilePath:(s=i.dockerfile)!=null?s:"Dockerfile",context:(o=i.context)!=null?o:e.dirname(r[0]),target:i.target}}:{image:n}}async function Mf(t,e,r,n,i,s,o,a,c,l,u,f){var z;let{common:d,dockerCLI:h,dockerComposeCLI:m}=r,{cliHost:p,env:w,output:y}=d,A=(await gc({cliHost:p,dockerCLI:h,dockerComposeCLI:m,env:w,output:y},n,i)).services[t.service],k="dev_container_auto_added_stage_label",T,N,D=hF(A,p.path,n);if(D.build){let{context:F,dockerfilePath:B,target:b}=D.build,E=p.path.isAbsolute(B)?B:Z0.default.resolve(F,B);if(T=N=(await p.readFile(E)).toString(),b)k=b;else{let{lastStageName:I,modifiedDockerfile:R}=Cc(T,k);k=I,R&&(T=R)}}else T=N=`FROM ${A.image} AS ${k}
`;let U=re(H({},r),{buildKitVersion:null}),Y=await Zs(U,t,k,()=>Ec(r,N)),$=null;if(Y){$=`    build:
`;let{featureBuildInfo:F}=Y,B=T.match(/^\s*#\s*syntax\s*=.*[\r\n]/g);B&&(T=T.slice(B[0].length));let b=`${F.dockerfilePrefixContent}${T}
${F.dockerfileContent}`,E=p.path.join(F==null?void 0:F.dstFolder,"Dockerfile-with-features");if(await p.writeFile(E,Buffer.from(b)),$+=`      dockerfile: ${E}
`,$+=`      target: ${F.overrideTarget}
`,!((z=D.build)==null?void 0:z.context)){let I=p.path.join(await p.tmpdir(),"__devcontainers_cli_empty__");await p.mkdirp(I),$+=`      context: ${I}
`}if(Object.keys(F.buildArgs).length>0||r.buildKitVersion){$+=`      args:
`,r.buildKitVersion&&($+=`        - BUILDKIT_INLINE_CACHE=1
`);for(let I in F.buildArgs)$+=`        - ${I}=${F.buildArgs[I]}
`}}let L=["--project-name",e,...s],M=[];if(u&&u.length>0||$){let F=p.path.join(c,"docker-compose");await p.mkdirp(F);let B=p.path.join(F,`${l}-${Date.now()}.yml`),b=u&&u.length>0?`      cache_from:
${u.map(I=>`        - ${I}
`).join(`
`)}`:"",E=`services:
  ${t.service}:
${$==null?void 0:$.trimEnd()}
${b}
`;await p.writeFile(B,Buffer.from(E)),M.push(B),L.push("-f",B)}if(!f){L.push("build"),a&&(L.push("--no-cache"),Y||L.push("--pull")),o.length&&(L.push(...o),o.indexOf(t.service)===-1&&L.push(t.service));try{if(r.isTTY){let F=re(H({},Kt(r,await m())),{output:ve(y,S.Info)});await $o(F,...L)}else{let F=re(H({},Et(r,await m())),{output:ve(y,S.Info),print:"continuous"});await pn(F,...L)}}catch(F){throw F instanceof ce?F:new ce({description:"An error occurred building the Docker Compose images.",originalError:F,data:{fileWithError:n[0]}})}}return{collapsedFeaturesConfig:Y==null?void 0:Y.collapsedFeaturesConfig,additionalComposeOverrideFiles:M}}async function rb(t,e,r,n){let i=r.find(s=>s.indexOf(n)>-1);return i?await t.isFile(i)?(e.write(`Restoring ${i} from persisted storage`),{foundLabel:!0,fileExists:!0,file:i}):(e.write(`Expected ${i} to exist, but it did not`,S.Error),{foundLabel:!0,fileExists:!1,file:i}):(e.write(`Expected to find a docker-compose file prefixed with ${n}, but did not.`,S.Error),{foundLabel:!1})}async function pF(t,e,r,n,i,s,o,a){var $,L,M,z;let{common:c}=t,{persistedFolder:l,output:u}=c,{cliHost:f}=e,d="docker-compose.devcontainer.build",h="docker-compose.devcontainer.containerFeatures";c.progress(hn.StartingContainer);let m=i,p=[].concat(...m.map(F=>["-f",F]));s&&p.push("--env-file",s);let w=ve(e.output,S.Info),y=await gc(e,m,s);if(Object.keys(y.services||{}).indexOf(r.service)===-1)throw new ce({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let C,A=new Promise((F,B)=>C=B),{started:k}=await vc(t,{[Q0]:n,[eb]:r.service},A,c.output,c.getLogLevel()===S.Trace),T=y.services[r.service],N=T.image||Uf(await e.dockerComposeCLI(),n,r.service),D=($=o==null?void 0:o.Config)==null?void 0:$.Labels;u.write(`PersistedPath=${l}, ContainerHasLabels=${!!D}`);let U=!1;if(o&&D){let F=D["com.docker.compose.project.config_files"];u.write(`Container was created with these config files: ${F}`);let B=(L=F==null?void 0:F.split(","))!=null?L:[],b=await rb(f,u,B,d),E=await rb(f,u,B,h);(b.fileExists||!b.foundLabel)&&E.fileExists&&(U=!0,b.fileExists&&p.push("-f",b.file),E.fileExists&&p.push("-f",E.file))}if(!o||!U){let F=!!o,B=re(H({},t),{common:re(H({},t.common),{output:w})}),{collapsedFeaturesConfig:b,additionalComposeOverrideFiles:E}=await Mf(r,n,B,m,s,p,(M=r.runServices)!=null?M:[],(z=t.buildNoCache)!=null?z:!1,l,d,t.additionalCacheFroms,F);E.forEach(W=>p.push("-f",W));let I,R=()=>I||(I=qn(t,N,!0)),K=F?N:await pc(t,r,N,R,T.user),ie=await mF(K,N,b,r,e,i,R,T,a,t.additionalMounts,l,h,f,u);ie&&p.push("-f",ie)}let Y=["--project-name",n,...p];Y.push("up","-d"),(o||t.expectExistingContainer)&&Y.push("--no-recreate"),r.runServices&&r.runServices.length&&(Y.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&Y.push(r.service));try{t.isTTY?await $o(re(H({},e),{output:w}),...Y):await pn(re(H({},e),{output:w}),...Y)}catch(F){throw C(),new ce({description:"An error occurred starting Docker Compose up.",originalError:F,data:{fileWithError:m[0]}})}return await k,{containerId:await nb(t,n,r.service)}}function Uf(t,e,r){let n=ii(t.version),i=n&&as(n,[2,8,0])?"_":"-";return`${e}${i}${r}`}async function mF(t,e,r,n,i,s,o,a,c,l,u,f,d,h){let m=await gF(t,e,r,n,i,s,o,a,c,l);if(!!m&&m.length>0&&m.trim()!==""){h.write(`Docker Compose override file:
${m}`,S.Trace);let w=`${f}-${Date.now()}.yml`,y=d.path.join(u,"docker-compose"),v=d.path.join(y,w);return h.write(`Writing ${w} to ${y}`),await d.mkdirp(y),await d.writeFile(v,Buffer.from(m)),v}else{h.write("Override file was generated, but was empty and thus not persisted or included in the docker-compose arguments.");return}}async function gF(t,e,r,n,i,s,o,a,c,l){let{cliHost:u}=i,f="",d=t!==e,h=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(D=>(Fe||D.included)&&D.value).map(D=>D.capAdd||[])))],m=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(D=>(Fe||D.included)&&D.value).map(D=>D.securityOpt||[])))],p=[].concat(...((r==null?void 0:r.allFeatures)||[]).map(D=>(Fe||D.included)&&D.value&&D.mounts).filter(Boolean),l),w=p.filter(D=>D.type==="volume"),y=((r==null?void 0:r.allFeatures)||[]).map(D=>(Fe||D.included)&&D.value&&D.entrypoint).filter(Boolean),v=typeof a.entrypoint=="string"?Nf.parse(a.entrypoint):a.entrypoint,C=typeof a.command=="string"?Nf.parse(a.command):a.command,A=n.overrideCommand?[]:v||((await o()).Config.Entrypoint||[]).map(D=>D.replace(/\$/g,"$$$$")),k=n.overrideCommand?[]:C||(v?[]:((await o()).Config.Cmd||[]).map(D=>D.replace(/\$/g,"$$$$")));f=`services:
  '${n.service}':${d?`
    image: ${t}`:""}
    entrypoint: ["/bin/sh", "-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${y.join(`\\n
`)}\\n
exec \\"$$@\\"\\n
while sleep 1 & wait $$!; do :; done", "-"${A.map(D=>`, ${JSON.stringify(D)}`).join("")}]${k!==C?`
    command: ${JSON.stringify(k)}`:""}${((r==null?void 0:r.allFeatures)||[]).some(D=>(Fe||D.included)&&D.value&&D.init)?`
    init: true`:""}${((r==null?void 0:r.allFeatures)||[]).some(D=>(Fe||D.included)&&D.value&&D.privileged)?`
    privileged: true`:""}${h.length?`
    cap_add:${h.map(D=>`
      - ${D}`).join("")}`:""}${m.length?`
    security_opt:${m.map(D=>`
      - ${D}`).join("")}`:""}${c.length?`
    labels:${c.map(D=>`
      - ${D.replace(/\$/g,"$$$$")}`).join("")}`:""}${p.length?`
    volumes:${p.map(D=>`
      - ${D.source}:${D.target}`).join("")}`:""}${w.length?`
volumes:${w.map(D=>`
  ${D.source}:${D.external?`
    external: true`:""}`).join("")}`:""}
`;let T=(await u.readFile(s[0])).toString(),N=(/^\s*(version:.*)$/m.exec(T)||[])[1];return N&&(f=`${N}

${f}`),f}async function gc(t,e,r){try{let n=[].concat(...e.map(s=>["-f",s]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(ii(i.version)||[])[0]>=2&&n.push("--profile","*");try{let s=Et(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0),{stdout:o}=await pn(re(H({},s),{print:"onerror"}),...n,"config"),a=o.toString();return t.output.write(a),Ho(a)||{}}catch(s){if(!Buffer.isBuffer(s==null?void 0:s.stderr)||(s==null?void 0:s.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw s;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await $o(re(H({},t),{output:ve({event:t.output.event,dimensions:{columns:999999,rows:1}},S.Info)}),...n,"config");return Ho(c.replace(rs,""))||{}}let{stdout:o}=await pn(re(H({},t),{env:re(H({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=o.toString();return t.output.write(a),Ho(a)||{}}}catch(n){throw n instanceof ce?n:new ce({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function nb(t,e,r){let n=await To(t,!0,[`${Q0}=${e}`,`${eb}=${r}`]);return n&&n[0]}async function Bf(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await wF(t),s=wc(n.env.COMPOSE_PROJECT_NAME||"",i);if(s)return s;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),f=u&&u[1].trim(),d=wc(f||"",i);if(d)return d}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let o=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return qh(n.platform,a,n.path.join(o,".devcontainer"))?wc(`${n.path.basename(o)}_devcontainer`,i):wc(n.path.basename(a),i)}function wc(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function wF(t){try{let e=ii((await t.dockerComposeCLI()).version);return e?!as(e,[1,21,0]):!0}catch{return!0}}function yc(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,s;try{s=(await pn(re(H({},t),{cmd:r}),"version","--short")).stdout}catch(a){if((a==null?void 0:a.code)!=="ENOENT")throw a;s=(await pn(re(H({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}let o=s.toString().trim();return t.output.write(`Docker Compose version: ${o}`),{version:o,cmd:i?e:r,args:i?["compose"]:[]}})())}async function ib(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await mr({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}var ob=V(require("string_decoder"));async function Hf(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await mr({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:dn});return r.toString().trim()}return qe(t,e.platform)}async function vc(t,e,r,n,i){let s=await fp(t,{event:["start"]});return{started:new Promise((o,a)=>{r.catch(u=>{s.terminate(),a(u)});let c=new ob.StringDecoder("utf8"),l="";s.stdout.on("data",async u=>{if(u){let f=c.write(u);i&&n.write(`Log: startEventSeen#data ${f.trim().replace(/\r?\n/g,`\r
`)}\r
`);let d=(l+f).split(`
`);l=d.pop();for(let h of d)if(h.trim())try{let m=JSON.parse(h);(m.status||m.Status)==="start"&&await vF(t,m,e)&&(s.terminate(),o())}catch(m){console.error(m),console.error(h)}}})})}}async function vF(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await ir(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(s=>n[s]===r[s])}async function qn(t,e,r){try{return await bl(t,e)}catch(n){if(!r)throw n;try{await lt(t,"pull",e)}catch{throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(Ie(n.stderr.toString())),n}return bl(t,e)}}function ab(t){return t.hostPath!==void 0}async function bF(t,e,r,n){return r&&await ib(t,e,n)||e}async function cb(t,e,r,n,i,s){if("dockerComposeFile"in r)return{workspaceFolder:jf(r),workspaceMount:void 0};let{workspaceFolder:o,workspaceMount:a}=r;if(e&&(!o||!("workspaceMount"in r))){let c=await bF(t,e.rootFolderPath,n,i);if(!o){let l=t.path.relative(t.path.dirname(c),e.rootFolderPath);o=`/workspaces/${t.platform==="win32"?l.replace(/\\/g,"/"):l}`}if(!("workspaceMount"in r)){let l=`/workspaces/${t.path.basename(c)}`,u=t.platform!=="linux"?`,consistency=${s||"consistent"}`:"",f=c.indexOf(",")!==-1?'"':"",d=l.indexOf(",")!==-1?'"':"";a=`type=bind,${f}source=${c}${f},${d}target=${l}${d}${u}`}}return{workspaceFolder:o,workspaceMount:a}}function bc(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function lb(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?di(t,e,r):ms(gs(t,e))}async function Hn(t,e,r,n,i){let{common:s}=t,o="Inspecting container",a=s.output.start(o),c=await ir(t,e);s.output.stop(o,a);let l=n||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),d=zf(c.Config.Env),h=El(t,e,l),m=await hp(t,e,l,s.loadNativeModule),p=El(t,e,"root");return ip({params:s,createdAt:c.Created,startedAt:c.State.StartedAt,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:d,remoteExec:h,remotePtyExec:m,remoteExecAsRoot:p,rootShellServer:i})}function zf(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function ub(t,e,r){if(!e)return;let{common:n,dockerEnv:i}=t,{cliHost:s,output:o}=n,a=s.platform==="win32",c=a?[s.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],l=a&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,u=typeof l=="string"?[...c,l]:l;if(!u.length)return;let f="initializeCommand",d=ve(o,S.Info);try{d.raw(`[1mRunning the ${f} from devcontainer.json...[0m\r
\r
`),await ss({ptyExec:s.ptyExec,cmd:u[0],args:u.slice(1),env:i,output:d,onDidInput:r}),d.raw(`\r
`)}catch(h){if(h&&(h.code===130||h.signal===2))d.raw(`\r
[1m${f} interrupted.[0m\r
\r
`);else throw new ce({description:`The ${f} in the devcontainer.json failed.`,originalError:h})}}function Qs(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=EF(e),n=qf.basename(e);return gp(`vsc-${n}-${r}`)}function EF(t){return sb.createHash("md5").update(t).digest("hex")}async function mc(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await $f(e),"container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}async function $f(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}var fb=new RegExp(/^(?<line>\s*FROM.*)/,"gm"),db=/FROM\s+(?<platform>--platform=\S+\s+)?(?<image>\S+)(\s+[Aa][Ss]\s+(?<label>[^\s]+))?/,CF=new RegExp(/^\s*USER\s+(?<user>\S+)/,"gm");async function Ec(t,e){return xF(r=>qn(t,r,!0),e)}async function xF(t,e){var a,c,l,u;let r=[...e.matchAll(CF)];if(r.length){let f=(a=r[r.length-1].groups)==null?void 0:a.user;if(f&&f.indexOf("$")===-1)return f}let n=[...e.matchAll(fb)][0],i=(l=(c=n==null?void 0:n.groups)==null?void 0:c.line)==null?void 0:l.match(db),s=(u=i==null?void 0:i.groups)==null?void 0:u.image;return s&&s.indexOf("$")===-1&&(await t(s)).Config.User||"root"}function Cc(t,e){var f,d;let r=[...t.matchAll(fb)],n=r[r.length-1],i=(f=n.groups)==null?void 0:f.line,s=i.match(db);if(!s)throw new Error("Error parsing Dockerfile: failed to parse final FROM line");if((d=s.groups)==null?void 0:d.label)return{lastStageName:s.groups.label,modifiedDockerfile:void 0};let o=n.index+s.index,a=o+i.length,c=s[0],l=t.slice(0,o+c.length);l+=` AS ${e}`;let u=i.length-c.length;return l+=t.slice(a-u),{lastStageName:e,modifiedDockerfile:l}}var gb=V(require("path"));var hb="devcontainer.local_folder";async function pb(t,e,r,n){let{common:i}=t,s,o;try{if(s=await RF(t,n),s)await FF(t,n,s);else{let a=await Wf(t,e),c=await pc(t,e,a.updatedImageName[0],a.imageDetails,AF(e.runArgs)||e.containerUser);try{await kF(t,e,a.collapsedFeaturesConfig,c,n,r.workspaceMount,a.imageDetails)}finally{s=await zn(t,n)}if(!s)return eo(i.output,"Dev container not found.")}return o=await Hn(t,s.Id,r.workspaceFolder,e.remoteUser),await PF(s,t,o,e)}catch(a){throw SF(a,s,t,o,e)}}function SF(t,e,r,n,i){let s=t instanceof ce?t:new ce({description:"An error occurred setting up the container.",originalError:t});return e&&(s.manageContainer=!0,s.params=r.common,s.containerId=e.Id,s.dockerParams=r),n&&(s.containerProperties=n),i&&(s.config=i),s}async function PF(t,e,r,n){let{common:i}=e,{remoteEnv:s}=await Lo(i,r,n);return{params:i,properties:r,config:n,resolvedAuthority:{extensionHostEnv:s},tunnelInformation:i.isLocalContainer?bc(t):{},dockerParams:e,dockerContainerId:t.Id}}function IF(t,e){return"image"in t?t.image:Qs(e.common)}async function Wf(t,e,r){var i;let n=r!=null?r:[IF(e,t)];return t.common.progress(hn.BuildingImage),Cn(e)?await OF(t,e,n,(i=t.buildNoCache)!=null?i:!1):await hc(t,e,n[0],"image"in e)}async function OF(t,e,r,n){var v,C,A;let{cliHost:i,output:s}=t.common,o=gs(i,e),a=await Hf(o,i);if(!i.isFile(a))throw new ce({description:`Dockerfile (${a}) not found.`});let c=(await i.readFile(a)).toString(),l=c,u="dev_container_auto_added_stage_label";if((v=e.build)==null?void 0:v.target)u=e.build.target;else{let{lastStageName:k,modifiedDockerfile:T}=Cc(c,u);u=k,T&&(c=T)}let f=await Zs(t,e,u,()=>Ec(t,l)),d=a,h=[];if(f){let{featureBuildInfo:k}=f,T=c.match(/^\s*#\s*syntax\s*=.*[\r\n]/g);T&&(c=c.slice(T[0].length));let N=`${k.dockerfilePrefixContent}${c}
${k.dockerfileContent}`;d=i.path.join(k==null?void 0:k.dstFolder,"Dockerfile-with-features"),await i.writeFile(d,Buffer.from(N));for(let D in k.buildKitContexts)h.push("--build-context",`${D}=${k.buildKitContexts[D]}`);for(let D in k.buildArgs)h.push("--build-arg",`${D}=${k.buildArgs[D]}`)}let m=[];if(!t.buildKitVersion&&(t.buildxPlatform||t.buildxPush))throw new ce({description:"--platform or --push require BuildKit enabled.",data:{fileWithError:a}});t.buildKitVersion?(m.push("buildx","build"),t.buildxPlatform&&m.push("--platform",t.buildxPlatform),t.buildxPush?m.push("--push"):m.push("--load"),m.push("--build-arg","BUILDKIT_INLINE_CACHE=1")):m.push("build"),m.push("-f",d),r.map(k=>m.push("-t",k));let p=f?f.featureBuildInfo.overrideTarget:(C=e.build)==null?void 0:C.target;if(p&&m.push("--target",p),n)m.push("--no-cache"),(t.buildKitVersion||!f)&&m.push("--pull");else if(t.additionalCacheFroms&&t.additionalCacheFroms.forEach(k=>m.push("--cache-from",k)),e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")m.push("--cache-from",e.build.cacheFrom);else for(let k=0;k<e.build.cacheFrom.length;k++){let T=e.build.cacheFrom[k];m.push("--cache-from",T)}let w=(A=e.build)==null?void 0:A.args;if(w)for(let k in w)m.push("--build-arg",`${k}=${w[k]}`);m.push(...h),m.push(await Hf(lb(i,e),i));try{if(t.isTTY){let k=re(H({},Kt(t)),{output:ve(s,S.Info)});await lt(k,...m)}else{let k=re(H({},Et(t)),{output:ve(s,S.Info),print:"continuous"});await bt(k,...m)}}catch(k){throw new ce({description:"An error occurred building the image.",originalError:k,data:{fileWithError:a}})}let y=()=>qn(t,r[0],!1);return{updatedImageName:r,collapsedFeaturesConfig:f==null?void 0:f.collapsedFeaturesConfig,imageDetails:y}}function AF(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function RF(t,e){let{common:r}=t,n=await zn(t,e);if(t.expectExistingContainer&&!n)throw new ce({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",s=r.output.start(i);await bt(t,"rm","-f",n.Id),r.output.stop(i,s),n=void 0}return n}async function FF(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let s="Starting container",o=n.output.start(s);await bt(t,"start",r.Id),n.output.stop(s,o),await zn(t,e)||eo(n.output,"Dev container not found.")}return i}async function zn(t,e){let r=await To(t,!0,e);return(await vl(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function kF(t,e,r,n,i,s,o){let{common:a}=t;a.progress(hn.StartingContainer);let c=e.appPort,l=typeof c=="number"||typeof c=="string"?[c]:c||[],u=[].concat(...l.map(F=>["-p",typeof F=="number"?`127.0.0.1:${F}:${F}`:F])),f=s?["--mount",s]:[],d=e.mounts?[].concat(...e.mounts.map(F=>["--mount",F])):[],h=e.containerEnv,m=h?Object.keys(h).reduce((F,B)=>(F.push("-e",`${B}=${h[B]}`),F),[]):[],p=e.containerUser?["-u",e.containerUser]:[],w=[];((r==null?void 0:r.allFeatures)||[]).some(F=>(Fe||F.included)&&F.value&&F.init)&&w.push("--init"),((r==null?void 0:r.allFeatures)||[]).some(F=>(Fe||F.included)&&F.value&&F.privileged)&&w.push("--privileged");let y=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(F=>(Fe||F.included)&&F.value).map(F=>F.capAdd||[])));for(let F of y)w.push("--cap-add",F);let v=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(F=>(Fe||F.included)&&F.value).map(F=>F.securityOpt||[])));for(let F of v)w.push("--security-opt",F);let C=[].concat(...[].concat(...((r==null?void 0:r.allFeatures)||[]).map(F=>(Fe||F.included)&&F.value&&F.mounts).filter(Boolean),t.additionalMounts).map(F=>["--mount",`type=${F.type},src=${F.source},dst=${F.target}`])),A=((r==null?void 0:r.allFeatures)||[]).map(F=>(Fe||F.included)&&F.value&&F.entrypoint).filter(Boolean),k=["--entrypoint","/bin/sh"],T=["-c",`echo Container started
trap "exit 0" 15
${A.join(`
`)}
exec "$@"
while sleep 1 & wait $!; do :; done`,"-"];if(e.overrideCommand===!1&&o){let F=await o();T.push(...F.Config.Entrypoint||[]),T.push(...F.Config.Cmd||[])}let N=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...u,...f,...d,...C,..._F(i),...m,...p,...e.runArgs||[],...w,...k,n,...T],D,U=new Promise((F,B)=>D=B),{started:Y}=await vc(t,LF(i),U,a.output,a.getLogLevel()===S.Trace),$="Starting container",L=a.output.start($),M=re(H({},Kt(t)),{output:ve(t.common.output,S.Info)});lt(M,...N).then(D,D),await Y,a.output.stop($,L)}function _F(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function LF(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function eo(t,e){throw t.write(Ie(e)),new Error(e)}var mb=V(require("path"));function Wn(t,e){if(Gf(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Gf(t){return mb.extname(t)===".code-workspace"}async function wb(t,e,r,n){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${qe(e,t.common.cliHost.platform)}).`);let i=t.parsedAuthority;if(!i||ab(i))return DF(t,i,e,r,n);throw new Error(`Unexpected authority: ${JSON.stringify(i)}`)}async function DF(t,e,r,n,i){let{common:s,workspaceMountConsistencyDefault:o}=t,{cliHost:a,output:c}=s,l=a.cwd,u=e&&Wn(a.path,Gf(e.hostPath)?a.path.join(l,gb.basename(e.hostPath)):l),f=r||(u?await En(a,u.configFolderPath)||(n?Dt(a,u.configFolderPath):void 0):n),d=f&&await Hi(a,u,f,t.mountWorkspaceGitRoot,c,o,n)||void 0;if(!d)throw f||u?new ce({description:`Dev container config (${qe(f||Dt(a,u.configFolderPath),a.platform)}) not found.`}):new ce({description:"No dev container config and no workspace found."});let h=d.config;await ub(re(H({},t),{common:re(H({},s),{output:s.postCreate.output})}),h.initializeCommand,s.postCreate.onDidInput);let m;if(Cn(h)||"image"in h)m=await pb(t,h,d.workspaceConfig,i);else if("dockerComposeFile"in h){if(!u)throw new ce({description:"A Dev Container using Docker Compose requires a workspace folder."});m=await tb(t,u,h,i)}else throw new ce({description:`Dev container config (${h.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return m}async function Hi(t,e,r,n,i,s,o){let c=await Ml(t).readDocument(o!=null?o:r);if(!c)return;let l=yn(c),u=l&&pm(l);if(!u||typeof u!="object"||Array.isArray(u))throw new ce({description:`Dev container config (${qe(r,t.platform)}) must contain a JSON object literal.`});let f=await cb(t,e,u,n,i,s),d=Yh({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:f.workspaceFolder,configFile:r,env:t.env},u);return typeof d.workspaceFolder=="string"&&(f.workspaceFolder=d.workspaceFolder),"workspaceMount"in d&&(f.workspaceMount=d.workspaceMount),d.configFilePath=r,{config:d,workspaceConfig:f}}var bb=V(require("util"));async function to(t,e){let r=await Gn(t,e),n=r.common.output,i="Resolving Remote",s=n.start(i),o=await wb(r,t.configFile,t.overrideConfigFile,t.idLabels);n.stop(i,s);let{dockerContainerId:a,composeProjectName:c}=o;return{containerId:a,composeProjectName:c,remoteUser:o.properties.user,remoteWorkspaceFolder:o.properties.remoteWorkspaceFolder,finishBackgroundTasks:async()=>{try{await lp(o.params.backgroundTasks)}catch(l){n.write(Ie(String(l&&(l.stack||l.message)||l)))}}}}async function Gn(t,e){let{persistedFolder:r,additionalMounts:n,updateRemoteUserUIDDefault:i,containerDataFolder:s,containerSystemDataFolder:o,workspaceMountConsistency:a,mountWorkspaceGitRoot:c,remoteEnv:l}=t,u;t.workspaceFolder&&(u={hostPath:t.workspaceFolder});let f=yb.join(__dirname,"..",".."),d=new Date,h=await mt(f),m=Or(t,h,d,e,t.omitLoggerHeader),p=void 0,w=t.workspaceFolder||process.cwd(),y=await Vt(w,Yt),v=(await(0,bb.promisify)(vb.randomBytes)(20)).toString("hex"),C={prebuild:t.prebuild,computeExtensionHostEnv:!1,package:h,containerDataFolder:s,containerSystemDataFolder:o,appRoot:p,extensionPath:f,sessionId:v,sessionStart:d,cliHost:y,env:y.env,cwd:w,isLocalContainer:!1,progress:()=>{},output:m,allowSystemConfigChange:!0,defaultUserEnvProbe:t.defaultUserEnvProbe,postCreate:np(t.postCreateEnabled,t.skipNonBlocking,m),getLogLevel:()=>t.logLevel,onDidChangeLogLevel:()=>({dispose(){}}),loadNativeModule:Yt,shutdowns:[],backgroundTasks:[],persistedFolder:r||await y.tmpdir(),remoteEnv:l,buildxPlatform:t.buildxPlatform,buildxPush:t.buildxPush,skipFeatureAutoMapping:t.skipFeatureAutoMapping},A=t.dockerPath||"docker",k=t.dockerComposePath||"docker-compose",T=yc({exec:y.exec,env:y.env,output:C.output},A,k),N=t.useBuildKit==="never"?null:await dp({cliHost:y,dockerCLI:A,dockerComposeCLI:T,env:y.env,output:m});return{common:C,parsedAuthority:u,dockerCLI:A,dockerComposeCLI:T,dockerEnv:y.env,workspaceMountConsistencyDefault:a,mountWorkspaceGitRoot:c,updateRemoteUserUIDOnMacOS:!1,cacheMount:"bind",removeOnStartup:t.removeExistingContainer,buildNoCache:t.buildNoCache,expectExistingContainer:t.expectExistingContainer,additionalMounts:n,userRepositoryConfigurationPaths:[],updateRemoteUserUIDDefault:i,additionalCacheFroms:t.additionalCacheFroms,buildKitVersion:N,isTTY:process.stdin.isTTY||t.logFormat==="json",buildxPlatform:C.buildxPlatform,buildxPush:C.buildxPush}}function Or(t,e,r,n,i){let s=i?void 0:`${e.name} ${e.version}.`,o=TF(t,r,s);return o.dimensions=t.terminalDimensions,n.push(()=>o.join()),o}function TF({log:t,logLevel:e,logFormat:r},n,i=void 0){let s=r==="json"?bh(t,()=>e,n):vh(t,()=>e,n);return re(H({},ve(yh([s],i))),{join:async()=>{}})}var aE=V(require("path"));var Yi=V(require("path")),Rc=V(Kb()),Zb=V(require("os"));var Jb={workspaceMountConsistency:"cached",defaultUserEnvProbe:"loginInteractiveShell",logFormat:"text",removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!0,skipNonBlocking:!1,prebuild:!1,additionalMounts:[],updateRemoteUserUIDDefault:"on",additionalCacheFroms:[],dockerPath:void 0,dockerComposePath:void 0,containerDataFolder:void 0,containerSystemDataFolder:void 0,configFile:void 0,overrideConfigFile:void 0,persistedFolder:void 0,terminalDimensions:void 0,useBuildKit:"auto",buildxPlatform:void 0,buildxPush:!1},Xb={"user-data-folder":void 0,"docker-path":void 0,"docker-compose-path":void 0,"container-data-folder":void 0,"container-system-data-folder":void 0,"id-label":void 0,config:void 0,"override-config":void 0,"terminal-rows":void 0,"terminal-columns":void 0,"remote-env":void 0,"container-id":void 0,"mount-workspace-git-root":!0,"log-level":"info","log-format":"text","default-user-env-probe":"loginInteractiveShell"},ed=`
#!/bin/bash
SCRIPT_FOLDER="$(cd "$(dirname $0)" && pwd)"
USERNAME=\${1:-root}

if [ -z $HOME ]; then
    HOME="/root"
fi

FAILED=()

echoStderr()
{
    echo "$@" 1>&2
}

check() {
    LABEL=$1
    shift
    echo -e "
"
    echo -e "\u{1F504} Testing '$LABEL'"
    echo -e '\\033[37m'
    if "$@"; then
        echo -e "
" 
        echo "\u2705  Passed '$LABEL'!"
        return 0
    else
        echo -e "
"
        echoStderr "\u274C $LABEL check failed."
        FAILED+=("$LABEL")
        return 1
    fi
}

checkMultiple() {
    PASSED=0
    LABEL="$1"
    echo -e "
"
    echo -e "\u{1F504} Testing '$LABEL'."
    shift; MINIMUMPASSED=$1
    shift; EXPRESSION="$1"
    while [ "$EXPRESSION" != "" ]; do
        if $EXPRESSION; then ((PASSED++)); fi
        shift; EXPRESSION=$1
    done
    if [ $PASSED -ge $MINIMUMPASSED ]; then
        echo -e "
"
        echo "\u2705 Passed!"
        return 0
    else
        echo -e "
"
        echoStderr "\u274C '$LABEL' check failed."
        FAILED+=("$LABEL")
        return 1
    fi
}

reportResults() {
    if [ \${#FAILED[@]} -ne 0 ]; then
        echo -e "
"
        echoStderr -e "\u{1F4A5}  Failed tests: \${FAILED[@]}"
        exit 1
    else
        echo -e "
"
        echo -e "Test Passed!"
        exit 0
    fi
}`;var td="dev-container-features-test-lib";function er(t){je(t,{prefix:"[-]",stderr:!0}),process.exit(1)}function je(t,e){let r=(e==null?void 0:e.prefix)||"> ",n=`${(e==null?void 0:e.omitPrefix)?"":`${r} `}${t}
`;(e==null?void 0:e.stderr)?process.stderr.write(Rc.default.red(n)):(e==null?void 0:e.info)?process.stdout.write(Rc.default.bold.blue(n)):process.stdout.write(Rc.default.blue(n))}async function Qb(t){let{pkg:e,globalScenariosOnly:r,features:n,collectionFolder:i,cliHost:s}=t;process.stdout.write(`
\u250C \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2510
|    dev container 'features' |   
\u2502           v${e.version}           \u2502
\u2514 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2518

`);let o=`${i}/src`,a=`${i}/test`;(!await s.isFolder(o)||!await s.isFolder(a))&&er(`Folder '${i}' does not contain the required 'src' and 'test' folders.`);let c=[];return r?await eE(t,c):(await ik(t,c),n||await eE(t,c)),ok(c)}async function eE(t,e=[]){let{collectionFolder:r}=t,n=`${r}/test/_global`;return je(`Scenarios:         ${n}
`,{prefix:`
\u{1F4CA}`,info:!0}),e=await tE(n,t,e),e||(er(`Failed to run scenarios in ${n}`),[])}async function ik(t,e=[]){let{baseImage:r,collectionFolder:n,remoteUser:i,cliHost:s,skipAutogenerated:o,skipScenarios:a}=t,{features:c}=t,l=`${n}/test`;je(`baseImage:         ${r}`),je(`Target Folder:     ${n}`),c||(c=(await s.readDir(l)).filter(d=>d!=="_global"),c.length===0&&er(`No features specified and no test folders found in '${l}'`)),je(`features:          ${c.join(", ")}`);let u,f;o||(u=await ck(s,r,n,c,i),f=await oE(u,t),await rE(f,u,t)),je(`Starting test(s)...
`,{prefix:`
\u{1F3C3}`,info:!0});for(let d of c){je(`Starting '${d}' tests...`,{prefix:"\u{1F9EA}"});let h=Yi.default.join(n,"test",d);if(!o){if(!u||!f)return er("Uninitialized workspaceFolder or params"),[];await sk(d,u,f,h,t,e)}if(a||(je(`Executing scenarios for feature '${d}'...`,{prefix:"\u{1F9EA}"}),await tE(h,t,e)),!e)return er("Failed to run tests"),[]}return e}async function sk(t,e,r,n,i,s=[]){let{cliHost:o}=i,a=Yi.default.join(n,"test.sh");await o.isFile(a)||er(`Could not find test.sh script at ${a}`);let c=await o.readFile(a),l=`${t}-test-${Date.now()}.sh`;await o.writeFile(`${e}/${l}`,c),await o.writeFile(`${e}/${td}`,Buffer.from(ed));let u=await iE(r,l,e);return s.push({testName:t,result:u}),s}async function tE(t,e,r=[]){let{collectionFolder:n,cliHost:i}=e,s=Yi.default.join(t,"scenarios.json");if(!await i.isFile(s))return je(`No scenario file found at '${s}'. Skipping...`,{prefix:"\u26A0\uFE0F"}),r;let o=await i.readFile(s),a={};try{a=JSON.parse(o.toString())}catch(c){return er(`Failed to parse scenarios.json:  ${c.message}`),[]}for(let[c,l]of Object.entries(a)){je(`Running scenario:  ${c}`);let u=Yi.default.join(t,`${c}.sh`);if(!await i.isFile(u)){je(`No scenario test script found at path ${u}, skipping scenario...`);continue}let f=await lk(i,n,c,l),d=await oE(f,e);await rE(d,f,e);let h=await i.readFile(u),m=`${c}-test-${Date.now()}.sh`;await i.writeFile(`${f}/${m}`,h),await i.writeFile(`${f}/${td}`,Buffer.from(ed)),r.push({testName:c,result:await iE(d,m,f)})}return r}function ok(t){t||er("No test results found!");let e=t.every(r=>r.result);return process.stdout.write(`


`),je("================== TEST REPORT ==================",{info:!0,prefix:" "}),t.forEach(r=>{r.result?je(`Passed:      '${r.testName}'`,{prefix:"\u2705",info:!0}):je(`Failed:      '${r.testName}'`,{prefix:"\u274C",info:!0})}),process.stdout.write(`
`),e?0:1}var ak=`
{
	"image": "#{IMAGE}",
	"features": {
		#{FEATURES}
	},
	"remoteUser": "#{REMOTE_USER}"
}`;async function rE(t,e,r){let{quiet:n,remoteUser:i,disposables:s}=r;je(`workspaceFolder:   ${e}`),je(`Building test container...
`,{prefix:`
\u23F3`,info:!0});let o=await uk(t,e,n,s);if(!o||!o.containerId){er("Failed to launch container");return}let{containerId:a}=o;return je("Launched container.",{prefix:`
\u{1F680}`,info:!0}),je(`containerId:          ${a}`),je(`remoteUser:           ${i}`),o}async function nE(t){let e=(0,Zb.tmpdir)(),r=Yi.default.join(e,"vsch","container-features-test",Date.now().toString());return await t.mkdirp(`${r}/.devcontainer`),r}async function ck(t,e,r,n,i){let s=await nE(t),o=n.map(c=>`"./${c}": {}`).join(`,
`);for(let c of n){let l=`${r}/src/${c}`;await ni(l,`${s}/.devcontainer/${c}`)}let a=ak.replace("#{IMAGE}",e).replace("#{FEATURES}",o).replace("#{REMOTE_USER}",i);return await t.writeFile(`${s}/.devcontainer/devcontainer.json`,Buffer.from(a)),s}async function lk(t,e,r,n){let i=await nE(t),s=n.features;if(!n||!s)return er(`Scenario '${r}' is missing features!`),"";let o={};for(let[a,c]of Object.entries(s)){let l=`${e}/src/${a}`;await ni(l,`${i}/.devcontainer/${a}`),o[`./${a}`]=c}return n.features=o,await t.writeFile(`${i}/.devcontainer/devcontainer.json`,Buffer.from(JSON.stringify(n))),i}async function uk(t,e,r,n){var a;let{common:i}=t,s={},o=re(H({},Jb),{workspaceFolder:e,logLevel:i.getLogLevel(),mountWorkspaceGitRoot:!0,idLabels:[`devcontainer.local_folder=${e}`],remoteEnv:i.remoteEnv,skipFeatureAutoMapping:i.skipFeatureAutoMapping,log:c=>r?null:process.stderr.write(c)});try{if(r){let c=!1;for(to(o,n).then(function(u){process.stdout.write(`
`),s=u,c=!0});!c;)process.stdout.write("."),await new Promise(u=>setTimeout(u,500))}else s=await to(o,n);return re(H({},s),{disposables:n})}catch(c){return er(`Failed to launch container:

${(a=c==null?void 0:c.message)!=null?a:"Unknown error"}`),s}}async function iE(t,e,r){let n="chmod",i=["777",`./${e}`,`./${td}`];return await sE(t,n,i,r),n=`./${e}`,i=[],await sE(t,n,i,r)}async function sE(t,e,r,n){let i=re(H({},Xb),{"workspace-folder":n,"skip-feature-auto-mapping":!1,cmd:e,args:r,_:[e,...r]});return(await Fc(i)).outcome==="success"}async function oE(t,e){let{logLevel:r,quiet:n,disposables:i}=e;return await Gn({workspaceFolder:t,dockerPath:void 0,dockerComposePath:void 0,containerDataFolder:void 0,containerSystemDataFolder:void 0,mountWorkspaceGitRoot:!1,idLabels:[],configFile:void 0,overrideConfigFile:void 0,logLevel:r,logFormat:"text",log:s=>n?null:process.stderr.write(s),terminalDimensions:void 0,defaultUserEnvProbe:"loginInteractiveShell",removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!1,skipNonBlocking:!1,prebuild:!1,persistedFolder:void 0,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:{},additionalCacheFroms:[],omitLoggerHeader:!0,useBuildKit:"auto",buildxPlatform:void 0,buildxPush:!1,skipFeatureAutoMapping:!1},i)}function cE(t){return t.options({features:{type:"array",alias:"f",describe:"Feature(s) to test as space-separated parameters. Omit to run all tests.  Cannot be combined with '--global-scenarios-only'."},"global-scenarios-only":{type:"boolean",default:!1,description:"Run only scenario tests under 'tests/_global' .  Cannot be combined with '-f'."},"skip-scenarios":{type:"boolean",default:!1,description:"Skip all 'scenario' style tests.  Cannot be combined with '--global--scenarios-only'."},"skip-autogenerated":{type:"boolean",default:!1,description:"Skip all 'autogenerated' style tests."},"base-image":{type:"string",alias:"i",default:"ubuntu:focal",description:"Base Image"},"remote-user":{type:"string",alias:"u",default:"root",describe:"Remote user"},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."},quiet:{type:"boolean",alias:"q",default:!1,description:"Quiets output"}}).positional("target",{type:"string",default:".",description:"Path to folder containing 'src' and 'test' sub-folders."}).check(e=>{if(e["global-scenarios-only"]&&e.features)throw new Error("Cannot combine --global-scenarios-only and --features");if(e["skip-scenarios"]&&e["global-scenarios-only"])throw new Error("Cannot combine --skip-scenarios and --global-scenarios-only");return!0})}function lE(t){(async()=>await fk(t))().catch(console.error)}async function fk({"base-image":t,target:e,features:r,"global-scenarios-only":n,"skip-scenarios":i,"skip-autogenerated":s,"remote-user":o,quiet:a,"log-level":c}){let l=[],u=async()=>{await Promise.all(l.map(v=>v()))},f=process.cwd(),d=await Vt(f,Yt),h=aE.join(__dirname,"..","..",".."),m=await mt(h),p=at(c),w={baseImage:t,cliHost:d,logLevel:p,quiet:a,pkg:m,collectionFolder:d.path.resolve(e),features:r?Array.isArray(r)?r:[r]:void 0,globalScenariosOnly:n,skipScenarios:i,skipAutogenerated:s,remoteUser:o,disposables:l},y=await Qb(w);await u(),process.exit(y)}var dE=V(require("path"));var Vn=V(require("path")),uE=V(Ts());var Ki="devcontainer-collection.json";async function dk(t){let{cliHost:e,targetFolder:r,outputDir:n,forceCleanOutputDir:i,output:s,disposables:o}=t,a=e.path.resolve(r);if(!await ti(a))throw new Error(`Target folder '${a}' does not exist`);let c=e.path.resolve(n);await ti(c)&&(i?await ri(c,{recursive:!0,force:!0}):(s.write(`(!) ERR: Output directory '${c}' already exists. Manually delete, or pass '-f' to continue.`,S.Error),process.exit(1)));let l=await ti(e.path.join(a)),u=await nt(e.path.join(a,"devcontainer-feature.json"));if(!l)throw new Error(`Target folder '${a}' does not exist`);return u?s.write("Packaging single feature...",S.Info):s.write("Packaging feature collection...",S.Info),await Lt(c),{cliHost:e,targetFolder:a,outputDir:c,forceCleanOutputDir:i,output:s,disposables:o,isSingleFeature:u}}async function kc(t){t=await dk(t);let{output:e,isSingleFeature:r,outputDir:n}=t,i=[];if(r?i=await hk(t):i=await pk(t),!i){e.write("Failed to package features",S.Error);return}let s={sourceInformation:{source:"devcontainer-cli"},features:i},o=Vn.default.join(n,Ki);return await rr(o,JSON.stringify(s,null,4)),s}async function fE(t,e,r){return new Promise(n=>n(uE.default.create({file:Vn.default.join(r,e),cwd:t},["."])))}var _c=t=>`devcontainer-feature-${t}.tgz`;async function hk(t){let{output:e,targetFolder:r,outputDir:n}=t,i=[],s=Vn.default.join(r,"devcontainer-feature.json"),o=JSON.parse(await Ue(s,"utf-8"));if(!o.id||!o.version){e.write("Feature is missing an id or version in its devcontainer-feature.json",S.Error);return}let a=_c(o.id);return await fE(r,a,n),e.write(`Packaged feature '${o.id}'`,S.Info),i.push(o),i}async function pk(t){let{output:e,targetFolder:r,outputDir:n}=t,i=await So(r),s=[];for await(let o of i)if(e.write(`Processing feature: ${o}...`,S.Info),!o.startsWith(".")){let a=Vn.default.join(r,o),c=_c(o),l=Vn.default.join(a,"devcontainer-feature.json"),u=Vn.default.join(a,"install.sh");if(!nt(l)){e.write(`Feature '${o}' is missing a devcontainer-feature.json`,S.Error);return}if(!nt(u)){e.write(`Feature '${o}' is missing an install.sh`,S.Error);return}await fE(a,c,n);let f=JSON.parse(await Ue(l,"utf-8"));if(!f.id||!f.version){e.write(`Feature '${o}' is missing an id or version in its devcontainer-feature.json`,S.Error);return}s.push(f)}if(s.length!==0)return e.write(`Packaged ${s.length} features!`,S.Info),s}var mk=`
Package features at provided [target] (default is cwd), where [target] is either:
   1. A path to the src folder of the collection with [1..n] features.
   2. A path to a single feature that contains a devcontainer-feature.json.
   
   Additionally, a 'devcontainer-collection.json' will be generated in the output directory.
`;function hE(t){return t.options({"output-folder":{type:"string",alias:"o",default:"./output",description:"Path to output directory. Will create directories as needed."},"force-clean-output-folder":{type:"boolean",alias:"f",default:!1,description:"Automatically delete previous output directory before packaging"},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."}}).positional("target",{type:"string",default:".",description:mk}).check(e=>!0)}function pE(t){(async()=>await gk(t))().catch(console.error)}async function gk({target:t,"log-level":e,"output-folder":r,"force-clean-output-folder":n}){let i=[],s=async()=>{await Promise.all(i.map(h=>h()))},o=dE.default.join(__dirname,"..","..",".."),a=await mt(o),c=process.cwd(),l=await Vt(c,Yt),u=Or({logLevel:at(e),logFormat:"text",log:h=>process.stdout.write(h),terminalDimensions:void 0},a,new Date,i),d=await kc({cliHost:l,targetFolder:t,outputDir:r,output:u,disposables:i,forceCleanOutputDir:n})?0:1;await s(),process.exit(d)}var sd=V(require("path")),IE=V(require("os"));var nd=V(require("path")),Ji=V(Rf());var mE=V(require("path")),gE=V(require("fs")),rd=V(require("crypto"));async function wE(t,e,r,n){t.write(`Starting push of feature '${e.id}' to '${e.resource}' with tags '${n.join(", ")}'`),t.write(`${JSON.stringify(e,null,2)}`,S.Trace);let i=process.env,s=await Bi(t,e.registry,e.path,i,"pull,push");if(!s)return t.write("Failed to get registry auth token",S.Error),!1;let o=await wk(t,r,e);if(!o)return t.write(`Failed to generate manifest for ${e.id}`,S.Error),!1;t.write(`Generated manifest: 
${JSON.stringify(o==null?void 0:o.manifestObj,void 0,4)}`,S.Trace);let a=await cc(t,i,e,o.digest,s);if(o.digest&&a)return t.write("Not reuploading blobs, digest already exists.",S.Trace),await Lc(t,o.manifestStr,e,n,s),!0;let c=[{name:"configLayer",digest:o.manifestObj.config.digest},{name:"tgzLayer",digest:o.manifestObj.layers[0].digest}],l=await CE(t,e,s);if(!l)return t.write("Failed to get upload session ID",S.Error),!1;for await(let u of c){let{name:f,digest:d}=u,h=await EE(t,e,d,s);if(t.write(`blob: '${f}' with digest '${d}'  ${h?"already exists":"does not exist"} in registry.`,S.Trace),!h&&!await vE(t,r,l,e,d,s))return t.write(`Failed to PUT blob '${f}' with digest '${d}'`,S.Error),!1}return await Lc(t,o.manifestStr,e,n,s),!0}async function yE(t,e,r){t.write(`Starting push of latest feature collection for namespace '${e.path}' to '${e.registry}'`),t.write(`${JSON.stringify(e,null,2)}`,S.Trace);let n=process.env,i=await Bi(t,e.registry,e.path,n,"pull,push");if(!i)return t.write("Failed to get registry auth token",S.Error),!1;let s=await yk(t,r,e);if(!s)return t.write(`Failed to generate manifest for ${e.path}`,S.Error),!1;t.write(`Generated manifest: 
${JSON.stringify(s==null?void 0:s.manifestObj,void 0,4)}`,S.Trace);let o=await cc(t,n,e,s.digest,i);if(s.digest&&o)return t.write("Not reuploading blobs, digest already exists.",S.Trace),await Lc(t,s.manifestStr,e,["latest"],i),!0;let a=await CE(t,e,i);if(!a)return t.write("Failed to get upload session ID",S.Error),!1;let c=[{name:"configLayer",digest:s.manifestObj.config.digest},{name:"collectionLayer",digest:s.manifestObj.layers[0].digest}];for await(let l of c){let{name:u,digest:f}=l,d=await EE(t,e,f,i);if(t.write(`blob: '${u}' with digest '${f}'  ${d?"already exists":"does not exist"} in registry.`,S.Trace),!d&&!await vE(t,r,a,e,f,i))return t.write(`Failed to PUT blob '${u}' with digest '${f}'`,S.Error),!1}return await Lc(t,s.manifestStr,e,["latest"],i),!0}async function Lc(t,e,r,n,i){t.write(`Tagging manifest with tags: ${n.join(", ")}`,S.Trace);for await(let s of n){let o=`https://${r.registry}/v2/${r.path}/manifests/${s}`;t.write(`PUT -> '${o}'`,S.Trace);let a={type:"PUT",url:o,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/vnd.oci.image.manifest.v1+json"},data:Buffer.from(e)},{statusCode:c,resHeaders:l}=await Ns(a);if(c===429){t.write(`Failed to PUT manifest for tag ${s} due to too many requests. Retrying...`,S.Warning),await cs(2e3);let d=await Ns(a);c=d.statusCode,l=d.resHeaders}if(c!==201)return t.write(`Failed to PUT manifest for tag ${s}`,S.Error),!1;let u=l["docker-content-digest"]||l["Docker-Content-Digest"],f=l.location||l.Location;t.write(`Tagged: ${s} -> ${f}`,S.Info),t.write(`Returned Content-Digest: ${u}`,S.Trace)}return!0}async function vE(t,e,r,n,i,s){if(t.write(`PUT new blob -> '${i}'`,S.Info),!await nt(e))return t.write(`Blob ${e} does not exist`,S.Error),!1;let o={"user-agent":"devcontainer",authorization:`Bearer ${s}`,"content-type":"application/octet-stream"},a="";r.startsWith("https://")?a=r:a=`https://${n.registry}${r}`,a+=`?digest=${i}`,t.write(`Crafted blob url:  ${a}`,S.Trace);let{statusCode:c}=await Ns({type:"PUT",url:a,headers:o,data:await Ue(e)});return c!==201?(t.write(`${c}: Failed to upload blob '${e}' to '${a}'`,S.Error),!1):!0}async function wk(t,e,r){let n=await bE(t,e,T0);if(!n){t.write("Failed to calculate tgz layer.",S.Error);return}let i;return r.registry==="ghcr.io"&&(i={"com.github.package.type":"devcontainer_feature"}),await xE(t,n,i)}async function yk(t,e,r){let n=await bE(t,e,$0);if(!n){t.write("Failed to calculate collection file layer.",S.Error);return}let i;return r.registry==="ghcr.io"&&(i={"com.github.package.type":"devcontainer_collection"}),await xE(t,n,i)}async function bE(t,e,r){if(t.write(`Creating manifest from ${e}`,S.Trace),!await nt(e)){t.write(`${e} does not exist.`,S.Error);return}let n=gE.readFileSync(e),i=rd.createHash("sha256").update(n).digest("hex");return t.write(`${e}:  sha256:${i} (size: ${n.byteLength})`,S.Info),{mediaType:r,digest:`sha256:${i}`,size:n.byteLength,annotations:{"org.opencontainers.image.title":mE.basename(e)}}}async function EE(t,e,r,n){let i={"user-agent":"devcontainer",authorization:`Bearer ${n}`},s=`https://${e.registry}/v2/${e.path}/blobs/${r}`,o=await Ny({url:s,headers:i},t);return t.write(`${s}: ${o}`,S.Trace),o===200}async function CE(t,e,r){let n={"user-agent":"devcontainer",authorization:`Bearer ${r}`},i=`https://${e.registry}/v2/${e.path}/blobs/uploads/`;t.write(`Generating Upload URL -> ${i}`,S.Trace);let{statusCode:s,resHeaders:o}=await Ns({type:"POST",url:i,headers:n},t);if(t.write(`${i}: ${s}`,S.Trace),s===202){let a=o.location||o.Location;if(!a){t.write(`${i}: Got 202 status code, but no location header found.`,S.Error);return}return a}}async function xE(t,e,r){let n={schemaVersion:2,mediaType:"application/vnd.oci.image.manifest.v1+json",config:{mediaType:"application/vnd.devcontainers",digest:"sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",size:0},layers:[e]};r&&(n.annotations=r);let i=JSON.stringify(n),s=rd.createHash("sha256").update(i).digest("hex");return t.write(`Computed Content-Digest ->  sha256:${s} (size: ${s.length})`,S.Info),{manifestStr:i,manifestObj:n,digest:s}}var Dc=[];function id(t,e,r,n){let i=Ji.maxSatisfying(t,r);(i===null||Ji.compare(e,i)===1)&&Dc.push(n)}function vk(t,e,r){if(e.includes(t)){r.write(`(!) WARNING: Version ${t} already exists, skipping ${t}...`,S.Warning);return}let n=Ji.parse(t);return n||(r.write(`(!) ERR: Version ${t} is not a valid semantic version, skipping ${t}...`,S.Error),process.exit(1)),Dc=[],id(e,t,`${n.major}.x.x`,`${n.major}`),id(e,t,`${n.major}.${n.minor}.x`,`${n.major}.${n.minor}`),Dc.push(t),id(e,t,"x.x.x","latest"),Dc}async function SE(t,e,r,n){n.write("Fetching published versions...",S.Info);let i=await lc(e,n);i||process.exit(1);let s=vk(t,i,n);if(s){n.write(`Publishing versions: ${s.toString()}...`,S.Info);let o=nd.default.join(r,_c(e.id));await wE(n,e,o,s)||(n.write(`(!) ERR: Failed to publish feature: ${e.resource}`,S.Error),process.exit(1)),n.write(`Published feature: ${e.id}...`,S.Info)}}async function PE(t,e,r){r.write("Publishing collection metadata...",S.Info);let n=nd.default.join(e,Ki);await yE(r,t,n)||(r.write(`(!) ERR: Failed to publish collection metadata: ${Ki}`,S.Error),process.exit(1)),r.write("Published collection metadata...",S.Info)}var bk=`
Package and publish features at provided [target] (default is cwd), where [target] is either:
   1. A path to the src folder of the collection with [1..n] features.
   2. A path to a single feature that contains a devcontainer-feature.json.
`;function OE(t){return t.options({registry:{type:"string",alias:"r",default:"ghcr.io",description:"Name of the OCI registry."},namespace:{type:"string",alias:"n",require:!0,description:"Unique indentifier for the collection of features. Example: <owner>/<repo>"},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."}}).positional("target",{type:"string",default:".",description:bk}).check(e=>!0)}function AE(t){(async()=>await Ek(t))().catch(console.error)}async function Ek({target:t,"log-level":e,registry:r,namespace:n}){let i=[],s=async()=>{await Promise.all(i.map(p=>p()))},o=sd.default.join(__dirname,"..","..",".."),a=await mt(o),c=process.cwd(),l=await Vt(c,Yt),u=Or({logLevel:at(e),logFormat:"text",log:p=>process.stdout.write(p),terminalDimensions:void 0},a,new Date,i),f=sd.default.join(IE.tmpdir(),"/features-output"),h=await kc({cliHost:l,targetFolder:t,outputDir:f,output:u,disposables:i,forceCleanOutputDir:!0});h||(u.write(`(!) ERR: Failed to fetch ${Ki}`,S.Error),process.exit(1));for(let p of h.features){if(u.write(`Processing feature: ${p.id}...`,S.Info),!p.version){u.write(`(!) WARNING: Version does not exist, skipping ${p.id}...`,S.Warning);continue}let w=`${r}/${n}/${p.id}`,y=Ui(u,w);await SE(p.version,y,f,u)}await PE({registry:r,path:n,version:"latest"},f,u),await ri(f,{recursive:!0,force:!0}),await s(),process.exit()}var RE=V(require("path"));function FE(t){return t.options({"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."},"output-format":{choices:["text","json"],default:"text",description:"Output format."}}).positional("featureId",{type:"string",demandOption:!0,description:"Feature Id"})}function kE(t){(async()=>await Ck(t))().catch(console.error)}async function Ck({featureId:t,"log-level":e,"output-format":r}){let n=[],i=async()=>{await Promise.all(n.map(f=>f()))},s=RE.default.join(__dirname,"..","..",".."),o=await mt(s),a=Or({logLevel:at(e),logFormat:"text",log:f=>process.stdout.write(f),terminalDimensions:void 0},o,new Date,n,!0),c=Ui(a,t),l=await lc(c,a,!0);(!l||l.length===0)&&(r==="json"?a.raw(JSON.stringify({}),S.Info):a.raw(`No published versions found for feature '${t}'
`,S.Error),process.exit(1));let u={publishedVersions:l};r==="json"?xk(a,u):Sk(a,u),await i(),process.exit(0)}function xk(t,e){t.raw(JSON.stringify(e,null,2),S.Info)}function Sk(t,e){t.raw(`Published Versions: 
   ${e.publishedVersions.join(`
   `)}
`,S.Info)}var od="loginInteractiveShell";(async()=>{let t=Ve.join(__dirname,"..",".."),e=(await mt(t)).version,r=process.argv.slice(2),n=r[0]==="exec"&&r[1]!=="--help",i=wh([]).parserConfiguration({"boolean-negation":!1,"halt-at-non-option":n}).scriptName("devcontainer").version(e).demandCommand().strict();i.wrap(Math.min(120,i.terminalWidth())),i.command("up","Create and run dev container",Pk,Ik),i.command("build [path]","Build a dev container image",Rk,Fk),i.command("run-user-commands","Run user commands",Lk,Dk),i.command("read-configuration","Read configuration",Nk,jk),i.command("features","Features commands",s=>{s.command("test <target>","Test features",cE,lE),s.command("package <target>","Package features",hE,pE),s.command("publish <target>","Package and publish features",OE,AE),s.command("info <featureId>","Fetch info on a feature",FE,kE)}),i.command(n?["exec","*"]:["exec <cmd> [args..]"],"Execute a command on a running dev container",Uk,Bk),i.epilog(`devcontainer@${e} ${t}`),i.parse(n?r.slice(1):r)})().catch(console.error);var _E=/^type=(bind|volume),source=([^,]+),target=([^,]+)(?:,external=(true|false))?$/;function Pk(t){return t.options({"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"workspace-mount-consistency":{choices:["consistent","cached","delegated"],default:"cached",description:"Workspace mount consistency."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"id-label":{type:"string",description:"Id label(s) of the format name=value. These will be set on the container and used to query for an existing container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:od,description:`Default value for the devcontainer.json's "userEnvProbe".`},"update-remote-user-uid-default":{choices:["never","on","off"],default:"on",description:"Default for updating the remote user's UID and GID to the local user's one."},"remove-existing-container":{type:"boolean",default:!1,description:"Removes the dev container if it already exists."},"build-no-cache":{type:"boolean",default:!1,description:"Builds the image with `--no-cache` if the container does not exist."},"expect-existing-container":{type:"boolean",default:!1,description:"Fail if the container does not exist."},"skip-post-create":{type:"boolean",default:!1,description:"Do not run onCreateCommand, updateContentCommand, postCreateCommand, postStartCommand or postAttachCommand and do not install dotfiles."},"skip-non-blocking-commands":{type:"boolean",default:!1,description:"Stop running user commands after running the command configured with waitFor or the updateContentCommand by default."},prebuild:{type:"boolean",default:!1,description:"Stop after onCreateCommand and updateContentCommand, rerunning updateContentCommand if it has run before."},"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},mount:{type:"string",description:"Additional mount point(s). Format: type=<bind|volume>,source=<source>,target=<target>[,external=<true|false>]"},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."},"cache-from":{type:"string",description:"Additional image to use as potential layer cache during image building"},buildkit:{choices:["auto","never"],default:"auto",description:"Control whether BuildKit should be used"},"skip-feature-auto-mapping":{type:"boolean",default:!1,hidden:!0,description:"Temporary option for testing."}}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(s=>!/.+=.+/.test(s)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");if(!(e["workspace-folder"]||e["id-label"]))throw new Error("Missing required argument: workspace-folder or id-label");if(!(e["workspace-folder"]||e["override-config"]))throw new Error("Missing required argument: workspace-folder or override-config");let n=e.mount&&(Array.isArray(e.mount)?e.mount:[e.mount]);if(n==null?void 0:n.some(s=>!_E.test(s)))throw new Error("Unmatched argument format: mount must match type=<bind|volume>,source=<source>,target=<target>[,external=<true|false>]");let i=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(i==null?void 0:i.some(s=>!/.+=.+/.test(s)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function Ik(t){(async()=>Ok(t))().catch(console.error)}async function Ok({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"workspace-mount-consistency":o,"mount-workspace-git-root":a,"id-label":c,config:l,"override-config":u,"log-level":f,"log-format":d,"terminal-rows":h,"terminal-columns":m,"default-user-env-probe":p,"update-remote-user-uid-default":w,"remove-existing-container":y,"build-no-cache":v,"expect-existing-container":C,"skip-post-create":A,"skip-non-blocking-commands":k,prebuild:T,mount:N,"remote-env":D,"cache-from":U,buildkit:Y,"skip-feature-auto-mapping":$}){let L=s?Ve.resolve(process.cwd(),s):void 0,M=D?Array.isArray(D)?D:[D]:[],z=U?Array.isArray(U)?U:[U]:[],F={dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:L,workspaceMountConsistency:o,mountWorkspaceGitRoot:a,idLabels:c?Array.isArray(c)?c:[c]:io(L),configFile:l?ct.file(Ve.resolve(process.cwd(),l)):void 0,overrideConfigFile:u?ct.file(Ve.resolve(process.cwd(),u)):void 0,logLevel:at(f),logFormat:d,log:E=>process.stderr.write(E),terminalDimensions:m&&h?{columns:m,rows:h}:void 0,defaultUserEnvProbe:p,removeExistingContainer:y,buildNoCache:v,expectExistingContainer:C,postCreateEnabled:!A,skipNonBlocking:k,prebuild:T,persistedFolder:t,additionalMounts:N?(Array.isArray(N)?N:[N]).map(E=>{let[,I,R,K,ie]=_E.exec(E);return{type:I,source:R,target:K,external:ie==="true"}}):[],updateRemoteUserUIDDefault:w,remoteEnv:ad(M),additionalCacheFroms:z,useBuildKit:Y,buildxPlatform:void 0,buildxPush:!1,skipFeatureAutoMapping:$},B=await Ak(F),b=B.outcome==="error"?1:0;console.log(JSON.stringify(B)),B.outcome==="success"&&await B.finishBackgroundTasks(),await B.dispose(),process.exit(b)}async function Ak(t){let e=[],r=async()=>{await Promise.all(e.map(n=>n()))};try{let n=await to(t,e);return H({outcome:"success",dispose:r},n)}catch(n){let i=n==null?void 0:n.stack,s=n instanceof ce?n:new ce({description:"An error occurred setting up the container.",originalError:n});return i&&console.error(i),{outcome:"error",message:s.message,description:s.description,containerId:s.containerId,dispose:r}}}function Rk(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"no-cache":{type:"boolean",default:!1,description:"Builds the image with `--no-cache`."},"image-name":{type:"string",description:"Image name."},"cache-from":{type:"string",description:"Additional image to use as potential layer cache"},buildkit:{choices:["auto","never"],default:"auto",description:"Control whether BuildKit should be used"},platform:{type:"string",description:"Set target platforms."},push:{type:"boolean",default:!1,description:"Push to a container registry."},"skip-feature-auto-mapping":{type:"boolean",default:!1,hidden:!0,description:"Temporary option for testing."}})}function Fk(t){(async()=>kk(t))().catch(console.error)}async function kk(t){let e=await _k(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function _k({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"workspace-folder":n,"log-level":i,"log-format":s,"no-cache":o,"image-name":a,"cache-from":c,buildkit:l,platform:u,push:f,"skip-feature-auto-mapping":d}){let h=[],m=async()=>{await Promise.all(h.map(p=>p()))};try{let p=Ve.resolve(process.cwd(),n),w=void 0,y=void 0,v=c?Array.isArray(c)?c:[c]:[],C=await Gn({dockerPath:e,dockerComposePath:r,containerDataFolder:void 0,containerSystemDataFolder:void 0,workspaceFolder:p,mountWorkspaceGitRoot:!1,idLabels:io(p),configFile:w,overrideConfigFile:y,logLevel:at(i),logFormat:s,log:B=>process.stderr.write(B),terminalDimensions:void 0,defaultUserEnvProbe:"loginInteractiveShell",removeExistingContainer:!1,buildNoCache:o,expectExistingContainer:!1,postCreateEnabled:!1,skipNonBlocking:!1,prebuild:!1,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:{},additionalCacheFroms:v,useBuildKit:l,buildxPlatform:u,buildxPush:f,skipFeatureAutoMapping:d},h),{common:A,dockerCLI:k,dockerComposeCLI:T}=C,{cliHost:N,env:D,output:U}=A,Y=Wn(N.path,p),$=w||(Y?await En(N,Y.configFolderPath)||(y?Dt(N,Y.configFolderPath):void 0):y),L=$&&await Hi(N,Y,$,C.mountWorkspaceGitRoot,U,void 0,y)||void 0;if(!L)throw new ce({description:`Dev container config (${qe(w||Dt(N,Y.configFolderPath),N.platform)}) not found.`});let{config:M}=L,z=[""],F=a&&(Array.isArray(a)?a:[a])||void 0;if(Cn(M)){let{updatedImageName:B}=await Wf(C,M,F);F?(f||await Promise.all(F.map(b=>lt(C,"tag",B[0],b))),z=F):z=B}else if("dockerComposeFile"in M){if(u||f)throw new ce({description:"--platform or --push not supported."});let B=N.path.join(N.cwd,".env"),b=Array.isArray(M.dockerComposeFile)&&M.dockerComposeFile.length===0&&await N.isFile(B)?B:void 0,E=await Ko(N,M,N.env,p),I=[].concat(...E.map(fe=>["-f",fe]));b&&I.push("--env-file",b);let R=await Bf(C,Y,E),K={cliHost:N,dockerCLI:k,dockerComposeCLI:T,env:D,output:U},ie=await gc(K,E,b);if(Object.keys(ie.services||{}).indexOf(M.service)===-1)throw new Error(`Service '${M.service}' configured in devcontainer.json not found in Docker Compose configuration.`);let ke=re(H({},C),{common:re(H({},C.common),{output:ve(K.output,S.Info)})});await Mf(M,R,ke,E,b,I,[M.service],C.buildNoCache||!1,C.common.persistedFolder,"docker-compose.devcontainer.build",v);let J=ie.services[M.service].image||Uf(await K.dockerComposeCLI(),R,M.service);F?(await Promise.all(F.map(fe=>lt(C,"tag",J,fe))),z=F):z=J}else{await lt(C,"pull",M.image);let{updatedImageName:B}=await hc(C,M,M.image,"image"in M);if(u||f)throw new ce({description:"--platform or --push require dockerfilePath."});F?(await Promise.all(F.map(b=>lt(C,"tag",B[0],b))),z=F):z=B}return{outcome:"success",imageName:z,dispose:m}}catch(p){let w=p==null?void 0:p.stack,y=p instanceof ce?p:new ce({description:"An error occurred building the container.",originalError:p});return w&&console.error(w),{outcome:"error",message:y.message,description:y.description,dispose:m}}}function Lk(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"container-id":{type:"string",description:"Id of the container to run the user commands for."},"id-label":{type:"string",description:"Id label(s) of the format name=value. If no --container-id is given the id labels will be used to look up the container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:od,description:`Default value for the devcontainer.json's "userEnvProbe".`},"skip-non-blocking-commands":{type:"boolean",default:!1,description:"Stop running user commands after running the command configured with waitFor or the updateContentCommand by default."},prebuild:{type:"boolean",default:!1,description:"Stop after onCreateCommand and updateContentCommand, rerunning updateContentCommand if it has run before."},"stop-for-personalization":{type:"boolean",default:!1,description:"Stop for personalization."},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."},"skip-feature-auto-mapping":{type:"boolean",default:!1,hidden:!0,description:"Temporary option for testing."}}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");let n=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(n==null?void 0:n.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function Dk(t){(async()=>Tk(t))().catch(console.error)}async function Tk(t){let e=await $k(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function $k({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"mount-workspace-git-root":o,"container-id":a,"id-label":c,config:l,"override-config":u,"log-level":f,"log-format":d,"terminal-rows":h,"terminal-columns":m,"default-user-env-probe":p,"skip-non-blocking-commands":w,prebuild:y,"stop-for-personalization":v,"remote-env":C,"skip-feature-auto-mapping":A}){let k=[],T=async()=>{await Promise.all(k.map(N=>N()))};try{let N=Ve.resolve(process.cwd(),s),D=c?Array.isArray(c)?c:[c]:io(N),U=C?Array.isArray(C)?C:[C]:[],Y=l?ct.file(Ve.resolve(process.cwd(),l)):void 0,$=u?ct.file(Ve.resolve(process.cwd(),u)):void 0,L=await Gn({dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:N,mountWorkspaceGitRoot:o,idLabels:D,configFile:Y,overrideConfigFile:$,logLevel:at(f),logFormat:d,log:J=>process.stderr.write(J),terminalDimensions:m&&h?{columns:m,rows:h}:void 0,defaultUserEnvProbe:p,removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!0,skipNonBlocking:w,prebuild:y,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:ad(U),additionalCacheFroms:[],useBuildKit:"auto",buildxPlatform:void 0,buildxPush:!1,skipFeatureAutoMapping:A},k),{common:M}=L,{cliHost:z,output:F}=M,B=Wn(z.path,N),b=Y||(B?await En(z,B.configFolderPath)||($?Dt(z,B.configFolderPath):void 0):$),E=b&&await Hi(z,B,b,L.mountWorkspaceGitRoot,F,void 0,$)||void 0;if(!E)throw new ce({description:`Dev container config (${qe(Y||Dt(z,B.configFolderPath),z.platform)}) not found.`});let{config:I,workspaceConfig:R}=E,K=a?await ir(L,a):await zn(L,D);K||eo(M.output,"Dev container not found.");let ie=await Hn(L,K.Id,R.workspaceFolder,I.remoteUser),W=oi(z.platform,I.configFilePath,ie.env,I),ke=Do(M,ie,W),_e=await ml(M,ie,W,ke,v);return{outcome:"success",result:_e,dispose:T}}catch(N){let D=N==null?void 0:N.stack,U=N instanceof ce?N:new ce({description:"An error occurred running user commands in the container.",originalError:N});return D&&console.error(D),{outcome:"error",message:U.message,description:U.description,dispose:T}}}function Nk(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"container-id":{type:"string",description:"Id of the container to run the user commands for."},"id-label":{type:"string",description:"Id label(s) of the format name=value. If no --container-id is given the id labels will be used to look up the container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"include-features-configuration":{type:"boolean",default:!1,description:"Include features configuration."},"skip-feature-auto-mapping":{type:"boolean",default:!1,hidden:!0,description:"Temporary option for testing."}}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(n=>!/.+=.+/.test(n)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");return!0})}function jk(t){(async()=>Mk(t))().catch(console.error)}async function Mk({"docker-path":t,"docker-compose-path":e,"workspace-folder":r,"mount-workspace-git-root":n,config:i,"override-config":s,"container-id":o,"id-label":a,"log-level":c,"log-format":l,"terminal-rows":u,"terminal-columns":f,"include-features-configuration":d,"skip-feature-auto-mapping":h}){let m=[],p=async()=>{await Promise.all(m.map(y=>y()))},w;try{let y=Ve.resolve(process.cwd(),r),v=a?Array.isArray(a)?a:[a]:io(y),C=i?ct.file(Ve.resolve(process.cwd(),i)):void 0,A=s?ct.file(Ve.resolve(process.cwd(),s)):void 0,k=y||process.cwd(),T=await Vt(k,Yt),N=Ve.join(__dirname,"..",".."),D=new Date,U=await mt(N);w=Or({logLevel:at(c),logFormat:l,log:I=>process.stderr.write(I),terminalDimensions:f&&u?{columns:f,rows:u}:void 0},U,D,m);let Y=Wn(T.path,y),$=C||(Y?await En(T,Y.configFolderPath)||(A?Dt(T,Y.configFolderPath):void 0):A),L=$&&await Hi(T,Y,$,n,w,void 0,A)||void 0;if(!L)throw new ce({description:`Dev container config (${qe(C||Dt(T,Y.configFolderPath),T.platform)}) not found.`});let{config:M}=L,z=t||"docker",F=yc({exec:T.exec,env:T.env,output:w},z,e||"docker-compose"),B={cliHost:T,dockerCLI:z,dockerComposeCLI:F,env:T.env,output:w},b=o?await ir(B,o):await zn(B,v);b&&(M=oi(T.platform,M.configFilePath,zf(b.Config.Env),M));let E=d?await uc({extensionPath:N,cwd:k,output:w,env:T.env,skipFeatureAutoMapping:h},await mc({cliHost:T,package:U}),L.config,Xs):void 0;await new Promise((I,R)=>{process.stdout.write(JSON.stringify({configuration:M,workspace:L.workspaceConfig,featuresConfiguration:E})+`
`,K=>K?R(K):I())})}catch(y){w?w.write(y&&(y.stack||y.message)||String(y)):console.error(y),await p(),process.exit(1)}await p(),process.exit(0)}function Uk(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"container-id":{type:"string",description:"Id of the container to run the user commands for."},"id-label":{type:"string",description:"Id label(s) of the format name=value. If no --container-id is given the id labels will be used to look up the container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:od,description:`Default value for the devcontainer.json's "userEnvProbe".`},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."},"skip-feature-auto-mapping":{type:"boolean",default:!1,hidden:!0,description:"Temporary option for testing."}}).positional("cmd",{type:"string",description:"Command to execute.",demandOption:!0}).positional("args",{type:"string",array:!0,description:"Arguments to the command.",demandOption:!0}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");let n=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(n==null?void 0:n.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function Bk(t){(async()=>qk(t))().catch(console.error)}async function qk(t){let e=await Fc(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function Fc({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"mount-workspace-git-root":o,"container-id":a,"id-label":c,config:l,"override-config":u,"log-level":f,"log-format":d,"terminal-rows":h,"terminal-columns":m,"default-user-env-probe":p,"remote-env":w,"skip-feature-auto-mapping":y,_:v}){let C=[],A=async()=>{await Promise.all(C.map(k=>k()))};try{let k=Ve.resolve(process.cwd(),s),T=c?Array.isArray(c)?c:[c]:io(k),N=w?Array.isArray(w)?w:[w]:[],D=l?ct.file(Ve.resolve(process.cwd(),l)):void 0,U=u?ct.file(Ve.resolve(process.cwd(),u)):void 0,Y=await Gn({dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:k,mountWorkspaceGitRoot:o,idLabels:T,configFile:D,overrideConfigFile:U,logLevel:at(f),logFormat:d,log:_e=>process.stderr.write(_e),terminalDimensions:m&&h?{columns:m,rows:h}:void 0,defaultUserEnvProbe:p,removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!0,skipNonBlocking:!1,prebuild:!1,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:ad(N),additionalCacheFroms:[],useBuildKit:"auto",omitLoggerHeader:!0,buildxPlatform:void 0,buildxPush:!1,skipFeatureAutoMapping:y},C),{common:$}=Y,{cliHost:L,output:M}=$,z=Wn(L.path,k),F=D||(z?await En(L,z.configFolderPath)||(U?Dt(L,z.configFolderPath):void 0):U),B=F&&await Hi(L,z,F,Y.mountWorkspaceGitRoot,M,void 0,U)||void 0;if(!B)throw new ce({description:`Dev container config (${qe(D||Dt(L,z.configFolderPath),L.platform)}) not found.`});let{config:b,workspaceConfig:E}=B,I=a?await ir(Y,a):await zn(Y,T);I||eo($.output,"Dev container not found.");let R=await Hn(Y,I.Id,E.workspaceFolder,b.remoteUser),K=oi(L.platform,b.configFilePath,R.env,b),ie=Do($,R,K),W=R.remoteWorkspaceFolder||R.homeFolder,ke=ve(M,S.Info);return await yl(re(H({},$),{output:ke}),R,v||[],W,{remoteEnv:await ie,print:"continuous"}),{outcome:"success",dispose:A}}catch(k){let T=k==null?void 0:k.stack,N=k instanceof ce?k:new ce({description:"An error occurred running a command in the container.",originalError:k});return T&&console.error(T),{outcome:"error",message:N.message,description:N.description,containerId:N.containerId,dispose:A}}}function ad(t){return t.reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substring(0,n)]=r.substring(n+1)),e},{})}function io(t){return[`${hb}=${t}`]}0&&(module.exports={doExec});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=devContainersSpecCLI.js.map
